;(function(){var baseUrl;var __factory=function(){var module=(function(dependencies){return function(init){return init.call({},(function(){return{getSpaghettiVersion:function(){return "13.0-25-g6015dbc";},getModuleName:function(){return "prezi_editor_store_common";},getModuleVersion:function(){return "release-2021w06-base-26-gaeb382e";},getResourceUrl:function(resource){if(resource.substr(0,1)!="/"){resource="/"+resource;}return baseUrl+resource;},"dependencies":{"prezi.geometry":dependencies[0],"prezi.text.model":dependencies[1],"prezi_app_utils":dependencies[2],"prezi_bacon":dependencies[3],"prezi_cet":dependencies[4],"prezi_editor_store_audio":dependencies[5],"prezi_editor_store_contextmenu":dependencies[6],"prezi_editor_store_document":dependencies[7],"prezi_editor_store_focus":dependencies[8],"prezi_editor_store_meeting":dependencies[9],"prezi_editor_store_mode":dependencies[10],"prezi_editor_store_object":dependencies[11],"prezi_editor_store_save":dependencies[12],"prezi_editor_store_support":dependencies[13],"prezi_editor_store_text":dependencies[14],"prezi_editor_store_ui":dependencies[15],"prezi_externalserviceprovider":dependencies[16],"prezi_featureswitcher":dependencies[17],"prezi_logger":dependencies[18],"prezi_nativeapitypes":dependencies[19],"prezi_utils":dependencies[20]}};})());};})(arguments);var moduleImpl=(function(){return module(function(d){function c(a){const b=h.Bacon.newBus();b.onValue(a);return b}var f=d.dependencies.prezi_app_utils,h=d.dependencies.prezi_bacon,e=d.dependencies.prezi_editor_store_focus,l=d.dependencies.prezi_editor_store_meeting,g=d.dependencies.prezi_editor_store_mode,r=d.dependencies.prezi_editor_store_object,t=d.dependencies.prezi_editor_store_support,u=d.dependencies.prezi_editor_store_text,m=d.dependencies.prezi_editor_store_ui,v=d.dependencies.prezi_externalserviceprovider,n=d.dependencies.prezi_logger,
w=d.dependencies.prezi_nativeapitypes,k=d.dependencies.prezi_utils,p={};Object.defineProperty(p,"__esModule",{value:!0});p.aa=class{constructor(a,b,q,d){this.U=h.Bacon.newBus();this.f={mode:{kind:f.EditorMode.edit},selectionInfo:r.emptySelectionInfo(),canvasHoveredEntityIds:null,uiHoveredEntityIds:null,canvasEditedEntityIds:[],openedPopupId_KILLME:null,openedSidebarId:null,isStorylineVisible:!0,openDialogProps:{kind:m.DialogKind.None},openTabMenuId:null,textSelectionState:u.createEmptyTextSelectionState(),
componentFocusMode:e.ComponentFocusMode.none,isUndoable:!1,isRedoable:!1,saveState:w.SaveState.saved,contextMenuState:null,contextMenuRequest:null,selectionSource:null,currentTopic:null,currentTopicNavigationType:null,followerState:{status:l.FollowerStatus.MeetingLoading,connection:l.ConnectionStatus.Default},presenterState:{status:l.PresenterStatus.Initial,connection:l.ConnectionStatus.Default,isEndPopupOpen:!1,followerCount:0},isFollower:!1,userHasEditRights:!1,userHasCommentRights:!1,userHasPresentRights:!0,
isFullscreen:!1,isOnboarding:!1,coverEditMode:null,maskEditingMode:{kind:g.MaskingModeKind.off},commentingStateVersion:null,coeditStatus:g.CoeditStatus.uninitialized,coeditOfflineOnlineSwitchStatus:{kind:"NoSyncInProgress"},networkStatus:0,saveAvailabilityStatus:g.SaveAvailabilityStatus.enabled,isEditingSessionClosed:!1,shownOnboardingStep:null,propertyBarProps:{objectProps:[],structureType:null},supportWidgetState:{activeView:{id:t.SupportWidgetViews.OVERVIEW},isActive:!1,steps:[],topics:[],isVisible:!0},
isBgUploadInProgress:!1,draggedEntityHoveredTopicId:null,audioState:null,navbarFullyVisible:!1,globalException:null,spellcheckStatus:"NOT_INITIALIZED",templateData:{templateId:null,themeId:null},isTopicZoomAreaEditEnabled:!1,codeSnippetEditorOpen:!1,userLicenseInformation:{analyticsEnabled:!1,editChart:!0,isDefaultLicense:!0,isTeam:!1,licenseTypeOid:"",pitchAudio:!1,pitchBackgroundImageIntegration:!1,pitchComment:!0,pitchCreate:!0,pitchCustomSchemes:!1,pitchExtraStoryblocks:!1,pitchIconIntegration:!1,
pitchImageIntegration:!1,pitchPrivacyPrivate:!1,presenterView:!1,remotePresent:!0,unlimitedViewlinks:!1,videoUpload:!0,ownPreziLogo:!1,noWatermark:!1,customLogo:!1,isPaidLicense:!1,hasCoreLicense:!1},logo:{type:v.PreziLogoType.Watermark,editable:!1},navigationEvent:null,featurePreviewModeWithSaveDisabled:!1};this.pa="followerState supportWidgetState isFullscreen isOnboarding coeditStatus networkStatus featurePreviewModeWithSaveDisabled openDialogProps logo".split(" ");this.v=!1;this.logger=n.LoggerModule.createPreLogger("EditorStoreImpl");
this.f.mode=a;this.f.userHasEditRights=b;this.f.userHasCommentRights=q;this.f.userHasPresentRights=d;this.O();this.$=h.Bacon.newBus();this.w=h.Bacon.newBus();this.L=h.Bacon.newBus();this.N=h.Bacon.newBus();this.zb=this.$.toProperty(this.state);this.na=this.w.toProperty({state:this.state,rogueUIProps_killme:{}});this.ea=c((a)=>this.da(a));this.ma=c((a)=>this.Xa(a));this.la=c((a)=>this.ca(a));this.Ga=c((a)=>this.setMaskingMode(a));this.La=c((a)=>this.setOpenSidebarId(a));this.Ka=c((a)=>this.setOpenedDialogProps(a));
this.Ma=c((a)=>this.setOpenTabMenuId(a));this.Db=c((a)=>this.ub(a));this.Oa=c((a)=>this.nb(a));this.ia=c((a)=>this.oa(a));this.Ra=c((a)=>this.setSaveState(a));this.Ca=c((a)=>this.hb(a));this.Ba=c((a)=>this.gb(a));this.ka=c((a)=>this.Wa(a));this.ja=c((a)=>this.Va(a));this.ra=c((a)=>this.$a(a));this.Na=c((a)=>this.mb(a));this.xa=c((a)=>this.eb(a));this.Eb=c((a)=>this.vb(a));this.ya=c((a)=>this.ab(a));this.Aa=c((a)=>this.fb(a));this.ha=c((a)=>this.Ua(a));this.ga=c((a)=>this.lb(a));this.qa=c((a)=>this.Za(a));
this.Ja=c((a)=>this.kb(a));this.Qa=c((a)=>this.ob(a));this.wa=c((a)=>this.Ya(a));this.xb=c((a)=>this.pb(a));this.Ab=c((a)=>this.rb(a));this.Bb=c((a)=>this.sb(a));this.ta=c((a)=>this.cb(a));this.ba=c((a)=>this.Sa(a));this.Ha=c((a)=>this.ib(a));this.sa=c((a)=>this.bb(a));this.yb=c((a)=>this.qb(a));this.Cb=c((a)=>this.tb(a));this.Fb=c((a)=>this.wb(a));this.Fa=c((a)=>this.setLogo(a));this.fa=c((a)=>this.Ta(a));this.Ia=c((a)=>this.jb(a));this.m=null;this.j=!1;this.i=[]}reset(){this.O();this.u()}O(){const a=
{};for(let b in this.f)this.f.hasOwnProperty(b)&&(-1!==this.pa.indexOf(b)&&this.state&&this.state.hasOwnProperty(b)?a[b]=this.state[b]:a[b]=this.f[b]);this.state=a}addComponentFocusStream(a){this.ia.plug(a)}addChangeModeActionStream(a){this.ea.plug(a)}addCurrentTopicActionStream(a){this.ma.plug(a)}addCoverEditModeStream(a){this.la.plug(a)}addMaskEditingModeStream(a){this.Ga.plug(a)}addSaveStateActionStream(a){this.Ra.plug(a)}addIsUndoableActionStream(a){this.Ca.plug(a)}addIsRedoableActionStream(a){this.Ba.plug(a)}addRecalculateEntityUnderMouseActionStream(a){this.N.plug(a)}getRecalculateEntityUnderMouseActionStream(){return this.N}addTextSelectionStateStream(a){this.Db.plug(a)}addPropertyBarPropsStream(a){this.Oa.plug(a)}getPropertyBarPropsStream(){return this.getStateStream().map((a)=>
a.propertyBarProps)}addHighlightEntitiesOnDragSelectActionStream(a){this.L.plug(a)}getHighlightEntitiesOnDragSelectActionStream(){return this.L}ub(a){if(null==a)throw Error("textSelectionState should not be null");this.state.textSelectionState.equals(a)||(this.state.textSelectionState=a,(a=null!=a&&a.isSingleSelection())&&this.state.componentFocusMode===e.ComponentFocusMode.none?this.state.componentFocusMode=e.ComponentFocusMode.textEditor:a||this.state.componentFocusMode!==e.ComponentFocusMode.textEditor||
(this.state.componentFocusMode=e.ComponentFocusMode.none),this.pushState())}nb(a){null==a&&(a={objectProps:[],structureType:null});this.state.propertyBarProps.objectProps.length===a.objectProps.length&&k.Utils.arrayEquals(a.objectProps,this.state.propertyBarProps.objectProps)||(this.state.propertyBarProps=a,this.pushState())}getTextSelectionStateStream(){return this.getStateStream().map((a)=>a.textSelectionState).skipDuplicates()}getTextSelectionState(){return this.state.textSelectionState}addChangeContextMenuStateStream(a){this.ka.plug(a)}addContextMenuRequestStream(a){this.ja.plug(a)}getContextMenuStream(){return this.getStateStream().map((a)=>
a.contextMenuState).skipDuplicates()}getContextMenuRequestStream(){return this.getStateStream().map((a)=>a.contextMenuRequest).skipDuplicates()}Wa(a){if(null===this.state.contextMenuState&&null!==a||!this.state.contextMenuState.equals(a))this.state.contextMenuState=a,this.pushState()}Va(a){if(null===this.state.contextMenuRequest&&null!==a||this.state.contextMenuRequest.entityIds!==a.entityIds)this.state.contextMenuRequest=a,this.pushState()}oa(a){let b=this.state.componentFocusMode;switch(a){case e.ComponentFocusAction.exitAll:b=
e.ComponentFocusMode.none;break;case e.ComponentFocusAction.enterCanvas:b=e.ComponentFocusMode.canvas;break;case e.ComponentFocusAction.enterUi:b=e.ComponentFocusMode.ui;break;case e.ComponentFocusAction.enterUiInput:b=e.ComponentFocusMode.uiInput;break;case e.ComponentFocusAction.enterTextEditor:b=e.ComponentFocusMode.textEditor;break;case e.ComponentFocusAction.canvasInteracted:b=this.state.componentFocusMode===e.ComponentFocusMode.textEditor?e.ComponentFocusMode.textEditor:e.ComponentFocusMode.none}this.state.componentFocusMode!==
b&&(this.state.componentFocusMode=b,this.pushState())}getComponentFocusStream(){return this.getStateStream().map((a)=>a.componentFocusMode).skipDuplicates()}getSaveStateStream(){return this.getStateStream().map((a)=>a.saveState).skipDuplicates()}getIsUndoableStream(){return this.getStateStream().map((a)=>a.isUndoable).skipDuplicates()}getIsRedoableStream(){return this.getStateStream().map((a)=>a.isRedoable).skipDuplicates()}setOpenedPopupId_KILLME(a){this.state.openedPopupId_KILLME!==a&&(this.state.openedPopupId_KILLME=
a,this.pushState())}getOpenedPopupIdStream(){return this.getStateStream().map((a)=>a.openedPopupId_KILLME).skipDuplicates()}getDeferredOpenedPopupIdStream(){return this.getDeferredStateStream().map((a)=>a.state.openedPopupId_KILLME).skipDuplicates()}addOpenSidebarIdStream(a){this.La.plug(a)}setOpenSidebarId(a){"koi-sidebar-animations"!==a&&this.state.openedSidebarId!==a&&(this.state.openedSidebarId=a,this.pushState())}getOpenedSidebarIdStream(){return this.getStateStream().map((a)=>a.openedSidebarId).skipDuplicates()}addOpenedDialogPropsStream(a){this.Ka.plug(a)}addOpenTabMenuIdStream(a){this.Ma.plug(a)}setOpenTabMenuId(a){this.state.openTabMenuId!==
a&&(this.state.openTabMenuId=a,this.pushState())}setOpenedDialogProps(a){null==a&&(a={kind:m.DialogKind.None});m.dialogPropsEq(this.state.openDialogProps,a)||(this.state.openDialogProps=a,this.pushState())}getOpenTabMenuIdStream(){return this.getStateStream().map((a)=>a.openTabMenuId).skipDuplicates()}getOpenedDialogPropsStream(){return this.getStateStream().map((a)=>a.openDialogProps).skipDuplicates()}addFollowerStateStream(a){return this.ra.plug(a)}addPresenterStateStream(a){return this.Na.plug(a)}geFollowerStateStream(){return this.getStateStream().map((a)=>
a.followerState).skipDuplicates()}getPresenterStateStream(){return this.getStateStream().map((a)=>a.presenterState).skipDuplicates()}getIsFollowerStream(){return this.getStateStream().map((a)=>a.isFollower).skipDuplicates()}addIsFollowerStream(a){this.xa.plug(a)}getIsStorylineVisibleStream(){return this.getStateStream().map((a)=>a.isStorylineVisible).skipDuplicates()}setStorylineVisible(a){this.state.isStorylineVisible=a;this.pushState()}isStorylineVisible(){return this.state.isStorylineVisible}eb(a){this.state.isFollower=
a;this.pushState()}$a(a){this.state.followerState=a;this.pushState()}getUserHasEditRightsStream(){return this.getStateStream().map((a)=>a.userHasEditRights).skipDuplicates()}addUserHasEditRightsStream(a){this.Eb.plug(a)}vb(a){this.state.userHasEditRights=a;this.pushState()}getUserHasCommentRightsStream(){return this.getStateStream().map((a)=>a.userHasCommentRights).skipDuplicates()}getSaveAvailabilityStatusStream(){return this.getStateStream().map((a)=>a.saveAvailabilityStatus).skipDuplicates()}addSaveAvailabilityStatusStream(a){this.Qa.plug(a)}ob(a){this.state.saveAvailabilityStatus=
a;this.pushState()}getNetworkStatusStream(){return this.getStateStream().map((a)=>a.networkStatus).skipDuplicates()}getDeferredNetworkStatusStream(){return this.getDeferredStateStream().map((a)=>a.state.networkStatus).skipDuplicates()}getNavigationEventStream(){return this.getStateStream().map((a)=>a.navigationEvent).filter((a)=>null!=a).skipDuplicates()}addNavigationEventStream(a){this.Ia.plug(a)}jb(a){this.state.navigationEvent=a;this.pushState()}getDeferredNavigationEventStream(){return this.getDeferredStateStream().map((a)=>
a.state.navigationEvent).filter((a)=>null!=a).skipDuplicates()}addNetworkStatusStream(a){this.Ja.plug(a)}kb(a){this.state.networkStatus=a;this.pushState()}getCoeditStatusStream(){return this.getStateStream().map((a)=>a.coeditStatus).skipDuplicates()}addCoeditStatusStream(a){this.ha.plug(a)}Ua(a){this.state.coeditStatus=a;this.pushState()}addFeaturePreviewModeWithSaveDisabledStream(a){this.qa.plug(a)}getFeaturePreviewModeWithSaveDisabledStream(){return this.getStateStream().map((a)=>a.featurePreviewModeWithSaveDisabled).skipDuplicates()}addCoeditOfflineOnlineSwitchStream(a){this.ga.plug(a)}lb(a){this.state.coeditOfflineOnlineSwitchStatus=
a;this.pushState()}Za(a){this.state.featurePreviewModeWithSaveDisabled=a;this.pushState()}getIsOnboardingStream(){return this.getStateStream().map((a)=>a.isOnboarding).skipDuplicates()}addIsOnboardingStream(a){this.Aa.plug(a)}getIsFullscreenStream(){return this.getStateStream().map((a)=>a.isFullscreen).skipDuplicates()}addIsFullscreenStream(a){this.ya.plug(a)}getEditingSessionClosed(){return this.getStateStream().map((a)=>a.isEditingSessionClosed).skipDuplicates()}addEditingSessionClosedStream(a){this.wa.plug(a)}ab(a){this.state.isFullscreen=
a;this.pushState()}fb(a){this.state.isOnboarding=a;this.pushState()}Ya(a){this.state.isEditingSessionClosed=a;this.pushState()}cb(a){this.state.isBgUploadInProgress=a;this.pushState()}getIsBgUploadInProgressStream(){return this.getStateStream().map((a)=>a.isBgUploadInProgress).skipDuplicates()}addIsBgUploadInProgressStream(a){this.ta.plug(a)}mb(a){this.state.presenterState={status:void 0!==a.status?a.status:this.state.presenterState.status,connection:void 0!==a.connection?a.connection:this.state.presenterState.connection,
messageType:void 0!==a.messageType?a.messageType:this.state.presenterState.messageType,messageText:void 0!==a.messageText?a.messageText:this.state.presenterState.messageText,isEndPopupOpen:void 0!==a.isEndPopupOpen?a.isEndPopupOpen:this.state.presenterState.isEndPopupOpen,followerCount:void 0!==a.followerCount?a.followerCount:this.state.presenterState.followerCount};this.pushState()}addCommentingStateChangeStream(a){a.onValue(()=>{this.state.commentingStateVersion++;this.pushState()})}da(a){!this.state.userHasEditRights&&
a.newMode===f.EditorMode.edit||this.state.mode.kind===f.EditorMode.view||this.za(this.state.mode,a)||(a.newMode!==f.EditorMode.edit&&(this.state.coverEditMode=null,this.state.selectionInfo=r.emptySelectionInfo()),this.state.mode=a.newMode===f.EditorMode.playback?{kind:f.EditorMode.playback,showTopmenu:a.showTopmenu,linkClickedFlow:a.linkClickedFlow,presenterNotesFlow:a.presenterNotesFlow}:{kind:a.newMode},this.Ea(a),this.pushState())}za(a,b){return a.kind===f.EditorMode.playback&&b.newMode===f.EditorMode.playback?
a.showTopmenu===b.showTopmenu&&a.linkClickedFlow===b.linkClickedFlow&&a.presenterNotesFlow===b.presenterNotesFlow:a.kind===b.newMode}Xa(a){if(this.state.currentTopic!==a.newCurrentTopic||this.state.currentTopicNavigationType!==a.navigationType)this.state.currentTopic=a.newCurrentTopic,this.state.currentTopicNavigationType=a.navigationType,this.pushState()}M(a,b){return a.kind===g.MaskingModeKind.off&&b.kind===g.MaskingModeKind.off?!0:a.kind===g.MaskingModeKind.on&&b.kind===g.MaskingModeKind.on?a.maskedImageId===
b.maskedImageId&&a.target===b.target&&a.isFixedAspect===b.isFixedAspect:!1}ua(a,b){if(null==a&&null==b)return!0;if(null!=b&&null==a||null==b&&null!=a)return!1;switch(a.kind){case g.CoverEditModeKind.titleEditOnly:case g.CoverEditModeKind.insideAdvanced:case g.CoverEditModeKind.advanced:return a.kind===b.kind?b.topicId===a.topicId:!1;default:return k.Utils.assertNever(a)}}ca(a){this.ua(a,this.state.coverEditMode)||(this.state.coverEditMode=a);this.pushState()}setMaskingMode(a){this.M(this.state.maskEditingMode,
a)||(this.state.maskEditingMode=a);this.pushState()}setSaveState(a){this.state.saveState!==a&&(this.state.saveState=a,this.pushState())}hb(a){this.state.isUndoable!==a&&(this.state.isUndoable=a,this.pushState())}gb(a){this.state.isRedoable!==a&&(this.state.isRedoable=a,this.pushState())}removeCanvasHoveredEntityIds(a){if(null!=this.state.canvasHoveredEntityIds){const b=this.state.canvasHoveredEntityIds.filter((b)=>-1===a.indexOf(b));this.setCanvasHoveredEntityIds(b)}}Ea(a){let b="";switch(a.newMode){case f.EditorMode.playback:b=
"present_mode";break;case f.EditorMode.edit:b="edit_mode";break;case f.EditorMode.view:b="view_mode";break;case f.EditorMode.info:b="info";break;case f.EditorMode.templateChooser:b="template_chooser_mode";break;case f.EditorMode.follow:b="follow_mode";break;case f.EditorMode.animationPreview:b="animation_preview_mode"}this.logger.info({action:"enter",object:b,trigger:a.trigger})}K(a){if(1<a.length){const b=null!=this.state.coverEditMode?this.state.coverEditMode.topicId:this.state.currentTopic;return a.filter((a)=>
a!==b)}return a}Da(a){if(null==this.state.coverEditMode)return!1;switch(this.state.coverEditMode.kind){case g.CoverEditModeKind.advanced:case g.CoverEditModeKind.insideAdvanced:return 1===a.length&&this.state.coverEditMode.topicId===a[0];case g.CoverEditModeKind.titleEditOnly:return!1;default:return k.Utils.assertNever(this.state.coverEditMode)}}setSelection(a,b=null){var c=!1;this.o(a.allEntityIds,this.state.selectionInfo.allEntityIds)&&this.o(a.groupIds,this.state.selectionInfo.groupIds)&&this.o(a.nonGroupedEntityIds,
this.state.selectionInfo.nonGroupedEntityIds)||(this.state.selectionInfo={groupIds:a.groupIds,nonGroupedEntityIds:this.K(a.nonGroupedEntityIds),allEntityIds:this.K(a.allEntityIds)},this.setCanvasHoveredEntityIds([]),c=this.Da(a.allEntityIds),!this.state.isTopicZoomAreaEditEnabled&&c&&n.avro.Avro.createDefaultLogger().logEditTopicZoomArea({object_id:a.allEntityIds[0]}),this.state.isTopicZoomAreaEditEnabled=c,this.state.maskEditingMode={kind:g.MaskingModeKind.off},c=!0);b!==this.state.selectionSource&&
(this.state.selectionSource=b,c=!0);c&&this.pushState()}getSelection(){return this.state.selectionInfo}getSelectionSource(){return this.state.selectionSource}o(a,b){if(a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}setCanvasHoveredEntityIds(a){k.Utils.arrayEquals(this.state.canvasHoveredEntityIds,a)||(this.state.canvasHoveredEntityIds=a,this.pushState())}setUiHoveredEntityIds(a){k.Utils.arrayEquals(this.state.uiHoveredEntityIds,a)||(this.state.uiHoveredEntityIds=
a,this.pushState())}setDraggedEntityHoveredTopicId(a){a!==this.state.draggedEntityHoveredTopicId&&(this.state.draggedEntityHoveredTopicId=a,this.pushState())}setCanvasEditedEntities(a){k.Utils.arrayEquals(this.state.canvasEditedEntityIds,a)||(this.state.canvasEditedEntityIds=a,this.pushState())}setTopicZoomAreaEditEnabled(a){this.state.isTopicZoomAreaEditEnabled!==a&&(this.state.isTopicZoomAreaEditEnabled=a,this.pushState())}getIsTopicZoomAreaEditEnabledStream(){return this.getStateStream().map((a)=>
a.isTopicZoomAreaEditEnabled).skipDuplicates()}getPresenterState(){return this.state.presenterState}getStateStream(){return this.zb}getDeferredStateStream(){return this.na}getModeStream(){return this.getStateStream().map((a)=>a.mode).skipDuplicates()}getDeferredModeStream(){return this.getDeferredStateStream().map((a)=>a.state.mode).skipDuplicates()}getCurrentTopicStream(){return this.getStateStream().map((a)=>a.currentTopic).skipDuplicates()}getDeferredCurrentTopicStream(){return this.getDeferredStateStream().map((a)=>
a.state.currentTopic).skipDuplicates()}getCurrentTopicNavigationStream(){return this.getStateStream().map((a)=>({newCurrentTopic:a.currentTopic,navigationType:a.currentTopicNavigationType})).skipDuplicates((a,b)=>a.navigationType===b.navigationType&&a.newCurrentTopic===b.newCurrentTopic)}getCoverEditModeStream(){return this.getStateStream().map((a)=>a.coverEditMode).skipDuplicates()}getMaskEditingModeStream(){return this.getStateStream().map((a)=>a.maskEditingMode).skipDuplicates((a,b)=>this.M(a,
b))}getSelectionStream(){return this.getStateStream().map((a)=>a.selectionInfo).skipDuplicates()}getDeferredSelectionStream(){return this.getDeferredStateStream().map((a)=>a.state.selectionInfo).skipDuplicates()}getDeferredContextMenuRequestStream(){return this.getDeferredStateStream().map((a)=>a.state.contextMenuRequest).skipDuplicates()}getSelectionSourceStream(){return this.getStateStream().map((a)=>a.selectionSource).skipDuplicates()}getCanvasHoverStream(){return this.getStateStream().map((a)=>
a.canvasHoveredEntityIds).skipDuplicates()}getUiHoverStream(){return this.getStateStream().map((a)=>a.uiHoveredEntityIds).skipDuplicates()}getDraggedEntityHoveredTopicIdStream(){return this.getStateStream().map((a)=>a.draggedEntityHoveredTopicId).skipDuplicates()}getCanvasEditedEntityIdsStream(){return this.getStateStream().map((a)=>a.canvasEditedEntityIds).skipDuplicates()}getBoolModeStream(a){return this.getModeStream().map((b)=>b.kind===a)}pb(a){this.state.shownOnboardingStep!==a&&(this.state.shownOnboardingStep=
a,this.pushState())}getShownOnboardingStepStream(){return this.getStateStream().map((a)=>a.shownOnboardingStep).skipDuplicates()}addShownOnboardingStepStream(a){this.xb.plug(a)}sb(a){let b=!1;for(let c of this.state.supportWidgetState.steps)c.userSettingKey===a.key&&(c.isDone=c.isDone||a.value,b=!0);b&&this.pushState()}addSupportWidgetStepStream(a){this.Bb.plug(a)}rb(a){this.state.supportWidgetState={isActive:void 0!==a.isActive?a.isActive:this.state.supportWidgetState.isActive,activeView:void 0!==
a.activeView?a.activeView:this.state.supportWidgetState.activeView,steps:void 0!==a.steps?a.steps:this.state.supportWidgetState.steps,topics:void 0!==a.topics?a.topics:this.state.supportWidgetState.topics,searchProps:void 0!==a.searchProps?a.searchProps:this.state.supportWidgetState.searchProps,isVisible:void 0!==a.isVisible?a.isVisible:this.state.supportWidgetState.isVisible};this.pushState()}getSupportWidgetStateStream(){return this.getStateStream().map((a)=>a.supportWidgetState).skipDuplicates()}getSupportWidgetState(){return this.state.supportWidgetState}addSupportWidgetStateStream(a){this.Ab.plug(a)}Sa(a){this.state.audioState=
a;this.pushState()}getAudioStateStream(){return this.getStateStream().map((a)=>a.audioState).skipDuplicates()}addAudioStateStream(a){this.ba.plug(a)}ib(a){this.state.navbarFullyVisible=a;this.pushState()}bb(a){var b,c;null===(c=(b=window).Gb)||void 0===c?void 0:c.call(b,a);this.state.globalException=a;this.pushState()}qb(a){this.state.spellcheckStatus=a;this.pushState()}wb(a){this.state.userLicenseInformation=a;this.pushState()}setLogo(a){this.state.logo=a;this.pushState()}Ta(a){this.state.codeSnippetEditorOpen=
a;this.pushState()}tb(a){if(this.state.templateData.templateId!==a.templateId||this.state.templateData.themeId!==a.themeId)this.state.templateData=a,this.pushState()}getNavbarFullyVisibleStream(){return this.getStateStream().map((a)=>a.navbarFullyVisible).skipDuplicates()}getSpellcheckStatusStream(){return this.getStateStream().map((a)=>a.spellcheckStatus).skipDuplicates()}addNavbarFullyVisibleStream(a){this.Ha.plug(a)}addGlobalExceptionStream(a){this.sa.plug(a)}addSpellcheckStatusStream(a){this.yb.plug(a)}addCodeSnippetEditorOpenStream(a){this.fa.plug(a)}getCodeSnippetEditorOpenStream(){return this.getStateStream().map((a)=>
a.codeSnippetEditorOpen).skipDuplicates()}getTemplateDataStream(){return this.getDeferredStateStream().map((a)=>a.state.templateData).skipDuplicates((a,b)=>a.templateId===b.templateId&&a.themeId===b.themeId)}addTemplateDataStream(a){this.Cb.plug(a)}getUserLicenseInformationStream(){return this.getStateStream().map((a)=>a.userLicenseInformation).skipDuplicates()}getUserLicenseInformation(){return this.state.userLicenseInformation}addUserLicenseInformationStream(a){this.Fb.plug(a)}getDeferredUserLicenseInformationStream(){return this.getDeferredStateStream().map((a)=>
a.state.userLicenseInformation).skipDuplicates()}getLogoStream(){return this.getStateStream().map((a)=>a.logo).skipDuplicates()}addLogoStream(a){this.Fa.plug(a)}pushState(){this.$.push(this.state);this.J()}J(){this.j||(this.j=!0,this.va()&&this.m()||window.setTimeout(()=>{this.u()},0))}va(){return null!=this.m}initDeferredStream(a,b){null!=a&&null!=b&&(this.m=a,this.Pa=b,this.Pa.onValue(()=>{window.setTimeout(()=>{this.u()},0)}))}u(){if(this.j){this.j=!1;const a={};if(!this.v){this.v=!0;try{for(let b=
0;b<this.i.length;b++)try{this.i[b](a)}catch(q){n.LoggerModule.logException(this.logger,"lambda","pushDeferred",q)}}finally{this.i=[],this.v=!1}}this.w.push({state:this.state,rogueUIProps_killme:a})}}syncUpdateWithState(a){this.i.push(a);this.J()}addSaveTypeStream(a){this.U.plug(a)}getSaveTypeStream(){return this.U}};d={};Object.defineProperty(d,"__esModule",{value:!0});(function(a){a.createEditorStore=function(a,c,d,e){return new p.aa(a,c,d,e)}})(d.EditorStoreModule||(d.EditorStoreModule={}));return d});

})() || {};
moduleImpl["module"]=moduleImpl;
return moduleImpl;};if(typeof define==="function"&&define.amd){define("prezi_editor_store_common",["require","prezi.geometry","prezi.text.model","prezi_app_utils","prezi_bacon","prezi_cet","prezi_editor_store_audio","prezi_editor_store_contextmenu","prezi_editor_store_document","prezi_editor_store_focus","prezi_editor_store_meeting","prezi_editor_store_mode","prezi_editor_store_object","prezi_editor_store_save","prezi_editor_store_support","prezi_editor_store_text","prezi_editor_store_ui","prezi_externalserviceprovider","prezi_featureswitcher","prezi_logger","prezi_nativeapitypes","prezi_utils"],function(){var moduleUrl=arguments[0]["toUrl"]("prezi_editor_store_common.js");baseUrl=moduleUrl.substr(0,moduleUrl.lastIndexOf("/"));return(__factory).apply({},[].slice.call(arguments,1));});}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){baseUrl=__dirname;module.exports=(__factory)(require("prezi.geometry"),require("prezi.text.model"),require("prezi_app_utils"),require("prezi_bacon"),require("prezi_cet"),require("prezi_editor_store_audio"),require("prezi_editor_store_contextmenu"),require("prezi_editor_store_document"),require("prezi_editor_store_focus"),require("prezi_editor_store_meeting"),require("prezi_editor_store_mode"),require("prezi_editor_store_object"),require("prezi_editor_store_save"),require("prezi_editor_store_support"),require("prezi_editor_store_text"),require("prezi_editor_store_ui"),require("prezi_externalserviceprovider"),require("prezi_featureswitcher"),require("prezi_logger"),require("prezi_nativeapitypes"),require("prezi_utils"));}else{this["prezi_editor_store_common"]=__factory(this["prezi.geometry"],this["prezi.text.model"],this["prezi_app_utils"],this["prezi_bacon"],this["prezi_cet"],this["prezi_editor_store_audio"],this["prezi_editor_store_contextmenu"],this["prezi_editor_store_document"],this["prezi_editor_store_focus"],this["prezi_editor_store_meeting"],this["prezi_editor_store_mode"],this["prezi_editor_store_object"],this["prezi_editor_store_save"],this["prezi_editor_store_support"],this["prezi_editor_store_text"],this["prezi_editor_store_ui"],this["prezi_externalserviceprovider"],this["prezi_featureswitcher"],this["prezi_logger"],this["prezi_nativeapitypes"],this["prezi_utils"]);}}).call(this);
;(function(){var baseUrl;var __factory=function(){var module=(function(dependencies){return function(init){return init.call({},(function(){return{getSpaghettiVersion:function(){return "13.0-25-g6015dbc";},getModuleName:function(){return "prezi_turn_into_topic";},getModuleVersion:function(){return "release-2021w06-base-26-gaeb382e";},getResourceUrl:function(resource){if(resource.substr(0,1)!="/"){resource="/"+resource;}return baseUrl+resource;},"dependencies":{"prezi.geometry":dependencies[0],"prezi_cet_model_editor":dependencies[1],"prezi_i18n":dependencies[2],"prezi_plugin_api":dependencies[3]}};})());};})(arguments);var moduleImpl=(function(){return module(function(b){var g=b.dependencies.prezi_i18n,n=b.dependencies.prezi_cet_model_editor,p=b.dependencies["prezi.geometry"],h=b.dependencies.prezi_plugin_api,e={};Object.defineProperty(e,"__esModule",{value:!0});var c=n.base.ObjectKind;e.u=class{constructor(){this.v=[c.planetTopic,c.overview];this.$=[c.cover,c.visual,c.master,c.surface]}init(a){this.f=a.declareUI({i:!1,j:null,selectedIds:[]},(k,a)=>{k.i&&this.w(k,a)});a.onCurrentTopicChange((a)=>{this.f.setState({j:a})});a.onSelectionChange((a)=>
{this.f.setState({selectedIds:a.allObjects.map((a)=>a.id)});if(1>=a.allObjects.length)this.f.setState({i:!1});else{var b=this.session.document.read((b)=>{const c=a.allObjects.map((a)=>b.lookup.resolve(a)),d=c[0].parent;return-1!==this.v.indexOf(d.kind)&&c.every((a)=>a.parent===d&&-1===this.$.indexOf(a.kind))});this.f.setState({i:b})}})}w(a,b){b.createPropertyBarItem((b)=>b.button({title:g.I18n.ts("Turn into topic"),id:"multiselect-turn-into-topic",weight:99,parent:h.PropertyBarId.Right,tooltip:g.I18n.ts("Create a new topic from the selected items on your canvas"),
onClick:(b)=>this.o(b,a.j,a.selectedIds)}));b.createMenuItem({kind:h.MenuItemKind.context,id:"turn-into-topic",title:g.I18n.ts("Turn into topic"),weight:67,onClick:(b)=>this.o(b,a.j,a.selectedIds),enabled:!0})}o(a,b,g){const e=this.session.document.executeApiCommand(a,{name:"turn selected objects into topic",run:(e)=>{var d=e.lookup.topicParent(b);const h=d.zoomLayoutBox,f=d.add.planet();f.contentChildren.forEach((a)=>a.delete());const k=f.simpleChildren(n.base.ChildVisibilityKind.inside).reduce((a,
b)=>b.isAbove(a)?b:a);d=g.map((a)=>e.lookup.transformedObject(a)).sort((a,b)=>a.isAbove(b)?-1:1);var l=d.map((a)=>a.position).reduce((a,b)=>a.add(p.Geometry.fromPoint(b)),p.Geometry.fromCoordinates(0,0)).mul(1/d.length).toPoint();f.position=l;l=(a)=>{if(0!==a.length){a=a[0].createLayoutGroupWith(a.slice(1));var b=a.layoutBox.align(h.topLeft,h.topRight,f.zoomLayoutBox.topLeft,f.zoomLayoutBox.topRight);a.tryToSetParent(f);a.fitInto(b)}};var m=d.filter((a)=>a.is(c.topic));l(m);m=d.filter((a)=>!a.is(c.topic));
l(m);d.forEach((a)=>{a.moveAbove(k)});this.session.selection.setSelection(a,[f]);return f.ref}});this.session.document.executeApiCommand(a,{name:"turn selected objects into topic",run:(a)=>{const b=a.lookup.resolve(e);a.animate(b).bounce()}})}};b={};Object.defineProperty(b,"__esModule",{value:!0});b.lazyModule={createPlugin(){return new e.u}};return b});

})() || {};
moduleImpl["module"]=moduleImpl;
return moduleImpl;};if(typeof define==="function"&&define.amd){define("prezi_turn_into_topic",["require","prezi.geometry","prezi_cet_model_editor","prezi_i18n","prezi_plugin_api"],function(){var moduleUrl=arguments[0]["toUrl"]("prezi_turn_into_topic.js");baseUrl=moduleUrl.substr(0,moduleUrl.lastIndexOf("/"));return(__factory).apply({},[].slice.call(arguments,1));});}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){baseUrl=__dirname;module.exports=(__factory)(require("prezi.geometry"),require("prezi_cet_model_editor"),require("prezi_i18n"),require("prezi_plugin_api"));}else{this["prezi_turn_into_topic"]=__factory(this["prezi.geometry"],this["prezi_cet_model_editor"],this["prezi_i18n"],this["prezi_plugin_api"]);}}).call(this);
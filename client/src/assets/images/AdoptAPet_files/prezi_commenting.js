;(function(){var baseUrl;var __factory=function(){var React=arguments[0];var ReactDOM=arguments[1];var ReactTransitionGroup=arguments[2];var module=(function(dependencies){return function(init){return init.call({},(function(){return{getSpaghettiVersion:function(){return "13.0-25-g6015dbc";},getModuleName:function(){return "prezi_commenting";},getModuleVersion:function(){return "release-2021w06-base-26-gaeb382e";},getResourceUrl:function(resource){if(resource.substr(0,1)!="/"){resource="/"+resource;}return baseUrl+resource;},"dependencies":{"prezi.geometry":dependencies[3],"prezi_app_utils":dependencies[4],"prezi_bacon":dependencies[5],"prezi_cet":dependencies[6],"prezi_cet_model":dependencies[7],"prezi_cet_model_editor":dependencies[8],"prezi_editor_store_focus":dependencies[9],"prezi_editor_store_mode":dependencies[10],"prezi_editor_store_object":dependencies[11],"prezi_editor_store_ui":dependencies[12],"prezi_featureswitcher":dependencies[13],"prezi_i18n":dependencies[14],"prezi_koi_widgets":dependencies[15],"prezi_logger":dependencies[16],"prezi_playback":dependencies[17],"prezi_utils":dependencies[18],"prezi_vaguetime":dependencies[19]}};})(),React,ReactDOM,ReactTransitionGroup);};})(arguments);var moduleImpl=(function(){return module(function(q,e,E){function ca(a){switch(a){default:case d.TargetObjectType.UNKNOWN:return g.I18n.ts("Commented on something.");case d.TargetObjectType.OBJECT:return g.I18n.ts("Commented on an object.");case d.TargetObjectType.LINE:return g.I18n.ts("Commented on a line.");case d.TargetObjectType.ARROW:return g.I18n.ts("Commented on an arrow.");case d.TargetObjectType.TOPIC:return g.I18n.ts("Commented on a topic.");case d.TargetObjectType.SUBTOPIC:return g.I18n.ts("Commented on a subtopic.");case d.TargetObjectType.PAGE:return g.I18n.ts("Commented on a page.");
case d.TargetObjectType.OVERVIEW:return g.I18n.ts("Commented on the overview.");case d.TargetObjectType.IMAGE:return g.I18n.ts("Commented on an image.");case d.TargetObjectType.PDF:return g.I18n.ts("Commented on a PDF.");case d.TargetObjectType.VIDEO:return g.I18n.ts("Commented on a video.");case d.TargetObjectType.TEXT:return g.I18n.ts("Commented on a text.");case d.TargetObjectType.FADE_IN:return g.I18n.ts("Commented on a fade-in.");case d.TargetObjectType.FADE_OUT:return g.I18n.ts("Commented on a fade-out.");
case d.TargetObjectType.ZOOM_TO:return g.I18n.ts("Commented on a zoom-to.");case d.TargetObjectType.CHART:return g.I18n.ts("Commented on a chart.")}}function da(a){switch(a){default:case d.TargetObjectType.UNKNOWN:case d.TargetObjectType.OBJECT:return g.I18n.ts("Leave a comment on this object");case d.TargetObjectType.LINE:return g.I18n.ts("Leave a comment on this line");case d.TargetObjectType.ARROW:return g.I18n.ts("Leave a comment on this arrow");case d.TargetObjectType.TOPIC:return g.I18n.ts("Leave a comment on this topic");
case d.TargetObjectType.SUBTOPIC:return g.I18n.ts("Leave a comment on this subtopic");case d.TargetObjectType.PAGE:return g.I18n.ts("Leave a comment on this page");case d.TargetObjectType.OVERVIEW:return g.I18n.ts("Leave a comment on this overview");case d.TargetObjectType.IMAGE:return g.I18n.ts("Leave a comment on this image");case d.TargetObjectType.PDF:return g.I18n.ts("Leave a comment on this PDF");case d.TargetObjectType.VIDEO:return g.I18n.ts("Leave a comment on this video");case d.TargetObjectType.TEXT:return g.I18n.ts("Leave a comment on this text");
case d.TargetObjectType.FADE_IN:return g.I18n.ts("Leave a comment on this fade-in");case d.TargetObjectType.FADE_OUT:return g.I18n.ts("Leave a comment on this fade-out");case d.TargetObjectType.ZOOM_TO:return g.I18n.ts("Leave a comment on this zoom-to");case d.TargetObjectType.CHART:return g.I18n.ts("Leave a comment on this chart")}}var J=null,ea=q.dependencies.prezi_editor_store_ui,ba=q.dependencies.prezi_featureswitcher;J=q.dependencies.prezi_i18n;var h=q.dependencies.prezi_koi_widgets,K=q.dependencies.prezi_vaguetime,
L=q.dependencies.prezi_utils,F=q.dependencies.prezi_app_utils,n=q.dependencies.prezi_bacon,r=q.dependencies.prezi_cet,p=q.dependencies.prezi_cet_model,z=q.dependencies.prezi_cet_model_editor,Q=q.dependencies.prezi_editor_store_focus,fa=q.dependencies.prezi_editor_store_object,v=q.dependencies.prezi_logger,M=q.dependencies["prezi.geometry"],R={};Object.defineProperty(R,"__esModule",{value:!0});R.vd=class{constructor(a,b,c){this.aa=a;this.Ma=b;this.id=c;this.oc=this.Bb=!1;this.Pb=k.$b+c;this.ld=this.md=
0;this.hidden=!1;this.ye()}Fc(a,b){return null!=b&&this.Qa(b)&&this.Fb(a,this.aa.getPrevSelectedEntityId(),this.aa.getSelectedEntityId())}isClosing(a,b){return null!=b&&this.aa.getPrevSelectedEntityId()===b.getId()&&this.Fb(a,this.aa.getSelectedEntityId(),this.aa.getPrevSelectedEntityId())}refresh(a,b){const c=a.getRenderedScene();b=c.getEntityById(b.getId());var f=$(this.da),d=this.Qa(b);if(this.isVisible(c,b)){this.Hf(this.oc&&!d);var m=r.Cet.createHierarchyQuery(c);m=c.getEntityById(m.getParentId(b));
var e=null,g=null;if(this.Fc(c,b)||this.isClosing(c,b)){const f=this.Ie(c,b);null!=f?(d=this.Na(c,f),this.Bb?(g=this.yb(a.getCamera()),e=1-this.uc(c,f),a=1):a=this.uc(c,f)):(d=d?this.yb(a.getCamera()):this.Na(c,b),a=r.Cet.commentVisibility(b).getAlpha())}else this.Fc(c,m)||this.isClosing(c,m)?(d=this.Na(c,m),g=this.Na(c,b),e=r.Cet.commentVisibility(b).getAlpha(),a=0===e?0:1):(d=d?this.yb(a.getCamera()):this.Na(c,b),a=r.Cet.commentVisibility(b).getAlpha());f.css({display:"block",opacity:a});a=null==
d?g:null==g?d:null==e?g:M.Geometry.interpolatePoint(d,g,(Math.sin((e-.5)*Math.PI)+1)/2);m&&m.isDef(p.CetModel.ID.Z_TOPIC_CONTAINER)&&(b=r.Cet.world(m).getWorldBoundingShape().getObb(),m=b.topRightVertex(),b=b.bottomLeftVertex(),a.x>m.x?a.x=m.x:a.x<b.x&&(a.x=b.x),a.y<m.y?a.y=m.y:a.y>b.y&&(a.y=b.y));null!=a?(f=M.Geometry.createTranslation(a.x,a.y),this.Ma.positionElementToCenter(this.Pb,36,36),this.Ma.transformWithoutScaleAndRotation(this.Pb,f)):f.css({display:"none"})}else f.css({display:"none"})}yb(a){return a.screenPointToWorld({x:a.getStageArea().getRight()-
(this.ld+24+18),y:a.getStageArea().getTop()+(this.md+24+18)})}Ie(a,b){for(;;){if(null!=this.vc(a,b))return b;b=r.Cet.createHierarchyQuery(a).getParentId(b);if(null==b)return null;b=a.getEntityById(b)}}vc(a,b){let c=null;b=r.Cet.createTopicChildrenQuery(a).getChildrenIds(b.getId(),r.TopicChildBehavior.Cover);null!=b&&0<b.length&&(c=a.getEntityById(b[0]));return c}uc(a,b){a=this.vc(a,b);return null==a?null:r.Cet.commentVisibility(a).getAlpha()}Na(a,b){if(null==b)return null;var c=z.CetModelEditor.createBoundsCalculator(a).getWorldBoundsForLayout(b.getId(),
z.TextBoundsOptions.TextBox).getObb();a=30/this.Ma.getCameraScale();b.isDef(p.CetModel.ID.Z_TEXT)&&(b=10/this.Ma.getCameraScale(),c=c.inflate(b));b=M.Geometry.fromPoint(c.getVertices()[0]);c=M.Geometry.fromPoint(c.getVertices()[1]);return c.add(b.sub(c).setLength(a)).toPoint()}kd(a,b){this.md=a;this.ld=b}ye(){this.da=this.Ma.createElement(this.Pb);if(0===this.da.children.length){const a=document.createElement("div");this.da.appendChild(a);this.da.className=k.Ja;this.da.setAttribute(k.Wa,this.id);
this.da.setAttribute("data-lookup",`${d.Lookup.THREAD_ICON}:${this.id}`);a.setAttribute(k.Wa,this.id);this.da.style.display="block"}}Hf(a){$(this.da).toggleClass("show-dots",a)}Qa(a){return this.aa.getSelectedEntityId()===a.getId()}Fb(a,b,c){return 0<=r.Cet.createHierarchyQuery(a).getAncestorEntities(c).indexOf(b)}jf(a,b){return this.Fb(a,this.aa.getSelectedEntityId(),b)}isVisible(a,b){if(this.hidden)return!1;var c=r.Cet.commentVisibility(b);if(null==c||!c.isVisible()||0===c.getAlpha())return!1;c=
this.Qa(b);return!c&&!this.jf(a,b.getId())||c&&!this.Bb?!1:!0}dispose(){null!=this.da&&(null!=this.da.parentElement&&this.da.parentElement.removeChild(this.da),this.da=null)}Jf(a){this.hidden=a}If(a){this.Bb=a}Gf(a){this.oc=a}};var y={};Object.defineProperty(y,"__esModule",{value:!0});var G;(function(a){a[a.Sb=0]="AVATAR";a[a.NAME=1]="NAME";a[a.Gd=2]="SIDEBAR_PUCUKA";a[a.Ub=3]="COMMENT_TEXT";a[a.Wb=4]="DATE"})(G=y.Ia||(y.Ia={}));class t{tf(a){this.logInfo(a,"open","comment_menu","click",{})}wf(a,
b){this.logInfo(a,"display","comment_paywall_popup","click",{source:this.Ne(b)})}Ne(a){let b="unknown";switch(a){case d.OpenCommentMenuSource.INSERT_MENU:b="insert_menu";break;case d.OpenCommentMenuSource.TOPMENU:b="topmenu"}return b}xf(a){this.logInfo(a,"display","comment_paywall_package_details","click",{})}Zf(a,b){this.logInfo(a,b?"show_comments":"hide_comments","view_menu","click",{})}zoomIn(a){v.avro.Avro.createDefaultLogger().logNavigatePrezi({navigation_type:"ZOOM",action_index:a.actionIndex,
step_index:a.stepIndex,total_step_number:a.totalStepNumber})}vf(a,b,c){let f;switch(b){case d.OpenCommentThreadTrigger.INSERT_MENU:f="insert_menu";break;case d.OpenCommentThreadTrigger.PUCUKA:f="pucuka";break;case d.OpenCommentThreadTrigger.PROPERTY_BAR:f="property_bar";break;case d.OpenCommentThreadTrigger.CONTEXT_MENU:f="context_menu";break;case d.OpenCommentThreadTrigger.DEEP_LINK:f="deep_link";break;case d.OpenCommentThreadTrigger.COMMENT_MENU:f="comment_menu"}this.logInfo(a,"open","thread",f,
t.ga(c));v.avro.Avro.createDefaultLogger().logOpenCommentThread({comment_thread_id:c.threadId})}de(a){v.avro.Avro.createDefaultLogger().logCreateCommentThread({comment_thread_id:a.threadId})}addComment(a,b,c,f,l){let m;switch(b){case d.AddCommentTrigger.ENTER:m="enter";break;case d.AddCommentTrigger.CLICK:m="click"}b=t.ga(f);$.extend(b,{nr_mentions:null==l?0:l.length,length:c});this.logInfo(a,"add","comment",m,b);this.Mc("add",l,b,a);v.avro.Avro.createDefaultLogger().logAddedComment({comment_thread_id:f.threadId,
mentioned_collaborator:l&&0<l.length?"YES":"NO",target_user_id_list:l?l.map((a)=>a.getUserOid()).join():""})}Mc(a,b,c,f){null!=b&&b.forEach((b)=>{const d={target_useroid:b.getUserOid()};"nr_comments object_type status thread_id thread_uuid comment_uuid".split(" ").forEach((a)=>{d[a]=c[a]});this.logInfo(f,a,"mention","machine",d)})}Sd(a,b,c,f){f=t.ga(f);$.extend(f,{length:c});this.logInfo(a,b?"add_success":"add_error","comment","machine",f)}Xd(a,b){this.logInfo(a,"close","thread","click_outside",t.ga(b),
1)}resolveThread(a,b){this.logInfo(a,"resolve","thread","click",t.ga(b));v.avro.Avro.createDefaultLogger().logEndCommentThread({comment_thread_id:b.threadId})}Cf(a,b,c){this.logInfo(a,c?"resolve_success":"resolve_error","thread","machine",t.ga(b))}Wd(a,b,c){let f;switch(b){case G.Sb:f="avatar";break;case G.Ub:f="comment_text";break;case G.NAME:f="username";break;case G.Gd:f="sidebar_pucuka";break;case G.Wb:f="date"}this.logInfo(a,"nothing",f,"click",t.ga(c))}editComment(a,b,c,f,l){let m;switch(b){case d.EditCommentTrigger.ENTER:m=
"enter";break;case d.EditCommentTrigger.CLICK:m="click"}b=t.Za(f);$.extend(b,{nr_mentions:null==l?0:l.length,length:c});this.logInfo(a,"edit","comment",m,b);this.Mc("edit",l,b,a)}Ee(a,b,c,f){const d=t.Za(f);$.extend(d,{length:c});this.logInfo(a,b?"edit_success":"edit_error","comment","machine",d);b&&v.avro.Avro.createDefaultLogger().logChangedComment({comment_thread_id:f.threadId})}deleteComment(a,b,c){this.logInfo(a,"delete","comment",b,t.Za(c))}De(a,b,c){this.logInfo(a,b?"delete_success":"delete_error",
"comment","machine",t.Za(c));b&&v.avro.Avro.createDefaultLogger().logRemovedComment({comment_thread_id:c.threadId})}static ga(a){var b=F.AppUtilsModule.getLogHelperUtils().getEntityLogName(a.entity);b={nr_comments:a.numComments,object_type:b,status:a.isResolved?"resolved":"not_resolved",thread_id:a.threadId,thread_uuid:a.threadUuid,draft:a.hasDraft?"yes":"no"};null!=a.errorMessage&&(b.msg=a.errorMessage);return b}static Za(a){const b={thread_id:a.threadId,thread_uuid:a.threadUuid,nr_comments:a.numComments,
comment_uuid:a.commentUuid,status:a.isResolved?"resolved":"not_resolved"};null!=a.errorMessage&&(b.msg=a.errorMessage);return b}mentionPopupDisplays(a,b,c){b=t.ga(b);let f;switch(c){case d.ShowMentionPopupTrigger.AT_SIGN:f="at_sign";break;case d.ShowMentionPopupTrigger.EDIT:f="edit_mention"}this.logInfo(a,"display","autocomplete_popup",f,b)}mentionPopupAddedUser(a,b,c){b=t.ga(b);let f;switch(c){case d.AddMentionTrigger.CLICK:f="click";break;case d.AddMentionTrigger.ENTER:f="enter"}this.logInfo(a,
"add","mention_draft",f,b)}mentionPopupClosedByKeyboard(a,b,c){b=t.ga(b);b.keycode=c;this.logInfo(a,"close","autocomplete_popup","keyboard",b)}mentionPopupClosedByClick(a,b){b=t.ga(b);this.logInfo(a,"close","autocomplete_popup","click_outside",b)}lb(a,b,c){this.logError(a,b,"commenting_backend","machine",{error_message:c.substring(0,100)})}logInfo(a,b,c,f,d,m=null){a.info(this.nc(b,c,f,d,m))}logError(a,b,c,f,d){a.error(this.nc(b,c,f,d))}nc(a,b,c,f,d=null){a={action:a,object:b,trigger:c,feature:"commenting",
payload:f};null!=d&&(a.version=d);return a}Vd(a){this.logInfo(a,"learn_more","comment_paywall_popup","click",{})}}y.Xb=t;var A={};Object.defineProperty(A,"__esModule",{value:!0});A.ta=class{constructor(a,b){this.key=a;this.qd=b}static Le(a){return`[@${a.name}]`}static He(a){return new A.ta(a.key,a.user_oid)}static rc(a){return new A.ta(this.Le(a),a.oid)}static Rc(a){return null==a?null:a.map((a)=>a.toData())}getUserOid(){return this.qd}getKey(){return this.key}getKeyText(){return this.key.replace(/^\[@*/,
"").replace(/]$/,"")}toData(){return{key:this.key,user_oid:this.qd}}};var D={};Object.defineProperty(D,"__esModule",{value:!0});D.Ha=class{constructor(a,b,c,f,d,m){this.Qd=a;this.Nd=b;this.Pd=c;this.Ld=f;this.Md=d;this.Od=m}getUsername(){return this.Qd}getFirstName(){return this.Nd}getLastName(){return this.Pd}getAvatar(){return this.Ld}getEmail(){return this.Md}isOwnComment(){return!0===this.Od}static mc(){return new D.Ha("","","","","",!1)}static Aa(a){return null==a?D.Ha.mc():new D.Ha(a.username,
a.first_name,a.last_name,a.avatar,a.email,a.is_own_comment)}};var N={};Object.defineProperty(N,"__esModule",{value:!0});N.Vb=class{constructor(a,b,c,f,d,m,e){this.id=a;this.author=b;this.Ce=c;this.Tc=f;this.vb=d;this.text=m;this.mentions=e}getAuthor(){return null===this.author?D.Ha.mc():this.author}getCreationTimeSecs(){return this.Ce}getText(){return this.text}getCommentUuid(){return this.id}isModified(){return null!==this.Tc&&0<this.Tc}isDeleted(){return null!==this.vb&&0<this.vb}getDeletionTimeSecs(){return this.vb}getMentions(){return this.mentions}static Aa(a,
b){const c=D.Ha.Aa(a.author);return new N.Vb(a.comment_uuid,c,a.created_at-b,a.modified_at?a.modified_at-b:null,a.deleted_at?a.deleted_at-b:null,a.text,null==a.mentions?[]:a.mentions.map((a)=>A.ta.He(a)))}};var u={};Object.defineProperty(u,"__esModule",{value:!0});u.bc="zobject";u.ac="overview";u.ua=class{constructor(a){this.mb=a.id;this.resolved=a.resolved;this.temporaryUnresolved=a.temporaryUnresolved;this.comments=a.comments;this.draft=a.draft;this.commentingState=a.commentingState;this.resolveState=
a.resolveState;this.type=a.type;this.objectId=a.objectId;this.pendingMentions=null!=a.pendingMentions?a.pendingMentions:[];this.Dc=!0===a.canResolveThisThread}getId(){return this.getType()===d.ThreadType.OVERVIEW?"OVERVIEW":"Z-"+this.getObjectId()}getBackendId(){return this.mb}isDraft(){return null==this.mb}getComments(){return this.comments}getNonDeletedLastComment(){let a=null,b=this.comments.length-1;for(;null==a&&0<=b;){const c=this.comments[b];c.isDeleted()||(a=c);b--}return a}getType(){return this.type}getObjectId(){return this.objectId}getDraft(){return this.draft}getCommentingState(){return this.commentingState}getResolveState(){return this.resolveState}getCommentCount(){return this.comments?
this.comments.length:0}getNonDeletedCommentCount(){return this.comments?this.comments.filter((a)=>!a.isDeleted()).length:0}isResolved(){return this.resolved}isTemporaryUnresolved(){return this.temporaryUnresolved}getEntityId(a){return this.type===d.ThreadType.ZOBJECT?this.objectId:this.type===d.ThreadType.OVERVIEW?null==a?null:a.getPreziW().getOverview().getId():null}static Me(a){return"Z-"!==a.slice(0,2)?null:a.slice(2)}canResolveThisThread(){return!0===this.Dc}clone(a){return new u.ua({id:void 0===
a.id?this.mb:a.id,resolved:void 0===a.resolved?this.resolved:a.resolved,temporaryUnresolved:void 0===a.temporaryUnresolved?this.temporaryUnresolved:a.temporaryUnresolved,comments:void 0===a.comments?this.comments:a.comments,draft:void 0===a.draft?this.draft:a.draft,pendingMentions:void 0===a.pendingMentions?this.pendingMentions:a.pendingMentions,commentingState:void 0===a.commentingState?this.commentingState:a.commentingState,resolveState:void 0===a.resolveState?this.resolveState:a.resolveState,type:void 0===
a.type?this.type:a.type,objectId:void 0===a.objectId?this.objectId:a.objectId,canResolveThisThread:void 0===a.canResolveThisThread?this.Dc:a.canResolveThisThread})}getPendingMentions(){return this.pendingMentions}static Aa(a,b,c=null,f=null,l=null,m=!1){if(null==a.thread_id&&null==a.thread_uuid)return null;let e,g;if(null!=a.type)if(a.type===u.bc)e=d.ThreadType.ZOBJECT,g=a.zobject_id;else if(a.type===u.ac)e=d.ThreadType.OVERVIEW;else return null;else{e=d.ThreadType.ZOBJECT;if(null==a.thread_id)return null;
"OVERVIEW"===a.thread_id?e=d.ThreadType.OVERVIEW:g=u.ua.Me(a.thread_id)}const h=a.comments.map((a)=>N.Vb.Aa(a,b));return new u.ua({id:a.thread_uuid||a.thread_id,resolved:a.resolved,temporaryUnresolved:m,comments:h,type:e,objectId:g,commentingState:null==c?d.CommentingServiceCallState.Ready:c,resolveState:null==f?d.CommentingServiceCallState.Ready:f,draft:void 0===l?null:l,canResolveThisThread:!0===a.can_resolve_this_thread})}static he(a,b){a=a.getPreziW().getOverview().getId();let c=d.ThreadType.ZOBJECT,
f;a===b?c=d.ThreadType.OVERVIEW:f=b;return new u.ua({id:null,resolved:!1,comments:[],type:c,objectId:f,commentingState:d.CommentingServiceCallState.Ready,resolveState:d.CommentingServiceCallState.Ready})}};var w={ef:function(a){return void 0!==a.permissions&&void 0!==a.threads},ff:function(a){return void 0!==a.message}};Object.defineProperty(w,"__esModule",{value:!0});w.ra=class{constructor(a){this.va=a;this.logger=v.LoggerModule.getLoggerManager().createLogger("prezi_commenting.CommentingBackend");
this.f=new y.Xb;this.Sc=w.ra.Ad;this.Zc=a.isFrequentPollingAllowed()?w.ra.Dd:w.ra.Bd;this.Ga=!1;this.Ic=null;this.Ka=n.Bacon.newBus();this.getComments()}Je(){return this.Ka.toProperty(this.Ic)}addComment(a,b,c,f,d){this.Ga=!0;this.va.addComment(a,b,A.ta.Rc(c),(a)=>{this.Da(a);f&&f(a)},(a)=>{this.ab("add_comment_failure",a);d&&d(a)})}resolveThread(a,b,c){this.va.resolveThread(a,(a)=>{this.Da(a);b&&b(a)},(a)=>{this.ab("resolve_thread_failure",a);c&&c(a)})}createThread(a,b,c,f){let l;switch(a){case d.ThreadType.OVERVIEW:l=
u.ac;break;case d.ThreadType.ZOBJECT:l=u.bc}this.va.createThread(l,b,(a)=>{c&&c(a)},(a)=>{f&&f(a)})}Lf(a){a?this.fd():this.od()}editComment(a,b,c,f,d,e){this.Ga=!0;this.va.editComment(a,b,c,A.ta.Rc(f),(a)=>{this.Da(a);d&&d(a)},(a)=>{this.ab("edit_comment_failure",a);e&&e(a)})}deleteComment(a,b,c,f){this.Ga=!0;this.va.deleteComment(a,b,(a)=>{this.Da(a);c&&c(a)},(a)=>{this.ab("delete_comment_failure",a);f&&f(a)})}Da(a){this.Hc=Date.now();this.Gc=a.server_current_time_msecs;this.Ic=a;this.Ga=!1}ab(a,
b){this.Ga=!1;this.f.lb(this.logger,a,b)}setPollingInterval(a){this.Zc=a;this.fd()}fd(){this.od();this.Yc=setInterval(()=>{this.Xe()},this.Zc)}od(){null!=this.Yc&&clearInterval(this.Yc)}Kf(){this.Sc=0}Xe(){this.Hc&&this.Hc>Date.now()-this.Sc||this.Ga||(this.Gc?this.yf(this.Gc):this.getComments())}getComments(){this.va.getComments((a)=>{this.Da(a);this.Ka.push(a)},(a)=>{this.f.lb(this.logger,"get_comments_failure",a);this.Ka.push({message:a})})}yf(a){this.va.pollComments(a,(a)=>{!1!==a.changed&&(this.Da(a),
this.Ka.push(a))},(a)=>{this.f.lb(this.logger,"poll_failure",a);this.Ka.push({message:a})})}};w.ra.Bd=3E5;w.ra.Dd=1E4;w.ra.Ad=1E4;var H={};Object.defineProperty(H,"__esModule",{value:!0});H.ib=class{constructor(a){this.be=a}Ff(a){setInterval(()=>{this.getContacts(a)},H.ib.rd)}getContacts(a){this.be.getContacts((b)=>{a(this.zf(b.data))},()=>{},!0)}zf(a){return a.filter((a)=>!!a.name).map((a)=>({username:a.username,name:a.name,oid:a.oid,email:a.email}))}};H.ib.rd=6E4;var I={};Object.defineProperty(I,
"__esModule",{value:!0});I.Jd=class{constructor(a){this.entityId=a;this.ca=null;this.Cc=0}getEntityId(){return this.entityId}getThread(){return this.ca}getInsideThreadCount(){return this.Cc}isThreadActive(){return null!=this.getThread()&&(!this.getThread().isResolved()||this.getThread().isTemporaryUnresolved())}};I.Kd=class{constructor(){this.Eb={};this.Mb=null;this.Jb={};this.nb={};this.threads=[];this.wb={};this.Qb=[]}setList(a,b){this.threads=b;if(null==this.threads||null==this.threads.forEach)this.threads=
[];this.buildMap(a)}buildMap(a){this.Eb={};this.nb={};this.Jb={};this.Mb=null;this.wb={};this.Qb=[];this.threads.forEach((a)=>{this.Eb[a.getId()]=a;this.nb[a.getBackendId()]=a;a.getType()===d.ThreadType.OVERVIEW?this.Mb=a:this.Jb[a.getObjectId()]=a});null!=a&&this.threads.forEach((b)=>{var c=b.getEntityId(a);let f=this.pc(c);f.ca=b;c=a.getEntityById(c);if(null!=c)for(b=r.Cet.createHierarchyQuery(a),c=a.getEntityById(b.getParentId(c));null!=c;c=a.getEntityById(b.getParentId(c))){var d=c.getId();d=
this.pc(d);f.isThreadActive()&&d.Cc++}})}getThreadInfoByEntityId(a){return this.wb[a]}getThreadInfos(){return this.Qb}Ge(a,b,c,f){return a.hasOwnProperty(c)?a[c]:(f=f(c),a[c]=f,b.push(f),f)}pc(a){return this.Ge(this.wb,this.Qb,a,(a)=>new I.Jd(a))}addThread(a,b){this.threads.push(b);this.buildMap(a)}removeThread(a,b){const c=[];this.threads.forEach((a)=>{a.getId()!==b&&c.push(a)});this.threads=c;this.buildMap(a)}replaceThread(a,b,c){this.removeThread(a,b);this.addThread(a,c)}getThreadById(a){return this.Eb[a]}getThreadByBackendId(a){return this.nb[a]}getThreadByEntityId(a,
b){return(a.getPreziW()&&a.getPreziW().getOverview().getId())===b?this.Mb:this.Jb[b]}forEach(a){for(let b=0;b<this.threads.length;b++)a(this.threads[b])}getNumberOfThreads(){return this.threads.length}getThreadArray(){return this.threads}};var k={};Object.defineProperty(k,"__esModule",{value:!0});var C;(function(a){a[a.Zb=0]="NOT_LOADED";a[a.LOADED=1]="LOADED";a[a.ERROR=2]="ERROR"})(C||(C={}));k.Ja="thread_handler_icon";k.$b="thread_handler_icon_";k.Wa="data-popupId";k.Tb="commenting-menu-dropdown-popup";
k.sa=class{constructor(a,b){this.selectedEntityId=this.$c=null;a.onValue((a)=>this.userLicenseInformation=a);this.threadList=new I.Kd;this.hb=n.Bacon.newBus();this.Rb=n.Bacon.newVoidBus();this.Sa=n.Bacon.newBus();this.Sa.onValue((a)=>b(a));this.Xc=n.Bacon.newBus();this.Bc=this.je();this.ba=n.Bacon.newBus();this.gd=n.Bacon.newBus();this.Ra=C.Zb;this.permissions={canResolveThreads:!1,canComment:!1};this.f=new y.Xb;this.jc=this.wa=!1;this.ia=[];this.isLoading=!0;this.xb=[];this.ad=n.Bacon.newBus();this.zc=
n.Bacon.newBus();this.Fa=n.Bacon.newBus();this.Fa.onValue((a)=>b(d.CommentingModule.createThreadboxPopupId(a)));this.Ob=n.Bacon.newVoidBus();this.hc=n.Bacon.newBus();this.logger=v.LoggerModule.getLoggerManager().createLogger("prezi_commenting.CommentingControllerImpl")}init(a){this.domLayerManager=a.domLayerManager;this.Ya=a.currentTopicProperty;this.deferredOpenedPopupIdStream=a.deferredOpenedPopupIdStream;this.scene=a.baseScene;this.playbackScene=a.playbackScene;this.mainStage=a.mainStage;this.mainStage.getMarginsProperty().onValue((a)=>
{this.nd=a;this.Vf(a)});this.playback=a.playback;this.ya();this.af();this.We();$(".domLayer").on("mousedown",`.${k.Ja}`,(a)=>{a.stopPropagation()});this.scene.getImmediateChangeStream(r.ChangeEventKind.Entity).onValue((a)=>{a.some((a)=>null!=a.entity&&(a.type===p.ChangeType.AddEntity||a.type===p.ChangeType.RemoveEntity))&&(this.threadList.buildMap(this.scene),this.Rb.push(),this.ba.push(this.threadList))});this.Ya.sampledBy(this.Rb).onValue((a)=>{this.ya(a)});this.threadList.buildMap(this.scene);
a.editorModeProperty.combineAndSample((a,b)=>({editorMode:a,entityId:b}),this.Bc).onValue(({editorMode:a,entityId:b})=>{a=this.yc(a,b);null!=a&&this.playback.seekTo(a);this.Fa.push(b);this.Ob.push(null)});a.currentTopicProperty.combineAndSample((a,b)=>a===b?null:b,this.Bc).onValue((a)=>{null!=a&&this.hd(a)});const b=n.Bacon.combineWith4(k.sa.Ud,a.fullScreenChangeProperty,a.isRemotePresentationInProgressProperty,this.hc.toProperty(this.w),a.editorModeProperty);b.onValue((a)=>{this.jc=!a;this.ya()});
n.Bacon.combineWith((a,b)=>a&&2!==b,b,a.networkStatusProperty).onValue((a)=>{this.w&&this.w.Lf(a)});this.Of(a.editorModeProperty);this.bf(a.fullScreenChangeProperty,a.editorModeProperty);n.Bacon.combineWith4((a,b,d,e)=>e&&1===b&&null==a&&!d,a.coverEditMode,a.networkStatusProperty,a.isRemotePresentationInProgressProperty,a.userHasCommentRightProperty).onValue((a)=>{this.Zd=a})}bf(a,b){this.ad.plug(n.Bacon.combineWith4((a,b,d,e)=>e!==F.EditorMode.playback||a||!this.isCommentsVisible()?!1:!this.Db(b),
a,this.Ya,this.ba.merge(n.Bacon.once(null)),b).skipDuplicates())}addComment(a,b,c,f){if(this.w){var l=this.cd(b,c),e=this.threadList.getThreadById(a).clone({commentingState:d.CommentingServiceCallState.Pending,draft:b,pendingMentions:l});this.threadList.replaceThread(this.scene,e.getId(),e);this.lf(e,b,f,c);this.ba.push(this.threadList);var g=(c)=>{this.w.addComment(c,b,l,(a)=>{this.gb(a,d.CommentingServiceCallState.Saved,null,c);this.Ta(a);this.qa();this.Jc(this.threadList.getThreadById(c),b,!0)},
(c)=>{this.zb(a,b,c)})};e.isDraft()?this.w.createThread(e.getType(),e.getObjectId(),(c)=>{if(c.thread_uuid)return e=this.threadList.getThreadById(a).clone({id:c.thread_uuid}),this.threadList.replaceThread(this.scene,e.getId(),e),g(c.thread_uuid);this.zb(a,b,"missing_uuid_field")},(c)=>{this.zb(a,b,c)}):g(e.getBackendId())}else this.bb()}editComment(a,b,c,f,e){if(this.w){f=this.cd(c,f);var l=this.threadList.getThreadById(a).clone({commentingState:d.CommentingServiceCallState.Pending,pendingMentions:f});
this.threadList.replaceThread(this.scene,l.getId(),l);var g=l.getComments().filter((a)=>a.getCommentUuid()===b);if(1===g.length){var h=g[0];this.logEditComment(l,h,c,e,f);this.ba.push(this.threadList);var k=l.getBackendId();this.w.editComment(k,b,c,f,(a)=>{this.gb(a,d.CommentingServiceCallState.Saved,null,k);this.Ta(a);this.qa();this.Lc(l,h,c,!0)},(b)=>{this.Ve(a,h,c,b)})}}else this.bb()}deleteComment(a,b,c,f){if(this.w){var e=this.threadList.getThreadById(a).clone({commentingState:d.CommentingServiceCallState.Pending});
this.threadList.replaceThread(this.scene,e.getId(),e);var g=e.getComments().filter((a)=>a.getCommentUuid()===b);if(1===g.length){var h=g[0];this.logDeleteComment(e,h);this.ba.push(this.threadList);var k=e.getBackendId();this.w.deleteComment(k,b,(a)=>{this.gb(a,d.CommentingServiceCallState.Saved,null,k);this.Ta(a);this.qa();this.Kc(e,h,!0);c()},(b)=>{this.Ue(a,h,b);f()})}}else this.bb()}resolveThread(a){if(this.w){var b=this.threadList.getThreadById(a).clone({resolveState:d.CommentingServiceCallState.Pending});
this.threadList.replaceThread(this.scene,b.getId(),b);this.nf(b);this.ba.push(this.threadList);this.w.resolveThread(b.getBackendId(),(c)=>{this.gb(c,null,d.CommentingServiceCallState.Saved,a);this.Ta(c);this.qa();this.popupClosed(b.getEntityId(this.scene),"");this.Oc(this.threadList.getThreadById(a),!0)},(b)=>{this.Ye(a,b)})}else this.bb()}ze(a,b){const c=a.threads.map((c)=>{var f=c.thread_uuid||c.thread_id;let d=this.Te(f,b),e=!1;const l=this.dc(a.server_current_time);(f=this.threadList.getThreadByBackendId(f))&&
(e=f.isTemporaryUnresolved());c=u.ua.Aa(c,l,d,null,null,e);return null==c?null:c}).filter((a)=>null!=a);let f=[];f=this.threadList.getThreadArray().filter((a)=>a.isDraft());this.threadList.setList(this.scene,c.concat(f))}Te(a,b){a=null===b?(a=this.threadList.getThreadById(a))?a.getCommentingState():d.CommentingServiceCallState.Ready:b;return a}gb(a,b,c,f){a.threads.forEach((d)=>{let e,l,g;var h=this.dc(a.server_current_time);h=u.ua.Aa(d,h);d=this.threadList.getThreadById(h.getId());if(null!=d){var k=
d.getCommentingState();e=d.getResolveState();l=d.getDraft();g=d.getPendingMentions();if(d.getId()===f||d.getBackendId()===f)l="",g=[],null!==b&&(k=b),null!==c&&(e=c)}k=h.clone({commentingState:k,resolveState:e,draft:l,pendingMentions:g,temporaryUnresolved:!1});null!=d?this.threadList.replaceThread(this.scene,d.getId(),k):this.threadList.addThread(this.scene,k)});this.threadList.forEach((b)=>{0===a.threads.filter((a)=>(a.thread_uuid||a.thread_id)===b.getBackendId()).length&&this.threadList.removeThread(this.scene,
b.getId())})}Nf(a){this.threadList.setList(this.scene,a);this.qa()}qa(){this.Rb.push();this.ba.push(this.threadList)}Ta(a){this.permissions={canResolveThreads:a.permissions.can_resolve_all_thread,canComment:!0}}setCommentingBackend(a){this.w=new w.ra(a);this.$e();this.hc.push(this.w)}setContactsBackend(a){this.lc=new H.ib(a);this.Wf();this.lc.Ff((a)=>this.Wc(a))}$e(){this.w.Je().onValue((a)=>{null!==a&&(w.ef(a)?(this.Ra=C.LOADED,this.ze(a,d.CommentingServiceCallState.Ready),this.Ta(a),this.qa(),this.isLoading&&
(this.isLoading=!1,null!=this.Lb&&this.goToThreadOnEntity(this.Lb))):w.ff(a)&&this.Ra===C.Zb&&(this.Ra=C.ERROR))})}af(){this.Ya.onValue((a)=>{this.ya(a);this.Lb=null})}getCommentingUpdatedStream(){return this.ba}Ze(a){return null!=this.threadList.getThreadByEntityId(this.scene,a)}Db(a){a=this.threadList.getThreadByEntityId(this.scene,a);return null!=a&&!a.isResolved()}hasUnresolvedCommentOnTargetEntityOrChild(a){if(this.wa||null==this.scene)return!1;if(this.Db(a))return!0;a=r.Cet.createHierarchyQuery(this.scene).getChildrenIdsWithOverviewFallback(a);
if(null!=a)for(let b=0;b<a.length;b++){const c=a[b];if(!z.CetModelEditor.isPlanetOrStack(c,this.scene)&&this.Db(c))return!0}return!1}addThreadsStream(a){a.onValue((a)=>this.Nf(a))}addOpenCommentPopupStream(a){this.hb.plug(a)}avatarClicked(a){this.cb(y.Ia.Sb,a)}nameClicked(a){this.cb(y.Ia.NAME,a)}textClicked(a){this.cb(y.Ia.Ub,a)}dateClicked(a){this.cb(y.Ia.Wb,a)}tc(a){if(null==a)return null;a=a.getComponent(k.sa.Ua);return null==a?null:a.getData()}ya(a){null!=this.scene&&null!=this.playbackScene&&
(null!=a&&this.Mf(a),this.scene.requestNoDomBatchUpdate((a)=>{this.xb.forEach((b)=>{null==this.threadList.getThreadInfoByEntityId(b)&&(b=a.getEntityById(b),this.fc(a,b))});this.xb=[];this.threadList.getThreadInfos().forEach((b)=>{const c=b.getEntityId(),d=a.getEntityById(c);if(null!=d){var e=0<b.getInsideThreadCount();b=b.isThreadActive();if(e||b){const a=this.Fe(d);this.xb.push(c);this.Uf(a,d,b,e)}else this.fc(a,d)}})}),this.scene.update())}Fe(a){var b=a.getId();let c=this.tc(a);null==c&&(c=new R.vd(this,
this.domLayerManager,b),b=r.Cet.createOverlayComponent(c,c),a.setComponent(k.sa.Ua,b));return c}fc(a,b){if(null!=b){var c=this.tc(b);null!=c&&(c.dispose(),a.getEntityById(b.getId()).discardOwnComponent(k.sa.Ua))}}Uf(a,b,c,d){a.kd(this.nd.top,this.nd.right);a.Jf(this.wa||this.jc);a.If(c);a.Gf(d);a.refresh(this.mainStage,b,!0)}Vf(a){this.mainStage.getRenderedScene().getEntityList().forEach(function(b){b=b.getComponent(k.sa.Ua);null!=b&&b.getData().kd(a.top,a.right)})}je(){return n.Bacon.fromEvent(document,
"mouseup",`.${k.Ja}`).map((a)=>{const b=a.target;a.stopPropagation();a=b.getAttribute(k.Wa);this.threadList.getThreadInfoByEntityId(a).isThreadActive()&&this.Nc({entityId:a,trigger:d.OpenCommentThreadTrigger.PUCUKA});return a})}getComponentFocusStream(){let a=n.Bacon.fromEvent(document,"mouseup",".selectable-text").map(()=>Q.ComponentFocusAction.enterUi);return this.Fa.map((a)=>null!=this.threadList.getThreadById(a)?Q.ComponentFocusAction.enterUi:Q.ComponentFocusAction.exitAll).merge(a)}getHoveredEntityStream(){return this.ke().merge(this.le()).map((a)=>
({hoveredEntityIds:[a]}))}ke(){return n.Bacon.fromEvent(document,"mouseenter",`.${k.Ja}`).map((a)=>{const b=a.target;a.stopPropagation();return b.getAttribute(k.Wa)})}le(){return n.Bacon.fromEvent(document,"mouseout",`.${k.Ja}`).map(()=>null)}getThreadList(){return this.threadList}getOpenPopupIdStream(){return n.Bacon.mergeAll([this.Fa.map(d.CommentingModule.createThreadboxPopupId),this.Sa])}getOpenModalIdStream(){return this.Xc}getOpenPopupForEntityIdStream(){return this.Fa}bb(){this.Ra=C.ERROR}Ye(a,
b){const c=this.threadList.getThreadById(a).clone({resolveState:d.CommentingServiceCallState.Error});this.threadList.replaceThread(this.scene,a,c);this.ba.push(this.threadList);this.Oc(c,!1,b)}zb(a,b,c){var f=this.threadList.getThreadById(a);null!==f&&(f=f.clone({commentingState:d.CommentingServiceCallState.Error}),this.threadList.replaceThread(this.scene,a,f),this.ba.push(this.threadList),this.Jc(f,b,!1,c))}Ve(a,b,c,f){var e=this.threadList.getThreadById(a);null!==e&&(e=e.clone({commentingState:d.CommentingServiceCallState.Error}),
this.threadList.replaceThread(this.scene,a,e),this.ba.push(this.threadList),this.Lc(e,b,c,!1,f))}Ue(a,b,c){var f=this.threadList.getThreadById(a);null!==f&&(f=f.clone({commentingState:d.CommentingServiceCallState.Error}),this.threadList.replaceThread(this.scene,a,f),this.ba.push(this.threadList),this.Kc(f,b,!1,c))}popupClosed(a,b){const c=this.threadList.getThreadByEntityId(this.scene,a);null!=c&&(a=c.getId(),null!=b&&0<b.length?(b=c.clone({draft:b}),this.threadList.replaceThread(this.scene,a,b),
this.eb(b)):c.isResolved()?(this.eb(c),this.threadList.replaceThread(this.scene,a,c.clone({temporaryUnresolved:!1})),this.ya()):0===c.getCommentCount()?(this.eb(c),this.threadList.replaceThread(this.scene,a,c.clone({resolved:!0})),this.ya(),this.threadList.removeThread(this.scene,a)):this.eb(c),this.ba.push(this.threadList))}We(){n.Bacon.combineWith((a,b)=>({currentTopicId:a,Kb:b}),this.Ya,this.hb).sampledBy(this.hb).onValue((a)=>{const b=a.Kb.entityId;if(b!==a.currentTopicId){const a=d.CommentingModule.createThreadboxPopupId(b);
this.deferredOpenedPopupIdStream.filter((b)=>b===a).take(1).onValue(()=>{this.hd(b)})}this.uf(a)})}uf(a){var b=a.Kb.entityId;const c=a.currentTopicId;this.wa=!1;if(!this.Ze(b)){const a=u.ua.he(this.scene,b);this.threadList.addThread(this.scene,a);this.logCreateCommentThread(a)}b=this.threadList.getThreadByEntityId(this.scene,b);b.isResolved()&&this.threadList.replaceThread(this.scene,b.getId(),b.clone({temporaryUnresolved:!0}));this.ya(c);this.ba.push(this.threadList);this.Nc(a.Kb);this.Fa.push(b.getEntityId(this.scene));
this.Ob.push(null)}hd(a){null!=a&&this.gd.push({selectedGroupIds:[],selectedEntityIds:[a],type:fa.SelectActionType.replace})}goToThreadOnEntity(a){const b=this.threadList.getThreadByEntityId(this.scene,a);this.isLoading?this.Lb=a:null!=b&&this.goToThread(b.getId())}zoomIn(a){var b=this.scene.getEntityById(a);if(null!=b){if(!z.CetModelEditor.isPlanet(a,this.scene)){a=r.Cet.createHierarchyQuery(this.scene).getChildrenIdsWithOverviewFallback(a).filter((a)=>z.CetModelEditor.isPage(a,this.scene));if(0===
a.length)return;let b=a.filter((a)=>null!=this.threadList.getThreadInfoByEntityId(a));a=0===b.length?a[0]:b[0]}null!=a&&(this.closePopups(),this.playback.getPathNavigator().see(a));b=r.Cet.createHierarchyQuery(this.scene).getParentId(b);b=null!=b&&b!==this.scene.getPreziW().getOverview().getId();v.avro.Avro.createDefaultLogger().logOpenedTopic({object_type:b?"SUBTOPIC":"TOPIC",object_id:a});this.f.zoomIn({actionIndex:this.playback.getCurrentActionIndex(),stepIndex:this.playback.getCurrentStepIndex(),
totalStepNumber:this.playback.getStepCount()})}}closePopups(){this.Sa.push(null)}yc(a,b){return a!==F.EditorMode.playback||this.playback.isEntityVisibleAtCurrentPathPosition(b)?null:this.playback.getClosestPathPositionWhereVisible(b)}goToThread(a){n.Bacon.later(0,null).onValue(()=>{this.zc.push(a)})}Of(a){a.combineAndSample((a,c)=>({editorMode:a,threadId:c}),this.zc).onValue((a)=>{const {threadId:b,editorMode:f}=a;a=this.threadList.getThreadById(b);if(null!=a&&null!=this.playback&&null!=this.scene&&
this.hasTargetObject(a)){var e=a.getEntityId(this.scene);a=this.yc(f,e);null!=a?this.playback.flyToStepAction(a.getStep(),a.getAction(),()=>{this.goToThread(b)}):(a=z.CetModelEditor.getPageOrChapterId(e,this.scene),null!=a&&(this.wa&&(this.wa=!1,this.qa()),a=this.playback.flyToObject(a),this.closePopups(),a.onValue((a)=>{a.phase===r.NavigationActionAnimationPhase.End&&this.hb.push({entityId:e,trigger:d.OpenCommentThreadTrigger.COMMENT_MENU})})))}})}openModal(a){this.Sa.push(null);this.Xc.push(a);
this.mf()}openMenu(){this.Sa.push(k.Tb);this.isPaywallMode()?this.f.wf(this.logger,d.OpenCommentMenuSource.TOPMENU):this.f.tf(this.logger)}closeMenu(){this.closePopups()}hasLoadError(){return this.Ra===C.ERROR}hasTargetObject(a){return null==this.scene?!0:null!=this.scene.getEntityById(a.getEntityId(this.scene))}getThreadIconNode(a){return $(`#${k.$b}${a}`).get(0)}getTargetObjectType(a){return null==this.scene?d.TargetObjectType.UNKNOWN:this.Re(this.scene,a.getEntityId(this.scene))}Re(a,b){if(null==
a)return d.TargetObjectType.UNKNOWN;const c=a.getEntityById(b);if(null==c)return d.TargetObjectType.UNKNOWN;const f=(a)=>{switch(a){case p.CetModel.ID.Z_LINE:return d.TargetObjectType.LINE;case p.CetModel.ID.Z_ARROW:return d.TargetObjectType.ARROW;case p.CetModel.ID.OVERVIEW:return d.TargetObjectType.OVERVIEW;case p.CetModel.ID.Z_IMAGE:return d.TargetObjectType.IMAGE;case p.CetModel.ID.Z_PDF:return d.TargetObjectType.PDF;case p.CetModel.ID.Z_VIDEO:return d.TargetObjectType.VIDEO;case p.CetModel.ID.Z_TEXT:return d.TargetObjectType.TEXT;
case p.CetModel.ID.FADE_IN_OBJECT:case p.CetModel.ID.FADE_IN_OBJECT_EP:case p.CetModel.ID.FADE_IN_OBJECTS:case p.CetModel.ID.FADE_IN_OBJECTS_EP:return d.TargetObjectType.FADE_IN;case p.CetModel.ID.FADE_OUT_OBJECT:case p.CetModel.ID.FADE_OUT_OBJECT_EP:case p.CetModel.ID.FADE_OUT_OBJECTS:case p.CetModel.ID.FADE_OUT_OBJECTS_EP:return d.TargetObjectType.FADE_OUT;case p.CetModel.ID.ZOOM_TO_OBJECT:case p.CetModel.ID.ZOOM_TO_OBJECT_EP:return d.TargetObjectType.ZOOM_TO;case p.CetModel.ID.Z_CHART_PDF:return d.TargetObjectType.CHART;
case null:return d.TargetObjectType.UNKNOWN;default:return d.TargetObjectType.OBJECT}};return z.CetModelEditor.isSubChapter(b,a)?d.TargetObjectType.SUBTOPIC:z.CetModelEditor.isPlanetOrStack(b,a)?d.TargetObjectType.TOPIC:z.CetModelEditor.isPage(b,a)?d.TargetObjectType.PAGE:f(c.get(p.CetModel.DEF()))}mf(){this.f.xf(this.logger)}Nc(a){var b=this.threadList.getThreadByEntityId(this.scene,a.entityId);b=this.fa(b,a.entityId);this.f.vf(this.logger,a.trigger,b)}logCreateCommentThread(a){a=this.fa(a);this.f.de(a)}lf(a,
b,c,d){a=this.fa(a);this.f.addComment(this.logger,c,b.length,a,d)}Jc(a,b,c,d){a=this.fa(a);null!=d&&(a.errorMessage=d);this.f.Sd(this.logger,c,b.length,a)}logEditComment(a,b,c,d,e){a=this.$a(a,b);this.f.editComment(this.logger,d,c.length,a,e)}Lc(a,b,c,d,e){a=this.$a(a,b);null!=e&&(a.errorMessage=e);this.f.Ee(this.logger,d,c.length,a)}logDeleteComment(a,b){a=this.$a(a,b);this.f.deleteComment(this.logger,"click",a)}Kc(a,b,c,d){a=this.$a(a,b);null!=d&&(a.errorMessage=d);this.f.De(this.logger,c,a)}eb(a){a=
this.fa(a);this.f.Xd(this.logger,a)}nf(a){a=this.fa(a);this.f.resolveThread(this.logger,a)}pf(a){this.f.Zf(this.logger,a)}Oc(a,b,c){a=this.fa(a);null!=c&&(a.errorMessage=c);this.f.Cf(this.logger,a,b)}cb(a,b){b=this.threadList.getThreadById(b);b=this.fa(b);this.f.Wd(this.logger,a,b)}getPermissions(){return this.permissions}setPollingInterval(a){this.w&&(this.w.Kf(),this.w.setPollingInterval(a))}fa(a,b=null){let c,d,e,g,h;null!=a?(c=a.getCommentCount(),d=a.isResolved(),e=a.getId(),g=a.getBackendId(),
h=null!=a.getDraft()&&0<a.getDraft().length):(c=0,d=!1,g=e=null,h=!1);let k=null;b?k=this.scene.getEntityById(b):a&&(k=this.scene.getEntityById(a.getEntityId(this.scene)));return{numComments:c,entity:k,isResolved:d,threadId:e,threadUuid:g,hasDraft:h}}$a(a,b){return{threadId:a.getId(),threadUuid:a.getBackendId(),numComments:a.getCommentCount(),commentUuid:b.getCommentUuid(),isResolved:a.isResolved()}}dc(a){const b=Math.floor((new Date).getTime()/1E3);return a-b}isCommentsVisible(){return!this.wa}changeCommentsVisibility(a){this.wa=
!a;this.qa();this.pf(a);a||this.closePopups()}Wf(){this.lc.getContacts((a)=>this.Wc(a))}Wc(a){this.ia=a}filterContacts(a){const b=a.length,c=a.toLowerCase();return this.ia.filter((a)=>a.email.length>=b&&-1!==a.email.toLowerCase().indexOf(c)||a.name.length>=b&&-1!==a.name.toLowerCase().indexOf(c))}Mf(a){this.selectedEntityId!==a&&(this.$c=null==this.selectedEntityId?a:this.selectedEntityId,this.selectedEntityId=a)}getSelectedEntityId(){return this.selectedEntityId}getPrevSelectedEntityId(){return this.$c}getSelectActionStream(){return this.gd}addContactToPendingMentions(a,
b){a=this.threadList.getThreadByEntityId(this.scene,a);if(null==a)return null;const c=A.ta.rc(b);b=a.getPendingMentions().filter((a)=>a.getKey()===c.getKey());if(0<b.length)return b[0];const d=a.getPendingMentions().concat([c]);b=a.getId();a=a.clone({pendingMentions:d});this.threadList.replaceThread(this.scene,b,a);this.ba.push(this.threadList);return c}cd(a,b){return b.filter((b)=>-1!==a.indexOf(b.getKey()))}getContact(a){if(null==this.ia)return null;let b=this.ia.filter((b)=>b.oid===a);return 0===
b.length?null:b[0]}mentionPopupDisplays(a,b){this.f.mentionPopupDisplays(this.logger,this.fa(a),b)}mentionPopupAddedUser(a,b){this.f.mentionPopupAddedUser(this.logger,this.fa(a),b)}mentionPopupClosedByKeyboard(a,b){this.f.mentionPopupClosedByKeyboard(this.logger,this.fa(a),b)}mentionPopupClosedByClick(a){this.f.mentionPopupClosedByClick(this.logger,this.fa(a))}getPreviewInsertCommentButtonVisibilityStream(){return this.ad}isPaywallMode(){return!this.userLicenseInformation.pitchComment}logLinkClicked(){this.f.Vd(this.logger)}static Ud(a,
b,c,d){return null==c?!1:d===F.EditorMode.edit?!0:d===F.EditorMode.view||d===F.EditorMode.playback?!a&&!b:!1}isCommentingEnabled(){return this.Zd}getStopCoverEditingStream(){return this.Ob}};k.sa.Ua=r.Cet.createOverlayComponentKey("commentOverlay");var g=J,S={};Object.defineProperty(S,"__esModule",{value:!0});S.ud=class extends e.Component{constructor(a){super(a);this.state={}}Se(){return this.props.ca.getComments().map((a)=>a.getAuthor().getUsername()).sort().filter((a,b,c)=>b===c.indexOf(a))}wc(){return this.props.ca.getNonDeletedLastComment().getAuthor()}ob(a){var b=
this.wc();b=[h.KoiWidgetsModule.getWidgetFactory().avatar({avatarUrl:b.getAvatar(),className:"thread-item-user-avatar",firstName:b.getFirstName(),lastName:b.getLastName(),key:`thread-item-user-avatar-${a}`,userName:b.getUsername()})];const c=this.Se();1<c.length&&b.push(h.KoiWidgetsModule.getWidgetFactory().label({key:`thread-item-user-avatar-extra-${a}`,className:"thread-item-user-avatar-extra",text:`+${c.length-1}`}));return e.createElement("div",{key:`thread-item-user-avatars-${a}`,className:"thread-item-user-avatars"},
b)}sb(a){const b=this.wc();return h.KoiWidgetsModule.getWidgetFactory().label({key:`thread-item-user-name-${a}`,className:"thread-item-user-name",text:`${b.getFirstName()} ${b.getLastName()}`})}pb(a){const b=K.get({to:this.props.ca.getNonDeletedLastComment().getCreationTimeSecs(),units:K.PreziVagueTimeModuleUnits.Second});return h.KoiWidgetsModule.getWidgetFactory().label({key:`thread-item-date-${a}`,className:"thread-item-date",text:b})}createText(a){return h.KoiWidgetsModule.getWidgetFactory().label({key:`thread-item-text-${a}`,
className:"thread-item-text",text:ca(this.props.controller.getTargetObjectType(this.props.ca))})}xe(a){return e.createElement("div",{key:`thread-item-container-${a}`,className:"thread-item-container"},[this.ob(a),this.sb(a),this.createText(a),this.pb(a)])}render(){if(this.props.ca.isResolved()||0===this.props.ca.getNonDeletedCommentCount()||!this.props.controller.hasTargetObject(this.props.ca))return null;const a=`${this.props.ca.getId()}-${this.props.index}`;return e.createElement("div",{key:`thread-item-${a}`,
className:"commenting-menu-thread-item","data-lookup":`${d.Lookup.THREAD_ITEM}:${this.props.ca.getId()}:${this.props.index}`,onClick:()=>{this.props.controller.goToThread(this.props.ca.getId())}},[this.xe(a)])}};var T={};Object.defineProperty(T,"__esModule",{value:!0});T.wd=class extends e.Component{constructor(a){super(a);this.rf=()=>{this.props.opened?this.props.controller.closeMenu():this.props.controller.openMenu()};this.state={};this.Sf=e.createFactory(S.ud)}te(a){return e.createElement(h.KoiWidgets.Button,
{icon:"icon-chat",className:`small regular popup-opener commenting-button ${0<a?"has-threads":"no-threads"}`,disabled:!this.props.enabled,onClick:this.rf,tooltipText:g.I18n.ts("All comments"),tooltipPosition:0,hideTooltip:this.props.opened,lookupId:d.Lookup.COMMENTING_MENU_BUTTON,ref:d.Lookup.COMMENTING_MENU_BUTTON})}Td(a){let b=!0,c=0;for(;b&&c<a.length;){let d=0;const e=a[c].getComments();for(;b&&d<e.length;){const a=e[d];a.isDeleted()||(b=a.getAuthor().isOwnComment());d++}c++}return b}Pe(){return e.createElement("div",
null,e.createElement(h.KoiWidgets.Label,{className:"thread-item-list-header",text:g.I18n.ts("All comments")}),e.createElement(h.KoiWidgets.List,{className:"thread-item-list",isLoading:!1,items:[{children:[e.createElement("div",{className:"commenting-menu-thread-item","data-lookup":`${d.Lookup.THREAD_ITEM}:example:0`},e.createElement("div",{className:"thread-item-container"},e.createElement("div",{className:"thread-item-user-avatars"},e.createElement(h.KoiWidgets.Avatar,{avatarUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAABFVJREFUSA2FVWlsVVUQ/kofLigJvtTGSkpQH4lNcEMhFNekCRGNGGJFIxWNGrEu9UfjD4NLMYDEJVZJKi6gBCxJRQuVQtpSoNJAEUoXuqh9LdBHq1Y2lS4WyjjfnZ6++5oXO8k9Z+7MnDNz5nwzBzIGbT4kUlhjRi9tFFlWYnzBbpGK5jEWq3oc4tCxU8C6alO09QDbGmON+geBUpVFzgDnh4DPqoA//o61cX9xHTR1AZtrgb1twG2pwJk+gE4TEoBx+jWcAC4KMGMKUFIPbNWvS53FJf8hP68SWb9P5MKQSPYGkWe/jmr7B6O8n8ssEMnbams+KBPZUufXigScV0bUp0cvrjNJQZbNDRFLwcbysDP15qy5ISy5F/g228QflgOVrcDkSTFm8BwcPQmc0CO+kmHKTk3H4AXgxW+AosowchaEUPpmCKJBMBCmqbwZuHtpGAszQvjyKaD7LLA4HXj0DmD7EWD29UDwCpgD5rFMF0yfDLyXCQycB+57H2hqDaM8L4QVpcAnxWEkJyd7EfT09ODOGSHseCuEee+E0dIdwr7XLbiXNagODfjcALBwpsqYMeb8hwaRRV9Y/pj79JWWz5Ts37wcn+6N5vZsn8jybSLXvNAt39WarbuvxWtFfvw1aouigyKrK0Wq20xY3ymS9Fyn7G8Xmfhkmzc7c14iP0c/HTUn3JC2XEuqPSaydq9I1S9aB6d7gV16OUwDiZhe8kCq95+bGcKs6wBe4GiibOZUIOehFCwr0VnviWtJb2wxsLT/qT/0yBQ1d5GzSFxETIs/ascPXYzK/xmwNaxqnoJ0SE/gYB3ILfKc4vLxwPIFxhMtpKsm2Dx6dHrKr7zUtESXo8IDxl2mGA2MT7SfS0YqwqDojOPN/s3i6f17BlY9Yphv6Y6aEuekv/pt/r+xV4uT5NaQz5oNpKUAidqIEpPuyctbtQOoaAEWqSLSG/SKJjAhiN+1gb12P1DTAcy5AdjfzuVAuvKU5c4FVlcq5iXoFeC0KUE8eDPw9Fd6yYeHM1F8WGTNHhFCjkSo8bIIW85OTp27ZPKkuuNms/tnmx1MuZbQ39mit0VDooiOHlvDP2ty3JxFxHllqci5f03HkTydUbfpgM2u0Fisu1pFiDRSAof8Cu0tmiK2X4ekOe9aq2APIs4PNrYzGMuRjrffFMLb84H5K8KYnhZtFa9uAviGsC89PksN6eD4SZGajmjLZfslMSpGufR7e73KmkT4EfOUUecizym0Vs/IqXetxTsBwyL0PtKTsOWOeFf5WO36Fn2QSB/vtIbJqLl+hCxWG9dVi5dT3snz62MfHL+dn+eDw9Mw8vwKke1H/NrhS44VWRedly9eo2PTI98YEXGPPjsvZZ2nDBzkmeJ45KvfkUN5l/2EHpWPxqd7AFb5jVo4jggGUn0EHu7ZMKclm2z0GNdBalCrcTiPU5OAh28FXPlzg2snARlpwNUTTf7MXaO3jf7/B0EAQrbiO5VzAAAAAElFTkSuQmCC",
className:"thread-item-user-avatar",firstName:"Prezi",lastName:"",userName:"prezi"})),e.createElement(h.KoiWidgets.Label,{className:"thread-item-user-name",text:"Prezi"}),e.createElement(h.KoiWidgets.Label,{className:"thread-item-text",text:g.I18n.ts("This is where you\u2019ll see comments and feedback from you and your collaborators. Commenting makes working together easy.")}),e.createElement(h.KoiWidgets.Label,{className:"thread-item-date",text:g.I18n.ts("just now")})))],onRemove:null}],gradientFader:!1}),
e.createElement("div",{className:"commenting-menu-paywall-box",style:{borderBottomLeftRadius:4,borderBottomRightRadius:4}},e.createElement(h.KoiWidgets.Label,{className:"commenting-menu-paywall-box-title",text:g.I18n.ts("Commenting")}),e.createElement(h.KoiWidgets.Label,{className:"commenting-menu-paywall-box-info",text:g.I18n.ts("Commenting is available with a Prezi Business license.")}),e.createElement("div",{className:"commenting-menu-paywall-box-buttons"},e.createElement(h.KoiWidgets.Button,{className:"popup-opener contact-sales-button",
disabled:!1,onClick:()=>{this.props.controller.openModal(ea.BuiltinDialog.contactSalesCommenting)},hideTooltip:!0,text:g.I18n.ts("Tell me more")}),e.createElement("div",{className:"commenting-menu-paywall-box-learnmore-wrapper"},e.createElement("a",{className:"commenting-menu-paywall-box-learnmore-link",href:g.I18n.ts("https://prezi.com/business/kb/collaborate/comments-feature/"),target:"_blank",onClick:()=>{this.props.learnMoreLinkClickedCallback()}},g.I18n.ts("Learn about commenting"))))))}Oe(a){if(this.props.controller.hasLoadError())return this.ge();
if(0===a.length)return e.createElement(h.KoiWidgets.Label,{className:"commenting-menu-dropdown-popup-no-threads",text:g.I18n.ts("There are no open threads.")});const b=a.filter((a)=>{a=a.getNonDeletedLastComment();return null!=a&&!a.getAuthor().isOwnComment()}),c=this.Td(a);let d=null;0!==b.length||c||(d=e.createElement("div",{className:"commenting-menu-dropdown-popup-all-done"},e.createElement("span",{className:"icon-checkmark"}),e.createElement("span",{className:"commenting-menu-dropdown-popup-all-done-label"},
g.I18n.ts("You\u2019ve replied to all comments"))));a=a.map((a,b)=>({children:[this.Sf({ca:a,index:b,controller:this.props.controller})],onRemove:null}));return e.createElement("div",null,e.createElement(h.KoiWidgets.Label,{className:"thread-item-list-header",text:g.I18n.ts("All comments")}),e.createElement(h.KoiWidgets.List,{className:"thread-item-list",isLoading:!1,items:a,gradientFader:!0}),d)}ge(){return e.createElement("div",{className:"commenting-menu-dropdown-popup-error"},this.qb())}qb(){return e.createElement("div",
{className:"load-error-label"},e.createElement("i",{className:"icon-warning"}),e.createElement("div",{className:"load-error-text"},g.I18n.ts("Something went wrong. We could not load comments.")))}rb(a){a=this.props.paywallMode?this.Pe():this.Oe(a);return e.createElement("div",{id:"commenting-menu-dropdown-popup",className:"commenting-menu-dropdown-popup","data-lookupId":d.Lookup.COMMENTING_MENU_DROPDOWN},e.createElement(h.KoiWidgets.SimplePopup,{open:this.props.opened,styles:this.props.paywallMode?
{content:{padding:"6px 0 0 0"}}:{},orientation:"BOTTOM"},a))}componentDidMount(){this.setState({anchorNode:E.findDOMNode(this.refs[d.Lookup.COMMENTING_MENU_BUTTON])})}render(){const a=this.props.threadList.getThreadArray().filter((a)=>!a.isResolved()&&0<a.getCommentCount()&&this.props.controller.hasTargetObject(a)).sort((a,c)=>c.getComments()[c.getCommentCount()-1].getCreationTimeSecs()-a.getComments()[a.getCommentCount()-1].getCreationTimeSecs());return e.createElement("div",null,this.te(a.length),
this.rb(a))}};var U={};Object.defineProperty(U,"__esModule",{value:!0});U.zd=class extends e.Component{constructor(a){super(a);this.Uc=(a)=>{this.onMouseDown(a)}}render(){return e.createElement("div",{key:`mention-popup-contact-item-${this.props.kc.oid}`,className:"mention-popup-contact-item"+(this.props.Qa?" selected":"")},this.props.kc.name)}onMouseDown(a){if(null!=this.props.onMouseDown)this.props.onMouseDown(a)}componentDidMount(){E.findDOMNode(this).addEventListener("mousedown",this.Uc)}componentWillUnmount(){E.findDOMNode(this).removeEventListener("mousedown",
this.Uc)}};var V={};Object.defineProperty(V,"__esModule",{value:!0});V.Ed=class extends e.Component{constructor(a){super(a);this.state={scrollTo:0};this.ae=e.createFactory(U.zd);this.ea=h.KoiWidgetsModule.getWidgetFactory()}componentWillReceiveProps(a){if(a.v!==this.props.v){const b=a.v-this.props.v;0>b&&this.state.scrollTo>24+24*(a.v-1)&&this.setState({scrollTo:24+24*(a.v-1)});const c=Math.max(Math.min(this.props.Pc,null!=this.props.ia?this.props.ia.length:0),1);0<b&&this.state.scrollTo<24+24*(a.v-
c)&&this.setState({scrollTo:24+24*(a.v-c)})}}render(){if(!this.props.anchorNode||!this.props.visible)return null;const a=Math.min(this.props.Pc,null!=this.props.ia?this.props.ia.length:0),b=this.props.width,c=0===a?120:24+24*a;return h.KoiWidgetsModule.getWidgetFactory().fixedSizeFloatingPopup({key:`thread-box-mention-popup-${this.props.pa}`,lookupId:`${d.Lookup.MENTION_POPUP}:${this.props.pa}`,className:"thread-box-mention-popup",preferredAnchorOrientation:h.KoiFixedSizeFloatingPopupAnchorOrientation.TOP,
content:[0===a?e.createElement("p",{className:"thread-box-mention-popup-empty","data-lookup":`${d.Lookup.MENTION_POPUP_CONTENT_EMPTY}:${this.props.pa}`},g.I18n.ts("Are you sure you have a team member by that name?\n\nIf you want to invite someone to collaborate, please share this prezi with them.")):e.createElement("div",{className:"thread-box-mention-popup-container","data-lookup":`${d.Lookup.MENTION_POPUP_CONTENT}:${this.props.pa}`,style:{width:b,height:c}},this.tb())],anchorNode:this.props.anchorNode,
visible:!0,usePointer:!1,width:b,height:c})}tb(){const a=(this.props.ia||[]).map((a,c)=>{const b=this.props.v===c,e=`${d.Lookup.MENTION_POPUP_CONTACT_ITEM}:${this.props.pa}:${a.oid}`;return{children:[this.ae({key:a.oid,onMouseDown:(a)=>{a.preventDefault();null!=this.props.Vc&&this.props.Vc(c)},index:c,kc:a,Qa:b})],className:b?"selected":"",lookupId:e,onRemove:null}});return[this.ea.list({key:"contact-list",ref:"contact-list-component",className:"mention-popup-contact-list",isLoading:!1,items:a,gradientFader:!1,
scrollToBottom:!1,scrollTo:this.state.scrollTo})]}};var O={};Object.defineProperty(O,"__esModule",{value:!0});O.Yb=class extends e.Component{constructor(a){super(a);this.Hb=null;this.state={ka:null,Qc:null,ha:!1,v:null,pd:0};this.qf=e.createFactory(V.Ed);this.ea=h.KoiWidgetsModule.getWidgetFactory();this.qc=(a)=>{"Escape"===a.key&&this.state.ha&&(a.stopPropagation(),this.Ba(),this.props.ma.mentionPopupClosedByKeyboard(a.keyCode))}}componentDidMount(){const {Oa:a}=this.ja();a.addEventListener("keydown",
this.qc);this.setState({Qc:a})}componentWillUnmount(){E.findDOMNode(this).removeEventListener("keydown",this.qc)}pe(){return this.state.ha?this.qf({ref:"mention-popup",pa:this.props.pa,visible:!0,ia:this.state.ka,anchorNode:this.state.Qc,width:228,Pc:5,v:this.state.v||0,Vc:(a)=>{this.Ac(a);this.props.ma.mentionPopupAddedUser(d.AddMentionTrigger.CLICK)}}):null}Rd(){this.setState({ha:!0,v:0})}Ba(){this.setState({ha:!1,v:null,ka:null})}Ac(a){if(this.state.v>=this.state.ka.length)throw"selectedContactIndex out of range";
a=this.props.Xa(this.state.ka[null!=a?a:this.state.v]);this.df(a);this.Ba()}df(a){const {Oa:b,La:c,value:d}=this.ja(),e=d.slice(0,c).lastIndexOf("@");b.value=d.slice(0,e)+a.getKey()+" "+d.slice(c);this.ed($(b))}Ef(){if(0!==this.state.ka.length){var a=this.state.ka.length;this.setState({v:null===this.state.v?this.state.ka.length-1:(this.state.v-1+a)%a})}}Df(){const a=this.state.ka.length;0!==a&&this.setState({v:((this.state.v||0)+1)%a})}ja(){const a=this.refs.inputText,b=E.findDOMNode(a);return{cf:a,
Oa:b,La:null==b?null:b.selectionEnd,value:null==b?null:b.value}}Xf(a,b){a=a.slice(0,b);b=a.lastIndexOf("@");-1===b?a=[]:(a=a.slice(b+1),a=this.props.filterContacts(a));this.setState({ka:a,v:0})}render(){const a=Object.assign(Object.assign({},this.props.textArea),{style:null==this.props.textArea.style?{}:Object.assign({},this.props.textArea.style),ref:"inputText",onKeyPress:(a)=>{if("Enter"!==a.key||a.ctrlKey||a.shiftKey||a.metaKey||!this.state.ha){if("@"===a.key&&(this.Hb=a.key),null!=this.props.textArea.onKeyPress)this.props.textArea.onKeyPress(a)}else a.preventDefault(),
0===this.state.ka.length||null===this.state.v?(this.Ba(),this.props.ma.mentionPopupClosedByKeyboard(a.keyCode)):(this.Ac(),this.props.ma.mentionPopupAddedUser(d.AddMentionTrigger.ENTER))},onKeyUp:(a)=>{const {La:b,value:f}=this.ja();null==this.Hb||null!=f&&-1===f.substr(0,b).search(/(\s|^)@$/)||(this.Hb=null,this.state.ha||(this.Rd(),this.props.ma.mentionPopupDisplays(d.ShowMentionPopupTrigger.AT_SIGN)));if(null!=this.props.textArea.onKeyUp)this.props.textArea.onKeyUp(a)},onBlur:(a)=>{this.state.ha&&
(this.Ba(),this.props.ma.mentionPopupClosedByClick());if(null!=this.props.textArea.onBlur)this.props.textArea.onBlur(a)},onKeyDown:(a)=>{switch(a.key){case "ArrowUp":if(this.state.ha){a.preventDefault();this.Ef();return}break;case "ArrowDown":if(this.state.ha){a.preventDefault();this.Df();return}break;case "ArrowLeft":case "ArrowRight":case " ":this.state.ha&&(this.Ba(),this.props.ma.mentionPopupClosedByKeyboard(a.keyCode));break;case "Backspace":if(this.state.ha){const {La:b,value:d}=this.ja();"@"===
d[b-1]&&(this.Ba(),this.props.ma.mentionPopupClosedByKeyboard(a.keyCode))}}if(null!=this.props.textArea.onKeyDown)this.props.textArea.onKeyDown(a)},onChange:(a)=>{const {La:b,value:d,Oa:e}=this.ja();this.Xf(d,b);this.ed($(e));if(null!=this.props.textArea.onChange)this.props.textArea.onChange(a)}});this.props.Nb&&(a.style.height=this.state.pd);return e.createElement("div",{style:{display:"flex"}},this.pe(),this.ea.textArea(a))}ed(a){if(this.props.Nb){var b={position:"absolute",display:"block",wordWrap:"break-word",
whiteSpace:"pre-wrap"};$("paddingTop paddingRight paddingBottom paddingLeft fontSize lineHeight fontFamily width boxSizing letterSpacing fontWeight borderTopWidth borderRightWidth borderBottomWidth borderLeftWidth borderTopStyle borderTopColor borderRightStyle borderBottomStyle borderLeftStyle".split(" ")).each(function(c,d){b[d.toString()]=a.css(d).toString()});var c=$("<div />").css(b);$(document.body).append(c);var d=a.val();c.text((null==d?"":d)+"l");d=c.outerHeight();c.remove();this.setState({pd:d})}}};
var x={};Object.defineProperty(x,"__esModule",{value:!0});var W;(function(a){a[a.START=0]="START";a[a.APPLY=1]="APPLY";a[a.CANCEL=2]="CANCEL"})(W=x.jb||(x.jb={}));var B;(function(a){a[a.za=0]="LABEL";a[a.Va=1]="TEXTAREA"})(B=x.kb||(x.kb={}));class P extends e.Component{constructor(a,b){super(a,b);this.state={visibleComponent:this.props.visibleComponent===B.Va?B.Va:B.za,text:this.props.text,oa:[]};this.Yf=L.Utils.createUrlUtils();this.Ab=this.Ab.bind(this);this.Ib=e.createFactory(O.Yb)}componentWillReceiveProps(a){const b=
{text:a.text,oa:this.state.oa};a.disabled&&(b.visibleComponent=B.za);b.visibleComponent!==a.visibleComponent&&(b.visibleComponent=a.visibleComponent);this.setState(b)}render(){return this.hf()||this.props.disabled?this.Bf():this.Af()}Qf(a,b){let c=[];for(;;){let d=b.getKey(),e=a.indexOf(d);if(0>e){c.push(a);break}c.push(a.substring(0,e));c.push(this.oe(b));a=a.substring(e+d.length)}return c}oe(a){a=a.getKeyText();return e.createElement("span",{className:"comment-text-mention"},a)}kf(a){const b=[];
let c=0;r.Cet.getUrlsInString(a).forEach((d)=>{d.pos>c&&b.push(a.substring(c,d.pos));b.push(e.createElement("a",{href:this.Qe(d.str),target:"_blank"},d.str));c=d.end});b.push(a.substring(c));return b}Qe(a){return ba.isActive("js-redirect-links")?(a=this.Yf.asQueryString({target:a}),`${P.Fd}${a}`):a}bd(a,b){let c=[];a.forEach((a)=>{"string"===typeof a?c=c.concat(b(a)):c.push(a)});return c}Bf(){var a=this.props.className?"koi-editable-label-label "+this.props.className:"koi-editable-label-label";let b=
this.props.mentions.sort((a)=>-a.getKey().length),c=this.state.text?[this.state.text]:[];b.forEach((a)=>{c=this.bd(c,(b)=>this.Qf(b,a))});c=this.bd(c,(a)=>this.kf(a));a=e.createElement("div",{key:`editable-comment-text-label-${this.props.la}`,className:a,onClick:(a)=>{if(null!=this.props.onClick)this.props.onClick(a)},ref:"labelComponent"},c);return this.props.tooltipText?(a={content:a,tooltip:this.props.tooltipText,pointerPosition:this.props.tooltipPosition},h.KoiWidgetsModule.getWidgetFactory().tooltip(a)):
a}Af(){return e.createElement("div",{key:`editable-comment-text-container-${this.props.la}`,className:"editable-comment-text-container"},[this.Ib({key:`editable-comment-text-mention-editor-${this.props.la}`,ref:"inputText",filterContacts:this.props.filterContacts,pa:this.props.la,Xa:(a)=>{const b=A.ta.rc(a);a=this.props.mentions.concat(this.state.oa).filter((a)=>a.getKey()===b.getKey());if(0<a.length)return a[0];this.setState({oa:this.state.oa.concat([b])});return b},textArea:{key:`editable-comment-text-textarea-${this.props.la}`,
defaultValue:this.state.text,onKeyPress:this.Ab,className:"editable-comment-text-textarea",ref:"inputComponentInput",isFocused:!0,selectOnFocus:!0,style:{height:null!==this.props.Ca?this.props.Ca:"auto"}},ma:this.props.fb,Nb:!1}),e.createElement("div",{key:`editable-comment-text-tools-${this.props.la}`,className:"editable-comment-text-tools"},[e.createElement("span",{key:`editable-comment-text-btn-cancel-${this.props.la}`,className:"editable-comment-text-btn-cancel icon-button icon-cross",onClick:()=>
{this.ec("button")}},null),e.createElement("span",{key:`editable-comment-text-btn-apply-${this.props.la}`,className:"editable-comment-text-btn-apply icon-button icon-checkmark",onClick:()=>{this.cc("button")}},null)])])}Ab(a){27===a.keyCode&&(this.ec("keyboard"),a.stopPropagation());"Enter"!==a.key||a.ctrlKey||a.shiftKey||a.metaKey||(this.cc("keyboard"),a.stopPropagation())}cc(a){if(this.Ec()){const b=this.state.text,c=E.findDOMNode(this.refs.inputText.refs.inputText).value.trim()||b;this.setState({visibleComponent:B.za,
text:c,oa:[]});this.props.editActionCallback(W.APPLY,a,b,c,this.state.oa)}}ec(a){this.Ec()&&(this.setState({visibleComponent:B.za,oa:[]}),this.props.editActionCallback(W.CANCEL,a,this.state.text,null,null))}hf(){return this.state.visibleComponent===B.za}Ec(){return this.state.visibleComponent===B.Va}}x.Cd=P;P.Fd="https://prezi.com/url/";P.$f={text:"",editActionCallback:null,la:null,Ca:"auto",getContact:null,filterContacts:null,mentions:[],fb:null};var X={};Object.defineProperty(X,"__esModule",{value:!0});
X.sd=class extends e.Component{constructor(a){super(a);this.state={isEditing:!1,Ca:"auto",na:!1,ub:null,text:this.props.o.getText()}}componentWillReceiveProps(a){this.props.o.getText()!==a.o.getText()&&this.setState({text:a.o.getText()});this.props.isOffline!==a.isOffline&&a.isOffline&&this.setState({isEditing:!1,na:!1})}ob(a){const b=this.props.o.getAuthor();let c="thread-box-comment-container-user-avatar";this.props.o.isDeleted()&&(c+=" comment-deleted");return h.KoiWidgetsModule.getWidgetFactory().avatar({key:`thread-box-comment-container-user-avatar-${a}`,
className:c,avatarUrl:b.getAvatar(),firstName:b.getFirstName(),lastName:b.getLastName(),onClick:()=>{this.avatarClicked()},userName:b.getUsername()})}avatarClicked(){this.props.controller.avatarClicked(this.props.threadId)}sb(a){let b;b=this.props.o.isDeleted()?g.I18n.ts("Deleted comment"):`${this.props.o.getAuthor().getFirstName()} ${this.props.o.getAuthor().getLastName()}`;return h.KoiWidgetsModule.getWidgetFactory().label({key:`thread-box-comment-container-user-name-${a}`,className:"thread-box-comment-container-user-name",
text:b,onClick:()=>{this.nameClicked()}})}nameClicked(){this.props.controller.nameClicked(this.props.threadId)}pb(a){if(this.state.isEditing)return null;var b=this.props.o.isDeleted()?this.props.o.getDeletionTimeSecs():this.props.o.getCreationTimeSecs();const c=Math.floor((new Date).getTime()/1E3)-1;b=K.get({to:Math.min(c,b),units:K.PreziVagueTimeModuleUnits.Second});this.props.o.isModified()&&!this.props.o.isDeleted()&&(b=g.I18n.tsFormatKeys("{comment_date} - edited",{comment_date:b}));return h.KoiWidgetsModule.getWidgetFactory().label({key:`thread-box-comment-container-date-${a}`,
className:"thread-box-comment-container-date",text:b,onClick:()=>{this.dateClicked()}})}dateClicked(){this.props.controller.dateClicked(this.props.threadId)}Ae(a){let b=[];this.state.isEditing||this.props.gf||this.props.isOffline||!this.props.o.getAuthor().isOwnComment()||(b=[e.createElement("span",{key:`thread-box-comment-container-tools-delete-${a}`,className:"thread-box-comment-container-tools-delete icon-button icon-trash",onClick:(a)=>{if(this.state.na)this.setState({na:!1});else{a=$(a.target).parents(".thread-box-comment-container");
let b=0;1===a.length&&(b=a.height());this.setState({na:!0,ub:b});v.avro.Avro.createDefaultLogger().logDeleteComment({comment_thread_id:this.props.threadId})}}}),e.createElement("span",{key:`thread-box-comment-container-tools-edit-${a}`,className:"thread-box-comment-container-tools-edit icon-button icon-edit",onClick:(a)=>{if(this.state.isEditing)this.setState({isEditing:!1});else{a=$(a.target).parents(".thread-box-comment-container").find(".thread-box-comment-container-text");let b="auto";1===a.length&&
(b=a.height()+"px");this.setState({isEditing:!0,Ca:b});v.avro.Avro.createDefaultLogger().logEditComment({comment_thread_id:this.props.threadId})}}})]);return e.createElement("div",{key:`thread-box-comment-container-tools-${a}`,className:"thread-box-comment-container-tools"},...b)}createText(a){return e.createElement(x.Cd,{key:`thread-box-comment-container-text-${a}`,className:"thread-box-comment-container-text selectable-text",la:a,text:this.state.text,visibleComponent:this.state.isEditing?x.kb.Va:
x.kb.za,Ca:this.state.Ca,mentions:this.props.o.getMentions(),fb:this.props.fb,onClick:()=>{this.textClicked()},editActionCallback:(a,c,e,g,h)=>{a===x.jb.APPLY?(a=d.EditCommentTrigger.CLICK,"keyboard"===c&&(a=d.EditCommentTrigger.ENTER),this.props.controller.editComment(this.props.threadId,this.props.o.getCommentUuid(),g,this.props.o.getMentions().concat(h),a),this.setState({isEditing:!1,text:g})):a===x.jb.CANCEL&&this.setState({isEditing:!1,text:e})},getContact:(a)=>this.props.controller.getContact(a),
filterContacts:(a)=>this.props.controller.filterContacts(a)})}textClicked(){this.props.controller.textClicked(this.props.threadId)}ee(a){const b=this.state.na?"visible":"hidden";return[e.createElement("div",{key:`thread-box-comment-container-delete-confirm-${a}`,className:"thread-box-comment-container-delete-confirm",style:{visibility:b}}),h.KoiWidgetsModule.getWidgetFactory().button({className:"small thread-box-comment-container-delete-confirm-btn-cancel",onClick:()=>{this.setState({na:!1})},style:{visibility:b,
top:this.state.ub/2},text:g.I18n.ts("Cancel")}),h.KoiWidgetsModule.getWidgetFactory().button({className:"small thread-box-comment-container-delete-confirm-btn-delete",onClick:()=>{this.props.controller.deleteComment(this.props.threadId,this.props.o.getCommentUuid(),()=>{this.setState({na:!1})},()=>{})},style:{visibility:b,top:this.state.ub/2},text:g.I18n.ts("Delete")})]}fe(a){return this.props.o.isDeleted()?[e.createElement("div",{key:`thread-box-comment-container-deleted-bg-${a}`,className:"thread-box-comment-container-deleted-bg"})]:
[]}ie(a){return this.props.o.isDeleted()||!this.props.o.getAuthor().isOwnComment()||this.props.isOffline?[]:[e.createElement("div",{key:`thread-box-comment-container-hover-bg-${a}`,className:"thread-box-comment-container-hover-bg"})]}ce(a){return e.createElement("div",{key:`thread-box-comment-container-${a}`,className:`thread-box-comment-container
					${this.state.isEditing?" editing":""}
					${this.state.na?" deleting":""}
					${this.props.o.isDeleted()?" deleted":""}
					${0===this.props.index?" first":""}`},[this.fe(a),this.ie(a),this.ob(a),this.sb(a),this.pb(a),this.Ae(a),this.createText(a),this.ee(a)])}render(){const a=`${this.props.threadId}-${this.props.index}`;return e.createElement("div",{key:`thread-box-comment-${a}`,"data-lookup":`${d.Lookup.COMMENT_ITEM}:${this.props.threadId}:${this.props.index}`},[this.ce(a)])}};var Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.Hd=class extends e.Component{constructor(a){super(a);const b=a.j.getThread();
this.state={xa:!1,Pa:!a.isOffline,Gb:!0,Ea:!1,text:null==b?null:b.getDraft()};this.Yd=e.createFactory(X.sd);this.Ib=e.createFactory(O.Yb);this.ea=h.KoiWidgetsModule.getWidgetFactory()}sc(a,b=""){let c=b;switch(a){case d.CommentingServiceCallState.Ready:c+="ready";break;case d.CommentingServiceCallState.Saved:c+="saved";break;case d.CommentingServiceCallState.Pending:c+="pending";break;case d.CommentingServiceCallState.Error:c+="error"}this.props.isOffline&&(c+=" "+b+"offline");return c}qe(){return 0===
this.props.j.getThread().getPendingMentions().filter((a)=>this.state.text&&-1!==this.state.text.indexOf(a.getKey())).length?null:e.createElement("div",{key:"thread-box-mention-share-warning",className:"thread-box-mention-share-warning"},this.re(),this.se())}re(){const a=e.createElement("span",{className:"icon-add-user"});return e.createElement("div",{className:"thread-box-mention-share-warning-icon"},a)}se(){var a=g.I18n.ts("Any tagged users will be added as a collaborator of this prezi.");a=e.createElement("span",
{},a);return e.createElement("div",{className:"thread-box-mention-share-warning-text"},a)}ja(){const a=this.refs.inputText;return null==a?{cf:null,Oa:null,La:null,value:null}:a.ja()}me(){let a=this.props.j.getThread();if(this.props.permissions.canComment&&null!=a){const b=this.sc(a.getCommentingState(),"commenting-state-");return e.createElement("div",{key:"thread-box-input-group",className:"thread-box-input-group "+b},this.qb(),this.Be(),this.ea.inputGroup({ref:"inputGroup",children:[this.Ib({key:`${d.Lookup.COMMENT_INSERT_INPUT}-mention-editor-${a.getId()}`,
ref:"inputText",filterContacts:(a)=>this.props.controller.filterContacts(a),pa:this.props.j.getEntityId(),Xa:(a)=>this.Xa(a),textArea:{placeholder:g.I18n.ts("Type your comment here"),"data-lookup":`${d.Lookup.COMMENT_INSERT_INPUT}:${a.getId()}`,key:`${d.Lookup.COMMENT_INSERT_INPUT}-${a.getId()}`,maxLength:500,selectOnFocus:!0,isFocused:this.props.opened,defaultValue:a.getDraft(),disabled:a.getCommentingState()===d.CommentingServiceCallState.Pending||!this.state.Pa,style:{maxHeight:61,minHeight:29},
onKeyPress:(a)=>{"Enter"!==a.key||a.ctrlKey||a.shiftKey||a.metaKey||(a.preventDefault(),this.state.xa&&this.gc(d.AddCommentTrigger.ENTER))},onChange:()=>{const {value:a}=this.ja();this.jd(a);this.setState({text:a,Ea:!1})}},ma:this.xc(a),Nb:!0}),this.ea.button({onClick:()=>{this.state.xa&&this.gc(d.AddCommentTrigger.CLICK)},key:`${d.Lookup.COMMENT_INSERT_BUTTON}-${a.getId()}`,className:"icon-comment"+(this.state.Ea?" thread-box-blinking-button":""),disabled:a.getCommentingState()===d.CommentingServiceCallState.Pending||
!this.state.xa,lookupId:`${d.Lookup.COMMENT_INSERT_BUTTON}:${a.getId()}`})]}))}return null}xc(a){return{mentionPopupDisplays:(b)=>this.props.controller.mentionPopupDisplays(a,b),mentionPopupAddedUser:(b)=>this.props.controller.mentionPopupAddedUser(a,b),mentionPopupClosedByKeyboard:(b)=>this.props.controller.mentionPopupClosedByKeyboard(a,b),mentionPopupClosedByClick:()=>this.props.controller.mentionPopupClosedByClick(a)}}qb(){return e.createElement("div",{className:"thread-box-error-label"},e.createElement("i",
{className:"icon-warning"}),g.I18n.ts("We could not upload your comment"))}Be(){return e.createElement("div",{className:"thread-box-warning-label"},e.createElement("i",{className:"icon-warning"}),g.I18n.ts("You must be online to comment."))}gc(a){const {value:b}=this.ja();this.setState({xa:!1,Gb:!0,Ea:!1});this.props.controller.addComment(this.props.j.getThread().getId(),b,this.props.j.getThread().getPendingMentions(),a)}componentWillReceiveProps(a){const b=this.props.j.getThread(),c=a.j.getThread(),
{Oa:e}=this.ja();let g=!1;this.props.isOffline!==a.isOffline&&(a.isOffline?this.setState({xa:!1,Pa:!1}):this.setState({xa:!0,Pa:!0}));this.props.opened&&!a.opened&&(this.props.controller.popupClosed(this.props.j.getEntityId(),null!=e?e.value:null),this.setState({Ea:!1}));!this.props.opened&&a.opened&&(g=!0);null!=e&&(null!=c&&c.getCommentingState()===d.CommentingServiceCallState.Pending?g=!0:(null==b||null==c||b.getCommentingState()!==d.CommentingServiceCallState.Pending||c.getCommentingState()!==
d.CommentingServiceCallState.Saved&&c.getCommentingState()!==d.CommentingServiceCallState.Ready||(e.value="",g=!0,this.setState({text:""})),this.jd(e.value)));this.setState({Gb:g})}jd(a){this.setState({xa:null!=a&&0<a.length&&!this.props.isOffline})}we(){let a=this.props.j.getThread();if(null==a||null==this.props.anchorNode||!this.props.permissions.canResolveThreads&&!a.canResolveThisThread()||0>=a.getCommentCount()||a.isResolved()||!this.state.Pa)return null;const b=this.sc(a.getResolveState(),"resolve-state-");
return e.createElement("div",{key:"thread-box-header",className:"thread-box-header "+b},this.ea.button({text:g.I18n.ts("End thread"),className:"thread-box-resolve-button",onClick:()=>{this.Tf()},lookupId:`${d.Lookup.THREAD_RESOLVE_BUTTON}:${a.getId()}`}),this.ea.label({className:"thread-box-header-error-label icon-warning",text:g.I18n.ts("Something went wrong.")}))}ue(){let a=this.props.j.getThread();return null==a||null==this.props.anchorNode||0!==a.getCommentCount()?null:e.createElement("div",{key:"thread-box-placeholder",
className:"thread-box-placeholder"},e.createElement("div",{key:"thread-box-placeholder-img",className:"thread-box-placeholder-img"}))}Cb(){return!this.props.sf&&0!==this.props.j.getInsideThreadCount()}ne(){if(!this.Cb())return null;let a=this.props.j.getInsideThreadCount();return e.createElement("div",{key:"thread-box-inside-comment",className:"thread-box-inside-comment"},this.ea.button({text:g.I18n.ts("Zoom in"),className:"thread-box-inside-comment-button",onClick:()=>{this.zoomIn()},lookupId:`${d.Lookup.INSIDE_COMMENT_ZOOM_IN_BUTTON}:${this.props.j.getEntityId()}`}),
this.ea.label({key:"thread-box-inside-comment-label",className:"thread-box-inside-comment-label",text:this.Ke(a)}))}Ke(a){return 1===a?g.I18n.ts("There is one comment thread inside this chapter."):g.I18n.tsFormatKeys("There are {count} comment threads inside this chapter.",{count:a})}zoomIn(){this.props.controller.zoomIn(this.props.j.getEntityId())}Tf(){this.props.controller.resolveThread(this.props.j.getThread().getId())}Pf(a){return null!=a&&0<a.getCommentCount()&&!(1===a.getCommentCount()&&a.getComments()[0].isDeleted())&&
this.props.j.isThreadActive()}tb(){let a=this.props.j.getThread(),b=this.Pf(a)?a.getComments().map((b,d)=>({children:[this.Yd({key:d.toString(),o:b,index:d,threadId:a.getId(),gf:a.isResolved()||!this.state.Pa,isOffline:this.props.isOffline,controller:this.props.controller,fb:this.xc(a)})],onRemove:null})):[];return[this.ne()].concat(this.props.j.isThreadActive()?[this.ea.label({key:"thread-box-placeholder-label",className:"thread-box-placeholder-label",text:da(this.props.controller.getTargetObjectType(a))}),
this.we(),this.ue(),this.ea.list({key:"list",ref:"listComponent",className:"thread-box-comments-list",isLoading:!1,items:b,gradientFader:!0,scrollToBottom:this.state.Gb}),this.me(),this.qe()]:[])}rb(){if(null==this.props.anchorNode||"none"===this.props.anchorNode.style.display)return null;let a=null!=this.state.text&&0<this.state.text.length&&!this.state.Ea&&this.props.opened;return this.ea.fixedSizeFloatingPopup({key:`thread-box-${this.props.j.getEntityId()}`,preferredAnchorOrientation:h.KoiFixedSizeFloatingPopupAnchorOrientation.LEFT,
className:"thread-box-popup-floating-popup"+(this.props.j.isThreadActive()?this.Cb()?" thread-box-popup-with-inside-comment":"":" thread-box-popup-inside-comment-only"),contentClassName:"threadbox-popup-content",lookupId:`${d.Lookup.THREAD_BOX_POPUP}:${this.props.j.getEntityId()}`,content:this.tb(),visible:this.props.opened,anchorNode:this.props.anchorNode,width:276,height:this.props.j.isThreadActive()?321:50,topMargin:this.Cb()&&this.props.j.isThreadActive()?154:92,showCover:a,onCoverClick:()=>{this.setState({Ea:!0})},
appearWithAnimation:!1})}Xa(a){return this.props.controller.addContactToPendingMentions(this.props.j.getEntityId(),a)}render(){return e.createElement("div",{},this.rb())}shouldComponentUpdate(a,b){return!L.Utils.shallowCompare(this.props,a)||!L.Utils.shallowCompare(this.state,b)}};var Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.Id=class extends e.Component{constructor(a){super(a);this.state={}}ve(){const a=e.createFactory(Y.Hd);return this.props.threadList.getThreadInfos().map((b)=>{const c=
b.getEntityId();return a({key:`thread-box-popup-${c}`,j:b,sf:this.props.selectedEntityId===c,opened:this.props.openedPopupId_KILLME===d.CommentingModule.createThreadboxPopupId(c)&&(this.props.selectedEntityId!==c||b.isThreadActive()),anchorNode:this.props.controller.getThreadIconNode(c),permissions:this.props.permissions,controller:this.props.controller,isOffline:this.props.isOffline})})}render(){return e.createElement("div",{className:"koi-editor-ui-comment-thread-box-popups"},this.ve())}shouldComponentUpdate(a){return d.CommentingModule.isThreadboxPopupId(this.props.openedPopupId_KILLME)||
d.CommentingModule.isThreadboxPopupId(a.openedPopupId_KILLME)}};var aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.yd=class{constructor(a){this.aa=a;this.Rf=e.createFactory(Z.Id);this.$d=e.createFactory(T.wd)}createCommentingMenu(a,b){return this.$d({threadList:this.aa.getThreadList(),controller:this.aa,enabled:1===b,opened:a===k.Tb,paywallMode:this.aa.isPaywallMode(),learnMoreLinkClickedCallback:()=>{this.aa.logLinkClicked()}})}createThreadBoxPopupCollection(a,b,c){b=!ba.isActive("js-commenting-always-online")&&
1!==c;a={threadList:this.aa.getThreadList(),openedPopupId_KILLME:a,selectedEntityId:this.aa.getSelectedEntityId(),permissions:this.aa.getPermissions(),controller:this.aa,isOffline:b};return this.Rf(a)}isPaywallMode(){return this.aa.isPaywallMode()}};q={};Object.defineProperty(q,"__esModule",{value:!0});q.xd=class{constructor(){this.ic=L.Utils.createSingletonAccess((a,b)=>new k.sa(a,b))}createCommentingController(a,b){return this.ic.create(a,b)}getCommentingController(){return this.ic.getValue()}createCommentingSection(a){return new aa.yd(a)}createThreadboxPopupId(a){return d.COMMENTING_POPUPID_PREFIX+
a}isThreadboxPopupId(a){return null!=a&&a.substr(0,d.COMMENTING_POPUPID_PREFIX.length)===d.COMMENTING_POPUPID_PREFIX}};var d={};Object.defineProperty(d,"__esModule",{value:!0});(function(a){a[a.Ready=0]="Ready";a[a.Saved=1]="Saved";a[a.Pending=2]="Pending";a[a.Error=3]="Error"})(d.CommentingServiceCallState||(d.CommentingServiceCallState={}));(function(a){a[a.ZOBJECT=0]="ZOBJECT";a[a.OVERVIEW=1]="OVERVIEW"})(d.ThreadType||(d.ThreadType={}));(function(a){a[a.INSERT_MENU=0]="INSERT_MENU";a[a.PUCUKA=
1]="PUCUKA";a[a.PROPERTY_BAR=2]="PROPERTY_BAR";a[a.CONTEXT_MENU=3]="CONTEXT_MENU";a[a.DEEP_LINK=4]="DEEP_LINK";a[a.COMMENT_MENU=5]="COMMENT_MENU";a[a.PLAYER_UI=6]="PLAYER_UI"})(d.OpenCommentThreadTrigger||(d.OpenCommentThreadTrigger={}));(function(a){a[a.INSERT_MENU=0]="INSERT_MENU";a[a.TOPMENU=1]="TOPMENU"})(d.OpenCommentMenuSource||(d.OpenCommentMenuSource={}));(function(a){a[a.ENTER=0]="ENTER";a[a.CLICK=1]="CLICK"})(d.AddCommentTrigger||(d.AddCommentTrigger={}));(function(a){a[a.ENTER=0]="ENTER";
a[a.CLICK=1]="CLICK"})(d.EditCommentTrigger||(d.EditCommentTrigger={}));(function(a){a[a.ENTER=0]="ENTER";a[a.CLICK=1]="CLICK"})(d.AddMentionTrigger||(d.AddMentionTrigger={}));(function(a){a[a.EDIT=0]="EDIT";a[a.AT_SIGN=1]="AT_SIGN"})(d.ShowMentionPopupTrigger||(d.ShowMentionPopupTrigger={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.OBJECT=1]="OBJECT";a[a.LINE=2]="LINE";a[a.ARROW=3]="ARROW";a[a.TOPIC=4]="TOPIC";a[a.SUBTOPIC=5]="SUBTOPIC";a[a.OVERVIEW=6]="OVERVIEW";a[a.IMAGE=7]="IMAGE";a[a.PDF=8]=
"PDF";a[a.VIDEO=9]="VIDEO";a[a.TEXT=10]="TEXT";a[a.FADE_IN=11]="FADE_IN";a[a.FADE_OUT=12]="FADE_OUT";a[a.ZOOM_TO=13]="ZOOM_TO";a[a.PAGE=14]="PAGE";a[a.CHART=15]="CHART"})(d.TargetObjectType||(d.TargetObjectType={}));(function(a){a.THREAD_ICON="thread-icon";a.THREAD_BOX_POPUP="thread-box-popup";a.COMMENT_INSERT_INPUT="comment-insert-input";a.COMMENT_INSERT_BUTTON="comment-insert-button";a.COMMENT_ITEM="comment-item";a.THREAD_RESOLVE_BUTTON="thread-resolve-button";a.INSIDE_COMMENT_ZOOM_IN_BUTTON="thread-box-inside-comment-button";
a.COMMENTING_MENU_BUTTON="commenting-menu-button";a.COMMENTING_MENU_DROPDOWN="commenting-menu-dropdown";a.MENTION_POPUP="thread-box-mention-popup";a.MENTION_POPUP_CONTENT="thread-box-mention-popup-content";a.MENTION_POPUP_CONTENT_EMPTY="thread-box-mention-popup-content-empty";a.MENTION_POPUP_CONTACT_ITEM="thread-box-mention-popup-contact-item";a.THREAD_ITEM="thread-item"})(d.Lookup||(d.Lookup={}));d.CommentingModule=new q.xd;d.COMMENTING_POPUPID_PREFIX="THREADBOX-";J=d;q=document.createElement("style");
q.textContent='.koi-editor-ui-comment-thread-box-popups .koi-tooltip .koi-floating-popup-container{box-shadow:none;border:1px solid rgba(255,255,255,0.3);background:none}.koi-editor-ui-comment-thread-box-popups .koi-tooltip .koi-floating-popup-container .koi-floating-popup-pointer{border:1px solid rgba(255,255,255,0.3);box-shadow:none;background:#152235;z-index:1}.koi-editor-ui-comment-thread-box-popups .koi-tooltip .koi-floating-popup-container .koi-floating-popup-pointer-shadow{z-index:0}.koi-editor-ui-comment-thread-box-popups .koi-tooltip .koi-floating-popup-container .koi-floating-popup-content{font-family:"RalewayMedium";font-size:11px;letter-spacing:.5px;padding:6px 12px;color:#fff;background:#152235;height:auto;z-index:2}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content{height:321px;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:0}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-inside-comment{display:block;margin:12px;padding:10px;background-color:#152235;box-shadow:0 1px 3px rgba(21,34,53,0.5);border-radius:3px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-inside-comment .thread-box-inside-comment-label{color:#fff;line-height:1.4;font-size:11px;letter-spacing:.5px;font-family:"RalewaySemiBold";white-space:normal}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-inside-comment .thread-box-inside-comment-button{float:right;font-size:13px;height:24px;letter-spacing:.5px;font-family:"RalewaySemiBold";color:#fff;background-color:#152235;border:solid 1px #fff;border-radius:3px;margin-top:3px;margin-left:6px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-placeholder-label{background-color:#eceef1;font-family:"RalewayMedium";font-size:11px;letter-spacing:.5px;color:#152235;padding:6px 46px;top:6px;position:relative}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-placeholder .thread-box-placeholder-img{width:212px;height:100px;margin:20px 0 0 10px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaYAAABiCAMAAAAsoYcnAAAAPFBMVEUAAADt7/Ls7vHs7vLt7/L////t7/Ls7/Hs7/Ht7vHs7/Lt7/Ps7/Pu8PPv7/Ls8fHs9vbw8P/////s7vHMT6MXAAAAE3RSTlMA9/LmXgns28u3r498Zk43GxED8BkukAAAAfFJREFUeNrs3EeOAzEMRFEqdc51/7vOdgDPKHhhUnC9K3zY6G6JlBfpWOdxcG4Y5/VIQgbdcfH4xS/xFrIlbR4v/MaflCXPHvCnsD9CRlwT/jVdQiacARnhFDIgOmS5KKQuooid1J0ORe6UHHwh+awroEK4mEkz0zOhyvQwk2KmHZV2ZtLLlAIqhcRMapk2VNuYSSvT7VHN38yklCmiQWQmpUwLGizMpJMpeTTwiZlUMh1ocjCTSqYVTVZmUsk0o8nMTCqZRjQZmUkl04AmAzOpZHJo4piJmTojGfzTM0Ny+AhhhWTxgdwIyePrrQ1SwI9FJkgRP70aIAU8yDBByngsqE/KeMiuT8p4ZUWfVOEFsDZ9Z+J1yj4y8XJyF5lqr/pzZPA9lgZnKItjaN+EQ5194Ih0H7hwoA9c39EJLsPpBFdL9YKL2ojopx07OGEgCGIgGITyz9URiMPYjxFXFcAuqH/Ds/zZ06vr/31HJpmWZpNpYjaZJmaTaWI2mSZmk2liNpkmZpNpYjaZJmaTaWI2mSZmk2liNpkmZpNpYjaZJmaTaWK2l2QCAAAAALakcyS9I51Md6ST6Y50Mt2RTqY70sl0RzqZ7kgn0x3pZLojnUx3pJPpjnQy3ZFOpjvSyXRHOpnuSCfTHelkuiOdTD/7ALtTv8hoXjtNAAAAAElFTkSuQmCC) no-repeat top left / 211px 49px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-header{display:block;height:36px;margin-top:6px;padding:12px 12px 0 12px;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-header.resolve-state-ready .thread-box-header-error-label{display:none}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-header.resolve-state-saved .thread-box-header-error-label{display:none}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-header.resolve-state-pending .thread-box-header-error-label{display:none}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-header.resolve-state-error{height:54px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-header.resolve-state-error .thread-box-header-error-label{display:block;clear:both}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-header .thread-box-header-error-label{background-color:#df0000;color:#fff;padding:6px 18px;margin:12px -12px;top:6px;position:relative;font-size:11px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-header .thread-box-header-error-label:before{margin-right:18px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-header .thread-box-resolve-label{color:#8e939c;display:inline-block;float:right;line-height:15px;margin-right:12px;margin-top:6px;font-size:11px;letter-spacing:.5px;font-family:"RalewayMedium"}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-header .thread-box-resolve-button{float:left;font-size:13px;margin-left:12px;height:24px;background-color:#c2c7cd;letter-spacing:.5px;padding-right:12px;padding-left:12px;font-family:"RalewaySemiBold";color:#152235}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list{display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-ms-flex-positive:1;flex-grow:1;width:276px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .gradient-fader{right:0}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .koi-infinite-scroll-outer{position:absolute}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .koi-infinite-scroll-outer .koi-infinite-scroll-mid{overflow-y:auto;overflow-x:hidden}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .koi-infinite-scroll-outer .koi-infinite-scroll-mid .koi-infinite-scroll-inner{box-sizing:border-box;height:100%;margin:0;padding:0 12px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .koi-list-item-container{padding-left:0;padding-right:0;padding-top:9px;padding-bottom:9px;border:none;position:relative}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .thread-box-comment-container-user-avatar{float:left}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .thread-box-comment-container-hover-bg{background-color:#eceef1;left:-12px;right:-36px;top:0;bottom:0;position:absolute;z-index:-1;visibility:hidden}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .thread-box-comment-container-deleted-bg{background-color:#eceef1;left:-12px;right:-36px;top:0;bottom:0;position:absolute;z-index:-1}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .thread-box-comment-container-user-name{font-weight:bold;overflow:visible;font-size:13px;color:#152235;padding-left:36px;line-height:18px;letter-spacing:.5px;font-family:"RalewaySemiBold";white-space:normal;width:210px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .thread-box-comment-container-date{padding-left:36px;font-size:11px;color:#8e939c;line-height:18px;letter-spacing:.5px;width:210px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .icon-button{font-size:16px;cursor:pointer}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .thread-box-comment-container-tools{position:absolute;right:-6px;top:6px;visibility:hidden}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .thread-box-comment-container-tools .thread-box-comment-container-tools-delete{margin-right:6px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .thread-box-comment-container-text{padding-left:36px;line-height:15px;max-width:204px;font-size:11px;white-space:pre-line;word-wrap:break-word;letter-spacing:.5px;width:210px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .thread-box-comment-container-delete-confirm{position:absolute;top:0;left:-12px;right:-36px;height:100%;background-color:#152235;opacity:.8}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .koi-button{padding:0 6px;position:absolute;cursor:pointer;font-family:"RalewaySemiBold";min-width:72px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .thread-box-comment-container-delete-confirm-btn-delete{background-color:#df4840;color:#fff;left:30px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .thread-box-comment-container-delete-confirm-btn-cancel{background-color:#dbdfe5;color:#152235;right:6px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container:hover .thread-box-comment-container-tools,.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container.editing .thread-box-comment-container-tools{visibility:visible}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container:hover .thread-box-comment-container-hover-bg,.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container.editing .thread-box-comment-container-hover-bg{visibility:visible}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container.deleting .thread-box-comment-container-tools{visibility:hidden}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .editable-comment-text-container .koi-list-container.mention-popup-contact-list{display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-ms-flex-positive:1;flex-grow:1;margin:12px 0 12px 0}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .editable-comment-text-container .koi-list-container.mention-popup-contact-list .gradient-fader{right:0}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .editable-comment-text-container .koi-list-container.mention-popup-contact-list .koi-infinite-scroll-outer{position:absolute}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .editable-comment-text-container .koi-list-container.mention-popup-contact-list .koi-infinite-scroll-outer .koi-infinite-scroll-mid{overflow-x:hidden}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .editable-comment-text-container .koi-list-container.mention-popup-contact-list .koi-infinite-scroll-outer .koi-infinite-scroll-mid .koi-infinite-scroll-inner{padding:0;margin:0;font-size:11px;letter-spacing:.4px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .editable-comment-text-container .koi-list-container.mention-popup-contact-list .koi-list-item-container{padding-left:15px;padding-right:0;padding-top:0;padding-bottom:0;border:none;position:relative;height:24px;width:100%}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .editable-comment-text-container .koi-list-container.mention-popup-contact-list .koi-list-item-container.selected{background:#3181ff;color:#fff}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .editable-comment-text-container .koi-list-container.mention-popup-contact-list .koi-list-item-container .mention-popup-contact-item{cursor:pointer;position:absolute;top:5px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .editable-comment-text-container .editable-comment-text-textarea{line-height:15px;max-width:204px;font-size:11px;white-space:pre-line;letter-spacing:.5px;width:205px;resize:none;padding:6px 0 6px 11px;overflow:hidden;min-height:15px;font-family:\'RalewayMedium\';border:1px solid #c2c7cd;border-radius:3px;margin-top:4px;box-sizing:content-box}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .editable-comment-text-container .editable-comment-text-tools{position:absolute;right:-6px;top:6px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container .editable-comment-text-container .editable-comment-text-tools .editable-comment-text-btn-cancel{margin-right:6px;font-size:18px;display:block;float:left}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container.deleted{margin-top:-6px;margin-bottom:-6px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container.deleted.first{margin-top:6px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container.deleted.first .thread-box-comment-container-deleted-bg{top:12px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container.deleted .thread-box-comment-container-user-avatar{display:none}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .koi-list-container.thread-box-comments-list .thread-box-comment-container.deleted .thread-box-comment-container-user-name{float:left;width:auto;font-size:11px;padding-right:4px;color:#8e939c}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group{padding:0 12px 12px 12px;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group .thread-box-warning-label{display:none}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group.commenting-state-ready .thread-box-error-label{display:none}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group.commenting-state-saved .thread-box-error-label{display:none}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group.commenting-state-pending .thread-box-error-label{display:none}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group.commenting-state-error .thread-box-error-label{display:block}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group.commenting-state-offline .thread-box-warning-label{display:block}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group .thread-box-error-label,.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group .thread-box-warning-label{background-color:#df0000;color:#eceef1;padding:6px 18px;margin:12px -12px;font-family:"RalewayMedium";font-size:11px;overflow:hidden;text-overflow:ellipsis}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group .thread-box-error-label .icon-warning,.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group .thread-box-warning-label .icon-warning{margin-right:6px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group .thread-box-warning-label{background-color:#f1d236;color:#152235}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group .koi-input-group{padding-top:12px;margin-left:-12px;margin-right:-12px;border-top:1px solid #dbdfe5}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group .koi-input-group .koi-text-field{margin-left:24px;border:1px solid #c2c7cd;border-radius:3px 0 0 3px;font-family:"RalewayMedium";font-size:11px;line-height:15px;letter-spacing:.5px;color:#8e939c;width:187px;min-width:187px;max-width:187px;margin-right:-1px;height:29px;max-height:29px;min-height:29px;padding:6px 6px 6px 12px;resize:none;box-sizing:border-box}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group .koi-input-group .koi-text-field:disabled{color:#c2c7cd;border-color:#dbdfe5}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container .threadbox-popup-content .thread-box-input-group .koi-input-group .koi-button{background-color:#c2c7cd;border:1px solid #c2c7cd;letter-spacing:.5px;padding-right:9px;padding-left:9px;color:#152235;font-size:22px}@-webkit-keyframes thread-box-button-blinking-animation{0%{background-color:#dbdfe5}100%{background-color:#8e939c}}@keyframes thread-box-button-blinking-animation{0%{background-color:#dbdfe5}100%{background-color:#8e939c}}.koi-editor-ui-comment-thread-box-popups .thread-box-blinking-button{-webkit-animation:thread-box-button-blinking-animation .5s infinite alternate;animation:thread-box-button-blinking-animation .5s infinite alternate}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-with-inside-comment .koi-fixed-size-floating-popup-container .koi-fixed-size-floating-popup-content{height:321px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-with-inside-comment .koi-fixed-size-floating-popup-container .koi-fixed-size-floating-popup-content .thread-box-inside-comment{margin:-62px 0 0;position:absolute;left:0;right:0}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-inside-comment-only .koi-fixed-size-floating-popup-container .koi-fixed-size-floating-popup-content{height:50px}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-inside-comment-only .koi-fixed-size-floating-popup-container .koi-fixed-size-floating-popup-content .thread-box-inside-comment{margin:0}.koi-editor-ui-comment-thread-box-popups .thread-box-popup-inside-comment-only .koi-fixed-size-floating-popup-container .koi-fixed-size-floating-popup-pointer{background:#152235}.thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container>.koi-fixed-size-floating-popup-content{z-index:1}.thread-box-popup-floating-popup .koi-fixed-size-floating-popup-container>.koi-fixed-size-floating-popup-pointer{z-index:0}.thread-box-popup-floating-popup .koi-fixed-size-floating-popup-cover{opacity:0}.comment-text-mention{font-family:"RalewayBold"}.comment-text-mention .koi-tooltip{display:inline}.comment-text-mention .koi-tooltip>div{display:inline}.thread-box-popup-floating-popup .thread-box-mention-share-warning{margin-bottom:12px;padding:0 12px}.thread-box-popup-floating-popup .thread-box-mention-share-warning .thread-box-mention-share-warning-icon{float:left;margin-right:12px}.thread-box-popup-floating-popup .thread-box-mention-share-warning .thread-box-mention-share-warning-icon .icon-add-user{font-size:18px}.thread-box-popup-floating-popup .thread-box-mention-share-warning .thread-box-mention-share-warning-text{float:left;font-family:"RalewayMedium";font-size:11px;letter-spacing:.5px;white-space:normal;width:calc(100% - 30px)}.commenting-menu-paywall-box{width:228px;background-color:rgba(21,34,52,0.9);font-family:"RalewayMedium";font-size:13px;line-height:1.38;letter-spacing:.5px;padding:24px}.commenting-menu-paywall-box .commenting-menu-paywall-box-title{color:#dfab29;margin-bottom:7px;text-transform:uppercase}.commenting-menu-paywall-box .commenting-menu-paywall-box-info{font-family:"RalewayRegular";color:#fff;width:228px;white-space:normal}.commenting-menu-paywall-box .commenting-menu-paywall-box-buttons{margin:24px 0 0 0}.commenting-menu-paywall-box .commenting-menu-paywall-box-buttons .contact-sales-button.koi-button{width:148px;height:30px;font-size:13px;border-radius:3px;background-color:#dfab29;letter-spacing:1px;text-align:center;color:#fff;cursor:pointer;margin:0 24px 0 0}.commenting-menu-paywall-box .commenting-menu-paywall-box-buttons .commenting-menu-paywall-box-learnmore-wrapper{font-family:"RalewayMedium";color:#fff;text-decoration:underline;margin:17px 0 0 0}.commenting-menu-paywall-box .commenting-menu-paywall-box-buttons .commenting-menu-paywall-box-learnmore-wrapper a{color:#fff}.commenting-menu-paywall-box .commenting-menu-paywall-box-buttons .commenting-menu-paywall-box-learnmore-wrapper a:hover,.commenting-menu-paywall-box .commenting-menu-paywall-box-buttons .commenting-menu-paywall-box-learnmore-wrapper a:active{color:#fff}.thread-box-mention-popup .koi-fixed-size-floating-popup-container{overflow:hidden}.thread-box-mention-popup .koi-fixed-size-floating-popup-content{padding:0;display:block}.thread-box-mention-popup-container{display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.koi-list-container.mention-popup-contact-list{display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-ms-flex-positive:1;flex-grow:1;margin:12px 0 12px 0}.koi-list-container.mention-popup-contact-list .gradient-fader{right:0}.koi-list-container.mention-popup-contact-list .koi-infinite-scroll-outer{position:absolute}.koi-list-container.mention-popup-contact-list .koi-infinite-scroll-outer .koi-infinite-scroll-mid{overflow-x:hidden}.koi-list-container.mention-popup-contact-list .koi-infinite-scroll-outer .koi-infinite-scroll-mid .koi-infinite-scroll-inner{padding:0;margin:0;font-size:11px;letter-spacing:.4px}.koi-list-container.mention-popup-contact-list .koi-list-item-container{padding-left:15px;padding-right:0;padding-top:0;padding-bottom:0;border:none;position:relative;height:24px;width:100%}.koi-list-container.mention-popup-contact-list .koi-list-item-container.selected{background:#3181ff;color:#fff}.koi-list-container.mention-popup-contact-list .koi-list-item-container .mention-popup-contact-item{cursor:pointer;position:absolute;top:5px}.thread-box-mention-popup-empty{font-family:"RalewayMedium";font-size:11px;line-height:1.4;letter-spacing:.5px;color:#152235;white-space:pre-wrap;margin:15px}.comment-deleted{background-color:#c2c7cd !important}.comment-deleted *,.comment-deleted *:after,.comment-deleted *:before{box-sizing:content-box}.domLayer *,.domLayer *:after,.domLayer *:before{box-sizing:content-box}.domLayer .thread_handler_icon{width:38px;height:38px;box-sizing:border-box;padding:0;pointer-events:none}.domLayer .thread_handler_icon div{box-sizing:border-box;width:24px;height:24px;background-image:url("data:image/svg+xml,%3Csvg width=\'16\' height=\'16\' viewBox=\'0 0 16 16\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath fill-rule=\'evenodd\' clip-rule=\'evenodd\' d=\'M4 4C3.44772 4 3 4.44772 3 5V11C3 11.5523 3.44772 12 4 12H6.66602L9.33268 14V12H12C12.5523 12 13 11.5523 13 11V5C13 4.44772 12.5523 4 12 4H4Z\' fill=\'white\'/%3E%3C/svg%3E%0A");background-position-x:2px;background-position-y:2px;background-color:#ffc805;border-radius:50%;border:solid 2px #fff;cursor:pointer;pointer-events:auto;display:block;margin-top:6px;margin-left:6px;box-shadow:0 3px 6px rgba(21,34,53,0.5)}.domLayer .thread_handler_icon.show-dots div{background-image:url("data:image/svg+xml,%3Csvg width=\'16\' height=\'16\' viewBox=\'0 0 16 16\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath fill-rule=\'evenodd\' clip-rule=\'evenodd\' d=\'M5.5 8C5.5 8.82843 4.82843 9.5 4 9.5C3.17157 9.5 2.5 8.82843 2.5 8C2.5 7.17157 3.17157 6.5 4 6.5C4.82843 6.5 5.5 7.17157 5.5 8ZM9.5 8C9.5 8.82843 8.82843 9.5 8 9.5C7.17157 9.5 6.5 8.82843 6.5 8C6.5 7.17157 7.17157 6.5 8 6.5C8.82843 6.5 9.5 7.17157 9.5 8ZM12 9.5C12.8284 9.5 13.5 8.82843 13.5 8C13.5 7.17157 12.8284 6.5 12 6.5C11.1716 6.5 10.5 7.17157 10.5 8C10.5 8.82843 11.1716 9.5 12 9.5Z\' fill=\'white\'/%3E%3C/svg%3E%0A")}.koi-topmenu *,.koi-topmenu-desktop *,.koi-topmenu *:after,.koi-topmenu-desktop *:after,.koi-topmenu *:before,.koi-topmenu-desktop *:before{box-sizing:content-box}.koi-topmenu .commenting-button,.koi-topmenu-desktop .commenting-button{position:relative}.koi-topmenu .commenting-button i,.koi-topmenu-desktop .commenting-button i{font-size:21px;line-height:21px}.koi-topmenu .commenting-button.has-threads:after,.koi-topmenu-desktop .commenting-button.has-threads:after{display:block;margin:0 0 0 0;width:12px;height:12px;content:"";position:absolute;top:-6px;left:26px;background-color:#f1d236;border-radius:10px;border:solid 2px #fff;box-shadow:0 1px 1px rgba(21,34,53,0.5)}.koi-topmenu .commenting-menu-dropdown-popup .koi-floating-popup-container,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-floating-popup-container{white-space:nowrap;padding:0}.koi-topmenu .commenting-menu-dropdown-popup .koi-floating-popup-container .thread-item-list-header,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-floating-popup-container .thread-item-list-header{font-family:"RalewayBold";font-size:13px;text-transform:uppercase;color:#152235;text-align:center;line-height:18px;margin:12px 0 12px 0}.koi-topmenu .commenting-menu-dropdown-popup .koi-floating-popup-container .commenting-menu-dropdown-popup-all-done,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-floating-popup-container .commenting-menu-dropdown-popup-all-done{border-top:1px solid #dbdfe5;padding:12px;background-color:#eceef1;border-radius:0 0 3px 3px}.koi-topmenu .commenting-menu-dropdown-popup .koi-floating-popup-container .commenting-menu-dropdown-popup-all-done .icon-checkmark:before,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-floating-popup-container .commenting-menu-dropdown-popup-all-done .icon-checkmark:before{color:#2ec986;width:36px;display:inline-block;text-align:center;line-height:18px;vertical-align:bottom;font-size:18px}.koi-topmenu .commenting-menu-dropdown-popup .koi-floating-popup-container .commenting-menu-dropdown-popup-all-done .commenting-menu-dropdown-popup-all-done-label,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-floating-popup-container .commenting-menu-dropdown-popup-all-done .commenting-menu-dropdown-popup-all-done-label{font-family:\'RalewayMedium\';letter-spacing:.4px;color:#152235;white-space:normal;font-size:11px;line-height:16px}.koi-topmenu .commenting-menu-dropdown-popup .koi-list-container,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-list-container{-ms-flex-positive:1;flex-grow:1;max-height:400px;width:276px}.koi-topmenu .commenting-menu-dropdown-popup .koi-list-container.example .koi-infinite-scroll-mid .koi-list-item-container,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-list-container.example .koi-infinite-scroll-mid .koi-list-item-container{cursor:default}.koi-topmenu .commenting-menu-dropdown-popup .koi-list-container.example .koi-infinite-scroll-mid .koi-list-item-container:hover,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-list-container.example .koi-infinite-scroll-mid .koi-list-item-container:hover{background-color:#fff}.koi-topmenu .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid{overflow-x:hidden}.koi-topmenu .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .koi-infinite-scroll-inner,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .koi-infinite-scroll-inner{margin-right:0;max-height:400px}.koi-topmenu .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .koi-infinite-scroll-inner .gradient-fader,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .koi-infinite-scroll-inner .gradient-fader{right:0}.koi-topmenu .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .koi-list-item-container,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .koi-list-item-container{padding-left:12px;padding-right:12px;padding-top:12px;padding-bottom:9px;cursor:pointer}.koi-topmenu .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .koi-list-item-container:nth-last-child(2),.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .koi-list-item-container:nth-last-child(2){border-bottom:none}.koi-topmenu .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .koi-list-item-container:hover,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .koi-list-item-container:hover{background-color:#eceef1}.koi-topmenu .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .thread-item-container .thread-item-user-avatars,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .thread-item-container .thread-item-user-avatars{float:left;width:24px;color:#475262;text-align:center;font-family:"RalewayBold";font-size:11px}.koi-topmenu .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .thread-item-container .thread-item-user-name,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .thread-item-container .thread-item-user-name{font-weight:bold;overflow:visible;font-size:13px;color:#152235;padding-left:36px;line-height:18px;letter-spacing:.5px;font-family:"RalewaySemiBold";width:216px;white-space:normal}.koi-topmenu .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .thread-item-container .thread-item-text,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .thread-item-container .thread-item-text{padding-left:36px;line-height:18px;font-size:11px;white-space:normal;letter-spacing:.5px;width:216px}.koi-topmenu .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .thread-item-container .thread-item-date,.koi-topmenu-desktop .commenting-menu-dropdown-popup .koi-list-container .koi-infinite-scroll-mid .thread-item-container .thread-item-date{padding-left:36px;line-height:18px;font-size:11px;color:#8e939c;white-space:normal;letter-spacing:.5px;width:216px}.koi-topmenu .commenting-menu-dropdown-popup-no-threads,.koi-topmenu-desktop .commenting-menu-dropdown-popup-no-threads{padding:24px;font-family:"RalewayMedium";font-size:13px;letter-spacing:.5px;color:#8e939c}.koi-topmenu .commenting-menu-dropdown-popup-error,.koi-topmenu-desktop .commenting-menu-dropdown-popup-error{padding:12px 0}.koi-topmenu .commenting-menu-dropdown-popup-error .load-error-label,.koi-topmenu-desktop .commenting-menu-dropdown-popup-error .load-error-label{background-color:#df0000;color:#eceef1;padding:6px 18px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.koi-topmenu .commenting-menu-dropdown-popup-error .load-error-label .icon-warning,.koi-topmenu-desktop .commenting-menu-dropdown-popup-error .load-error-label .icon-warning{margin-right:18px}.koi-topmenu .commenting-menu-dropdown-popup-error .load-error-label .load-error-text,.koi-topmenu-desktop .commenting-menu-dropdown-popup-error .load-error-label .load-error-text{font-family:"RalewayMedium";font-size:11px;white-space:normal;line-height:15px}.selectable-text{-moz-user-select:text;-khtml-user-select:text;-webkit-user-select:text;-ms-user-select:text;user-select:text}.selectable-text *,.selectable-text *:after,.selectable-text *:before{box-sizing:content-box}.koi-editor-ui-comment-thread-box-popups *,.koi-editor-ui-comment-thread-box-popups *:after,.koi-editor-ui-comment-thread-box-popups *:before{box-sizing:content-box}.koi-editor-ui-comment-thread-box-popups textarea::-webkit-input-placeholder{color:#c2c7cd}.koi-editor-ui-comment-thread-box-popups textarea::-moz-placeholder{color:#c2c7cd}.koi-editor-ui-comment-thread-box-popups textarea:-ms-input-placeholder{color:#c2c7cd}.koi-editor-ui-comment-thread-box-popups textarea::-ms-input-placeholder{color:#c2c7cd}.koi-editor-ui-comment-thread-box-popups textarea::placeholder{color:#c2c7cd}\n';
document.body.appendChild(q);return J});

})() || {};
moduleImpl["module"]=moduleImpl;
return moduleImpl;};if(typeof define==="function"&&define.amd){define("prezi_commenting",["require","react","react-dom","react-transition-group","prezi.geometry","prezi_app_utils","prezi_bacon","prezi_cet","prezi_cet_model","prezi_cet_model_editor","prezi_editor_store_focus","prezi_editor_store_mode","prezi_editor_store_object","prezi_editor_store_ui","prezi_featureswitcher","prezi_i18n","prezi_koi_widgets","prezi_logger","prezi_playback","prezi_utils","prezi_vaguetime"],function(){var moduleUrl=arguments[0]["toUrl"]("prezi_commenting.js");baseUrl=moduleUrl.substr(0,moduleUrl.lastIndexOf("/"));return(__factory).apply({},[].slice.call(arguments,1));});}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){baseUrl=__dirname;module.exports=(__factory)(require("react"),require("react-dom"),require("react-transition-group"),require("prezi.geometry"),require("prezi_app_utils"),require("prezi_bacon"),require("prezi_cet"),require("prezi_cet_model"),require("prezi_cet_model_editor"),require("prezi_editor_store_focus"),require("prezi_editor_store_mode"),require("prezi_editor_store_object"),require("prezi_editor_store_ui"),require("prezi_featureswitcher"),require("prezi_i18n"),require("prezi_koi_widgets"),require("prezi_logger"),require("prezi_playback"),require("prezi_utils"),require("prezi_vaguetime"));}else{this["prezi_commenting"]=__factory(React,ReactDOM,ReactTransitionGroup,this["prezi.geometry"],this["prezi_app_utils"],this["prezi_bacon"],this["prezi_cet"],this["prezi_cet_model"],this["prezi_cet_model_editor"],this["prezi_editor_store_focus"],this["prezi_editor_store_mode"],this["prezi_editor_store_object"],this["prezi_editor_store_ui"],this["prezi_featureswitcher"],this["prezi_i18n"],this["prezi_koi_widgets"],this["prezi_logger"],this["prezi_playback"],this["prezi_utils"],this["prezi_vaguetime"]);}}).call(this);
;(function(){var baseUrl;var __factory=function(){var module=(function(dependencies){return function(init){return init.call({},(function(){return{getSpaghettiVersion:function(){return "13.0-25-g6015dbc";},getModuleName:function(){return "prezi_grouping";},getModuleVersion:function(){return "release-2021w06-base-26-gaeb382e";},getResourceUrl:function(resource){if(resource.substr(0,1)!="/"){resource="/"+resource;}return baseUrl+resource;},"dependencies":{"prezi_cet_model_editor":dependencies[0],"prezi_i18n":dependencies[1],"prezi_logger":dependencies[2],"prezi_plugin_api":dependencies[3],"prezi_plugin_meta":dependencies[4]}};})());};})(arguments);var moduleImpl=(function(){return module(function(d){var l=d.dependencies.prezi_cet_model_editor,h=d.dependencies.prezi_logger,e=d.dependencies.prezi_plugin_api,f={};Object.defineProperty(f,"__esModule",{value:!0});var g=l.base.ObjectKind,m=l.base.editorIs;const n={f:!1,i:!1};f.j=class{init(a){this.u=a.declareUI(n,(a,b)=>{const c=b.createAction({shortcut:this.pluginDescription.shortcuts.group,enabled:a.f,onExecute:(a,b)=>{b===e.ActionTrigger.Keyboard&&h.avro.Avro.createDefaultLogger().logUseKeyboardShortcut({shortcut_type:"JUMP_TO_LAST_PATH_STEP"});
this.session.document.executeApiCommand(a,{name:"Create group",run:(b)=>{const c=this.session.selection.getSelectionInfo(b);f.j.f(c)&&(this.group(a,b,c),this.o(b))}})}}),k=b.createAction({shortcut:this.pluginDescription.shortcuts.ungroup,enabled:a.i,onExecute:(a,b)=>{b===e.ActionTrigger.Keyboard&&h.avro.Avro.createDefaultLogger().logUseKeyboardShortcut({shortcut_type:"JUMP_TO_LAST_PATH_STEP"});this.session.document.executeApiCommand(a,{name:"Ungroup",run:(b)=>{const c=this.session.selection.getSelectionInfo(b);
this.v(a,c);this.o(b)}})}});a.f&&this.createAction(b,"create-group",100,66,c);a.f&&a.i&&b.createPropertyBarItem((a)=>a.separator({id:"small-group-separator",weight:100,size:e.PropertyBarSeparatorSize.Small,parent:e.PropertyBarId.Right}));a.i&&this.createAction(b,"ungroup",101,66,k);(a.f||a.i)&&b.createPropertyBarItem((a)=>a.separator({id:"large-group-separator",weight:101,size:e.PropertyBarSeparatorSize.Large,parent:e.PropertyBarId.Right}))});a.onDocumentChange(()=>{this.session.document.read((a)=>
{this.o(a)})});a.onSelectionChange(()=>{this.session.document.read((a)=>{this.o(a)})})}o(a){a=this.session.selection.getReadonlySelectionInfo(a);this.u.setState({f:f.j.f(a),i:f.j.i(a)})}createAction(a,c,b,d,k){a.createPropertyBarItem((a)=>a.button({id:c,weight:b,parent:e.PropertyBarId.Right,action:k}));a.createMenuItem({kind:e.MenuItemKind.context,id:c+"-ctx",weight:d,action:k})}static f(a){const c=2<=a.nonGroupedObjects.length+a.groups.length,b=!a.nonGroupedObjects.some((a)=>a.is(g.simpleObject)&&
null!=a.group),d=1===(new Set(a.allObjects.map((a)=>a.parent.id))).size;a=a.allObjects.every((a)=>a.is(g.simpleObject));return c&&b&&d&&a}group(a,c,b){c=b.allObjects[0].parent.add.group(b.allObjects.filter(m(g.simpleObject)));h.avro.Avro.createDefaultLogger().logGroupObjects();this.session.selection.setSelection(a,[c])}static i(a){const c=0<a.groups.length;a=a.nonGroupedObjects.some((a)=>a.is(g.simpleObject)&&null!=a.group);return c||a}v(a,c){c.groups.forEach((a)=>a.delete());c.nonGroupedObjects.forEach((a)=>
{a.is(g.simpleObject)&&null!=a.group&&a.group.removeMember(a)});h.avro.Avro.createDefaultLogger().logUngroupObjects();this.session.selection.setSelection(a,c.allObjects)}};d={};Object.defineProperty(d,"__esModule",{value:!0});d.lazyModule={createPlugin(){return new f.j}};return d});

})() || {};
moduleImpl["module"]=moduleImpl;
return moduleImpl;};if(typeof define==="function"&&define.amd){define("prezi_grouping",["require","prezi_cet_model_editor","prezi_i18n","prezi_logger","prezi_plugin_api","prezi_plugin_meta"],function(){var moduleUrl=arguments[0]["toUrl"]("prezi_grouping.js");baseUrl=moduleUrl.substr(0,moduleUrl.lastIndexOf("/"));return(__factory).apply({},[].slice.call(arguments,1));});}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){baseUrl=__dirname;module.exports=(__factory)(require("prezi_cet_model_editor"),require("prezi_i18n"),require("prezi_logger"),require("prezi_plugin_api"),require("prezi_plugin_meta"));}else{this["prezi_grouping"]=__factory(this["prezi_cet_model_editor"],this["prezi_i18n"],this["prezi_logger"],this["prezi_plugin_api"],this["prezi_plugin_meta"]);}}).call(this);
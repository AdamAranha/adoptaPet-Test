;(function(){var baseUrl;var __factory=function(){var React=arguments[0];var ReactDOM=arguments[1];var ReactTransitionGroup=arguments[2];var module=(function(dependencies){return function(init){return init.call({},(function(){return{getSpaghettiVersion:function(){return "13.0-25-g6015dbc";},getModuleName:function(){return "prezi_plugin_api";},getModuleVersion:function(){return "release-2021w06-base-26-gaeb382e";},getResourceUrl:function(resource){if(resource.substr(0,1)!="/"){resource="/"+resource;}return baseUrl+resource;},"dependencies":{"prezi.geometry":dependencies[3],"prezi_app_utils":dependencies[4],"prezi_bacon":dependencies[5],"prezi_cet":dependencies[6],"prezi_cet_model":dependencies[7],"prezi_cet_model_editor":dependencies[8],"prezi_cet_renderer":dependencies[9],"prezi_editor_error":dependencies[10],"prezi_editor_store_common":dependencies[11],"prezi_editor_store_mode":dependencies[12],"prezi_editor_store_object":dependencies[13],"prezi_editor_store_ui":dependencies[14],"prezi_featureswitcher":dependencies[15],"prezi_i18n":dependencies[16],"prezi_logger":dependencies[17],"prezi_nativeapitypes":dependencies[18],"prezi_ppt_service":dependencies[19],"prezi_service_data":dependencies[20],"prezi_service_fontcatalogue":dependencies[21],"prezi_sound_playback":dependencies[22],"prezi_spotlight":dependencies[23],"prezi_uaparser":dependencies[24],"prezi_utils":dependencies[25],"prezi_widgets":dependencies[26]}};})(),React,ReactDOM,ReactTransitionGroup);};})(arguments);var moduleImpl=(function(){return module(function(x,k,ta,Na){function C(a){var b;return null==a?null:"url"in a?(a=a.url,null===a||void 0===a?void 0:a.substring(Math.max(0,a.length-32),a.length)):"aspectRatio"in a?null:null===(b=a.canvas)||void 0===b?void 0:b.id}function la(a){var b;return{id:a.id,enabled:null!==(b=a.enabled)&&void 0!==b?b:!0,icon:a.icon,title:a.title}}function O(a){return null!=a?a:()=>{}}var B=x.dependencies.prezi_app_utils,K=x.dependencies.prezi_bacon,q=x.dependencies.prezi_cet,ua=x.dependencies.prezi_cet_model,
r=x.dependencies.prezi_cet_model_editor,va=x.dependencies.prezi_editor_error,W=x.dependencies.prezi_editor_store_mode,L=x.dependencies.prezi_editor_store_object,u=x.dependencies.prezi_editor_store_ui,Q=x.dependencies.prezi_featureswitcher,ma=x.dependencies.prezi_i18n,F=x.dependencies.prezi_logger,X=x.dependencies.prezi_nativeapitypes,wa=x.dependencies.prezi_service_data,R=x.dependencies.prezi_uaparser,f=x.dependencies.prezi_widgets,xa=x.dependencies.prezi_sound_playback,p=x.dependencies.prezi_utils,
S={};Object.defineProperty(S,"__esModule",{value:!0});S.AudioController=class{initialize(a,b,d){null!=this.currentPlayer&&this.currentPlayer.getBuffer()!==a&&this.stop(this.currentPlayer.getBuffer());this.currentPlayer=xa.SoundPlaybackModule.createAudioPlayer(this,a,!1);this.currentPlayer.initialize(1,b);this.onCurrentPlayerStop=d}stop(a){null!=this.currentPlayer&&this.currentPlayer.getBuffer()===a&&(this.currentPlayer.stop(),this.onCurrentPlayerStop())}pause(a){null!=this.currentPlayer&&this.currentPlayer.getBuffer()===
a&&this.currentPlayer.pause()}play(a){null!=this.currentPlayer&&this.currentPlayer.getBuffer()===a&&this.currentPlayer.play()}seek(a,b){null!=this.currentPlayer&&this.currentPlayer.getBuffer()===a&&this.currentPlayer.seek(b)}getAudioContext(){return p.AudioUtils.getAudioContext()}};var w={wrapIntoKillable:function(a){return new Proxy(a,new w.KillableProxyHandler)},asKillable:function(a,b){a=(0,w.wrapIntoKillable)(a);try{return b(a)}finally{a.kill()}}};Object.defineProperty(w,"__esModule",{value:!0});
w.KillableProxyHandler=class{constructor(){this.killed=!1}get(a,b){if("isKillableNotKilled"===b)return()=>!this.killed;if(this.killed)throw new w.IllegalStateException("Object already killed");if("kill"===b)return()=>{"kill"in a&&"function"===typeof a.kill&&a.kill();this.killed=!0};b=a[b];return"function"===typeof b?b.bind(a):b}set(a,b,d){if(this.killed)throw new w.IllegalStateException("Object already killed");a[b]=d;return!0}};w.IllegalStateException=class extends Error{constructor(a){super(a);
Object.setPrototypeOf(this,w.IllegalStateException.prototype)}};var g={concatUrlParts:function(a){return a.map((a)=>`${a}/`).join("")},selectionToTransformedSelection:function(a,b){return{allObjects:b.allEntityIds.map((b)=>a.lookup.base(b)).filter(Y(r.base.ObjectKind.transformedObject)),groups:b.groupIds.map((b)=>a.lookup.base(b)).filter(Y(r.base.ObjectKind.group)),nonGroupedObjects:b.nonGroupedEntityIds.map((b)=>a.lookup.base(b)).filter(Y(r.base.ObjectKind.transformedObject))}},selectionToReadonlyTransformedSelection:function(a,
b){return{allObjects:b.allEntityIds.map((b)=>a.lookup.base(b)).filter(Z(r.base.ObjectKind.transformedObject)),groups:b.groupIds.map((b)=>a.lookup.base(b)).filter(Z(r.base.ObjectKind.group)),nonGroupedObjects:b.nonGroupedEntityIds.map((b)=>a.lookup.base(b)).filter(Z(r.base.ObjectKind.transformedObject))}},selectionToTransformedSelectionChange:function(a,b){a=(0,g.selectionToReadonlyTransformedSelection)(a,b);return{allObjects:a.allObjects.map((a)=>a.ref),groups:a.groups.map((a)=>a.ref),nonGroupedObjects:a.nonGroupedObjects.map((a)=>
a.ref)}},createItemContainers:function(a,b,d){var e;return null===(e=null===a||void 0===a?void 0:a.filter((a)=>null!=a))||void 0===e?void 0:e.map((a,e)=>(0,g.wrapIntoItemContainer)(e,a.props,a.createItemElement({parentIds:null,popupIds:b,currentScrollIntoViewIds:d})))},wrapIntoItemContainer:function(a,b,d){return k.createElement(f.ItemContainer,Object.assign({},b,{key:a}),d)},mapToCreateReactElement:function(a){return null===a||void 0===a?void 0:a.map((a)=>({createReactElement:(b)=>(0,g.wrapIntoItemContainer)(b.key,
a.props,a.createItemElement({currentScrollIntoViewIds:b.currentScrollIntoViewIds,parentIds:b.parentIds,popupIds:b.popupIds}))}))},isATValid:function(a){return a instanceof g.UserActionTokenImpl&&a.valid||a instanceof na&&a.isValid()},checkAT:function(a){if(!(0,g.isATValid)(a))throw Error("UserActionToken is expired");},invalidateAsyncUserActionTokensI:function(){aa++},createCallWithAat:function(a){const b=a instanceof g.UserActionTokenImpl&&a.valid,d=aa;return(a)=>{if(!b||d!==aa)return a({isValid:()=>
!1});const e=new na;try{return a(e)}finally{e.kill()}}},createUatForTestI:function(){return new g.UserActionTokenImpl},getPopupId:function(a){return a+"-popup"},convertButtonSize:function(a){return a===c.ButtonSize.Small?f.ExtendedButtonSize.Small:f.ExtendedButtonSize.Large},convertButtonColor:function(a){switch(a){case c.ButtonColor.Gray:return f.ExtendedButtonColor.Gray;case c.ButtonColor.Ghost:return f.ExtendedButtonColor.Ghost;case c.ButtonColor.Green:return f.ExtendedButtonColor.Green;case c.ButtonColor.Gold:return f.ExtendedButtonColor.Gold;
case c.ButtonColor.Red:return f.ExtendedButtonColor.Red;case c.ButtonColor.Blue:return f.ExtendedButtonColor.Blue;default:p.Utils.assertNever(a,`Unknown color: ${a}`)}}},ya=this&&g.__awaiter||function(a,b,d,e){function h(a){return a instanceof d?a:new d(function(b){b(a)})}return new (d||(d=Promise))(function(d,c){function m(a){try{n(e.next(a))}catch(v){c(v)}}function f(a){try{n(e["throw"](a))}catch(v){c(v)}}function n(a){a.done?d(a.value):h(a.value).then(m,f)}n((e=e.apply(a,b||[])).next())})};Object.defineProperty(g,
"__esModule",{value:!0});var Y=r.base.editorIs,Z=r.base.readerIs;let aa=0;g.UserActionTokenImpl=class{constructor(){this.valid=!0}doAsync(a,b){return ya(this,void 0,void 0,function*(){const d=(0,g.createCallWithAat)(this),e=yield a;return d((a)=>b(a,e))})}kill(){this.valid=!1}};class na{constructor(){this.valid=!0}isValid(){return this.valid}kill(){this.valid=!1}}g.CallHandler=class{constructor(a){this.errorHandler=a}callWithUAT(a,b){return this.call(()=>{const b=new g.UserActionTokenImpl;try{return a(b)}finally{b.kill()}},
b)}call(a,b){try{return a()}catch(d){return this.errorHandler(d),b}}};g.MaybeImpl=class{constructor(){this.hasValue=()=>!1}setValue(a){this.hasValue=()=>!0;this.value=a}};g.Memo=class extends k.Component{access(a){return a.reduce((a,d)=>a[d],this.props.props)}createProxy(a,b){if(a instanceof Function){const a=[];for(var d=b;null!=d;d=d.prev)a.push(d.key);a.reverse();return(...b)=>this.access(a)(...b)}if(a instanceof Array)return a.map((d,h)=>this.createProxy(a[h],{prev:b,key:h}));if(p.Utils.isPlainObject(a)){d=
{};for(const e of Object.keys(a))d[e]=this.createProxy(a[e],{prev:b,key:e});return d}return a}shouldComponentUpdate(a){return!p.Utils.deepEqualsExcludingFunctions(this.props.props,a.props)}render(){this.proxy=this.createProxy(this.props.props,null);return this.props.create(this.proxy)}};var t={wrapItemAction:function(a,b){return null==b?null:Object.assign(Object.assign({},la(b)),{onClick:()=>a.callWithUAT((a)=>b.onClick(a))})},wrapActionClosePopup:function(a,b,d,e,h){return null==b?null:Object.assign(Object.assign({},
la(b)),{onClick:()=>{a.callWithUAT((a)=>b.onClick(a));d.closePopup(h,e)}})},wrapActions:function(a,b){return null==b?null:b.map((b)=>b===c.DropdownMenuSeparator?b:"content"in b?b:(0,t.wrapItemAction)(a,b))},wrapActionWrapperActions:function(a,b,d,e,h){return null==b?null:b.map((b)=>b===c.DropdownMenuSeparator?b:"content"in b?b:(0,t.wrapActionClosePopup)(a,b,d,e,h))}};Object.defineProperty(t,"__esModule",{value:!0});t.SimpleListItemUIImpl=class{constructor(a,b,d){this.applicationController=a;this.callHandler=
b;this.popupController=d}getOnMore(a,b){return null==a||0===a.length?null:(a)=>{this.popupController.togglePopup(a);null!=b&&this.popupController.isPopupOpen(a)&&this.callHandler.call(b)}}getOnClick(a){return null!=a?(b)=>this.callHandler.callWithUAT((d)=>a(d,{shiftKey:b.shiftKey})):null}isSelected(a,b){return null!=b&&a===b}image(a){const b=C(a.src),d=this.getOnClick(a.onClick),e=null==a.requestImage?null:()=>this.callHandler.call(a.requestImage),h=this.getOnMore(a.actions,a.onShowActions);return{containerKind:c.ContainerKind.simpleList,
id:a.id,key:b,title:a.title,createReactElement:(c)=>{var m;c={selected:this.isSelected(a.id,c.activeId),checked:f.CheckedState.none,popupIds:c.popupIds,src:a.src,requestImage:e,hoverContent:a.hoverContent,info:a.info,title:a.title,onClick:d,primaryAction:(0,t.wrapItemAction)(this.callHandler,a.primaryAction),actions:(0,t.wrapActionWrapperActions)(this.callHandler,a.actions,this.popupController,c.popupIds,`${a.id}-popup`),actionWrapperPosition:f.ActionWrapperPosition.top,stickyActions:a.stickyActions,
onMore:h,blendColor:a.blendColor,disabled:null!==(m=a.disabled)&&void 0!==m?m:!1,dataLookup:a.dataLookup,label:a.label,badge:a.badge,badgeTooltipText:a.badgeTooltipText,addChecker:a.addChecker};return k.createElement(f.Image,Object.assign({key:b},c))}}}droppableImage(a){const b=()=>this.applicationController.setListDropHandler((b)=>{this.callHandler.callWithUAT((d)=>a.onDrop(d,{dropKind:c.DropKind.drag,stageX:b.stageX,stageY:b.stageY,targetTopic:b.targetTopic}))}),d=()=>{this.callHandler.callWithUAT((b)=>
a.onDrop(b,{dropKind:c.DropKind.click,stageX:null,stageY:null,targetTopic:null}))},e=C(a.src),h=null==a.requestImage?null:()=>this.callHandler.call(a.requestImage),m=this.getOnMore(a.actions,a.onShowActions);return{containerKind:c.ContainerKind.simpleList,id:a.id,key:e,title:a.title,createReactElement:(c)=>{var n;c={selected:this.isSelected(a.id,c.activeId),checked:f.CheckedState.none,popupIds:c.popupIds,src:a.src,requestImage:h,hoverContent:a.hoverContent,info:a.info,title:a.title,onClick:d,primaryAction:(0,
t.wrapItemAction)(this.callHandler,a.primaryAction),actions:(0,t.wrapActionWrapperActions)(this.callHandler,a.actions,this.popupController,c.popupIds,`${a.id}-popup`),actionWrapperPosition:f.ActionWrapperPosition.top,stickyActions:a.stickyActions,onMore:m,blendColor:a.blendColor,disabled:null!==(n=a.disabled)&&void 0!==n?n:!1,dataLookup:a.dataLookup,label:a.label,getDropData:b,preziDataMimeParams:a.preziDataMimeParams,badge:a.badge,badgeTooltipText:a.badgeTooltipText,addChecker:a.addChecker};return k.createElement(f.DroppableImage,
Object.assign({key:e},c))}}}folder(a){const b=C(a.src),d=this.getOnClick(a.onClick),e=null==a.requestImage?null:()=>this.callHandler.call(a.requestImage);return{containerKind:c.ContainerKind.simpleList,id:a.id,key:b,title:a.title,createReactElement:(h)=>{var c;h={selected:this.isSelected(a.id,h.activeId),checked:f.CheckedState.none,popupIds:h.popupIds,src:a.src,requestImage:e,hoverContent:a.hoverContent,info:a.info,title:a.title,onClick:d,primaryAction:null,actions:null,actionWrapperPosition:null,
stickyActions:null,onMore:null,blendColor:a.blendColor,disabled:null!==(c=a.disabled)&&void 0!==c?c:!1,dataLookup:a.dataLookup,label:a.label};return k.createElement(f.Folder,Object.assign({key:b},h))}}}error(a){const b={title:a.title,dataLookup:a.dataLookup};return{id:null,containerKind:c.ContainerKind.simpleList,title:a.title,key:"error",createReactElement:()=>k.createElement(f.ErrorItem,Object.assign({key:"error"},b))}}lock(a){const b=this.getOnClick(a.onClick),d={src:a.src,title:a.title,onClick:b,
blendColor:a.blendColor,disabled:a.disabled,dataLookup:a.dataLookup,tooltipText:a.tooltipText},e=C(a.src);return{containerKind:c.ContainerKind.simpleList,id:null,createReactElement:()=>k.createElement(f.LockedImage,Object.assign({key:e},d)),title:a.title,key:e}}text(a){var b;const d={title:a.title,icon:a.icon,text:a.text,dataLookup:a.dataLookup,onClick:this.getOnClick(a.onClick),onDeleteClick:null!=a.onDeleteClick?()=>this.callHandler.callWithUAT(a.onDeleteClick):null},e=null!==(b=a.dataLookup)&&
void 0!==b?b:`${a.title}|${a.text}`;return{containerKind:c.ContainerKind.simpleList,id:null,createReactElement:()=>k.createElement(f.TextListItem,Object.assign({key:e},d)),title:null,key:e}}};t.MultiSelectListItemUIImpl=class{constructor(a,b){this.applicationController=a;this.callHandler=b}getChecked(a,b){return null!=b&&-1!==b.indexOf(a)?f.CheckedState.checked:f.CheckedState.unchecked}getOnClick(a,b,d){return()=>{const e=null!=a&&0<=b.indexOf(a)?b.filter((b)=>b!==a):[...b,a];this.callHandler.call(()=>
d({selectedIds:e}))}}getGetDropData(a,b,d){return()=>{const e=0>b.indexOf(a)?[a]:b;return this.applicationController.setListDropHandler((a)=>{this.callHandler.callWithUAT((b)=>{d(b,{dropKind:c.DropKind.drag,stageX:a.stageX,stageY:a.stageY,targetTopic:a.targetTopic,draggedIds:e})})})}}image(a){const b=a.id,d=C(a.src),e=null==a.requestImage?null:()=>this.callHandler.call(a.requestImage);return{containerKind:c.ContainerKind.multiSelectList,id:b,key:d,title:a.title,createReactElement:(c)=>{var h;const n=
this.getOnClick(b,c.selectedIds,c.onSelectionChange);c={selected:!1,checked:this.getChecked(b,c.selectedIds),popupIds:c.popupIds,src:a.src,requestImage:e,hoverContent:a.hoverContent,info:a.info,title:a.title,onClick:n,primaryAction:null,actions:null,actionWrapperPosition:null,stickyActions:null,onMore:null,blendColor:a.blendColor,disabled:null!==(h=a.disabled)&&void 0!==h?h:!1,dataLookup:a.dataLookup,label:a.label,badge:a.badge,badgeTooltipText:a.badgeTooltipText,addChecker:a.addChecker};return k.createElement(f.Image,
Object.assign({key:d},c))}}}droppableImage(a){const b=a.id,d=C(a.src),e=null==a.requestImage?null:()=>this.callHandler.call(a.requestImage);return{containerKind:c.ContainerKind.multiSelectList,id:a.id,key:d,title:a.title,createReactElement:(c)=>{var h;const n=this.getOnClick(b,c.selectedIds,c.onSelectionChange),y=this.getChecked(b,c.selectedIds),z=this.getGetDropData(b,c.selectedIds,c.onDrop);c={selected:!1,checked:y,popupIds:c.popupIds,src:a.src,requestImage:e,hoverContent:a.hoverContent,info:a.info,
title:a.title,onClick:n,primaryAction:null,actions:null,actionWrapperPosition:null,stickyActions:null,onMore:null,blendColor:a.blendColor,disabled:null!==(h=a.disabled)&&void 0!==h?h:!1,dataLookup:a.dataLookup,label:a.label,getDropData:z,preziDataMimeParams:c.preziDataMimeParams,badge:a.badge,badgeTooltipText:a.badgeTooltipText,addChecker:a.addChecker};return k.createElement(f.DroppableImage,Object.assign({key:d},c))}}}error(a){const b={title:a.title,dataLookup:a.dataLookup};return{id:null,containerKind:c.ContainerKind.multiSelectList,
title:a.title,key:"error",createReactElement:()=>k.createElement(f.ErrorItem,Object.assign({key:"error"},b))}}};t.TimelineListItemUIImpl=class{constructor(a,b){this.callHandler=a;this.popupController=b}getOnClick(a){return null!=a?(b)=>this.callHandler.callWithUAT((d)=>a(d,{shiftKey:b.shiftKey})):null}getOnMore(a,b){return null==a||0===a.length?null:(a)=>{this.popupController.togglePopup(a);null!=b&&this.popupController.isPopupOpen(a)&&this.callHandler.call(b)}}isSelected(a,b){return null!=b&&a===
b}deck(a){var b;const d=null!==(b=a.id)&&void 0!==b?b:C(a.src),e=this.getOnClick(a.onClick),h=null==a.requestImage?null:()=>this.callHandler.call(a.requestImage),m=this.getOnMore(a.actions,a.onShowActions);return{containerKind:c.ContainerKind.timelineList,id:a.id,key:d,title:a.title,height:150,createReactElement:(b)=>{var c;b={selected:this.isSelected(a.id,b.activeId),checked:f.CheckedState.none,popupIds:b.popupIds,src:a.src,requestImage:h,hoverContent:a.hoverContent,info:a.info,title:a.title,onClick:e,
primaryAction:(0,t.wrapItemAction)(this.callHandler,a.primaryAction),actions:(0,t.wrapActionWrapperActions)(this.callHandler,a.actions,this.popupController,b.popupIds,`${a.id}-popup`),actionWrapperPosition:f.ActionWrapperPosition.top,stickyActions:a.stickyActions,onMore:m,blendColor:a.blendColor,disabled:null!==(c=a.disabled)&&void 0!==c?c:!1,dataLookup:a.dataLookup,label:a.label,badges:a.badges,reorderCallbacks:a.canStartReorder?b.reorderCallbacks:null,isDraggable:a.canStartReorder&&null!=b.reorderCallbacks,
showDeck:a.showDeck};return k.createElement(g.Memo,{key:d,props:b,create:(a)=>k.createElement(f.TimelineDeckItem,Object.assign({},a))})}}}frame(a){var b;const d=null!==(b=a.id)&&void 0!==b?b:C(a.src),e=this.getOnClick(a.onClick),h=null==a.requestImage?null:()=>this.callHandler.call(a.requestImage),m=this.getOnMore(a.actions,a.onShowActions);return{containerKind:c.ContainerKind.timelineList,id:a.id,key:d,title:a.title,height:150,createReactElement:(b)=>{var c;b={selected:this.isSelected(a.id,b.activeId),
checked:f.CheckedState.none,popupIds:b.popupIds,src:a.src,requestImage:h,hoverContent:a.hoverContent,info:a.info,title:a.title,onClick:e,primaryAction:(0,t.wrapItemAction)(this.callHandler,a.primaryAction),actions:(0,t.wrapActionWrapperActions)(this.callHandler,a.actions,this.popupController,b.popupIds,`${a.id}-popup`),actionWrapperPosition:f.ActionWrapperPosition.top,stickyActions:a.stickyActions,onMore:m,blendColor:a.blendColor,disabled:null!==(c=a.disabled)&&void 0!==c?c:!1,dataLookup:a.dataLookup,
label:a.label,badges:a.badges,reorderCallbacks:a.canStartReorder?b.reorderCallbacks:null,isDraggable:a.canStartReorder&&null!=b.reorderCallbacks};return k.createElement(g.Memo,{key:d,props:b,create:(a)=>k.createElement(f.TimelineFrameItem,Object.assign({},a))})}}}main(a){var b;const d=null!==(b=a.id)&&void 0!==b?b:C(a.src),e=this.getOnClick(a.onClick),h=null==a.requestImage?null:()=>this.callHandler.call(a.requestImage),m=this.getOnMore(a.actions,a.onShowActions);return{containerKind:c.ContainerKind.timelineList,
id:a.id,key:d,title:a.title,height:168,createReactElement:(b)=>{var c;b={selected:this.isSelected(a.id,b.activeId),checked:f.CheckedState.none,popupIds:b.popupIds,src:a.src,requestImage:h,hoverContent:a.hoverContent,info:a.info,title:a.title,onClick:e,primaryAction:(0,t.wrapItemAction)(this.callHandler,a.primaryAction),actions:(0,t.wrapActionWrapperActions)(this.callHandler,a.actions,this.popupController,b.popupIds,`${a.id}-popup`),actionWrapperPosition:f.ActionWrapperPosition.top,stickyActions:a.stickyActions,
onMore:m,blendColor:a.blendColor,disabled:null!==(c=a.disabled)&&void 0!==c?c:!1,dataLookup:a.dataLookup,label:a.label,badges:a.badges,reorderCallbacks:a.canStartReorder?b.reorderCallbacks:null,isDraggable:a.canStartReorder&&null!=b.reorderCallbacks};return k.createElement(g.Memo,{key:d,props:b,create:(a)=>k.createElement(f.TimelineMainItem,Object.assign({},a))})}}}text(a){const b=a.dataLookup,d=this.getOnClick(a.onClick);return{containerKind:c.ContainerKind.timelineList,id:a.dataLookup,key:b,title:a.title,
height:52,createReactElement:(e)=>{e={title:a.title,tooltipText:a.tooltipText,onClick:d,dataLookup:a.dataLookup,icon:a.icon,text:a.text,timelineAction:(0,t.wrapItemAction)(this.callHandler,a.timelineAction),onDeleteClick:null!=a.onDeleteClick?()=>this.callHandler.callWithUAT(a.onDeleteClick):null,reorderCallbacks:a.canStartReorder?e.reorderCallbacks:null,isDraggable:a.canStartReorder&&null!=e.reorderCallbacks};return k.createElement(g.Memo,{key:b,props:e,create:(a)=>k.createElement(f.TimelineTextItem,
Object.assign({},a))})}}}};var T={};Object.defineProperty(T,"__esModule",{value:!0});T.ButtonUIImpl=class{constructor(a,b,d,e){this.popupUI=a;this.callHandler=b;this.popupController=d;this.applicationController=e}button(a){return{createButtonReactElement:(b,d,e)=>{b=null==a.onClick?null:()=>this.callHandler.callWithUAT(a.onClick);return k.createElement(f.NormalButton,{key:d,buttonColor:g.convertButtonColor(a.color),content:a.content,id:a.id,onClick:b,disabled:a.disabled,tooltipText:a.tooltipText,
tooltipPosition:a.tooltipPosition,fitParent:a.flexibleWidth,size:g.convertButtonSize(e),shape:a.shape,flexibleWidth:a.flexibleWidth})}}}comboButton(a){const b=a(this.popupUI);return{createButtonReactElement:(a,e,h)=>{const d=b.id+"-popupOpener-popup",n=(a)=>this.popupController.togglePopup(d,a);return k.createElement(f.ComboButton,{key:e,id:b.id,buttonColor:g.convertButtonColor(b.color),popupIds:a.popupIds,parentIds:a.parentIds,currentScrollIntoViewIds:a.currentScrollIntoViewIds,alignment:null,hidePopupPointer:b.hidePopupPointer,
popupHeight:b.popupHeight?b.popupHeight:c.PopupHeight.Full,content:b.content,size:g.convertButtonSize(h),shape:b.shape,disabled:b.disabled,onDropdownClick:()=>{n(a.parentIds)},onButtonClick:()=>this.callHandler.callWithUAT((a)=>b.onClick(a)),popupHeader:g.mapToCreateReactElement(b.popupHeader),popupContent:g.mapToCreateReactElement(b.popupContent),popupFooter:g.mapToCreateReactElement(b.popupFooter),dataLookup:b.id,tooltipText:b.tooltipText,tooltipPosition:b.tooltipPosition,fitParent:b.flexibleWidth,
flexibleWidth:b.flexibleWidth})}}}comboMenuButton(a){return{createButtonReactElement:(b,d,e)=>{const h=a.id+"-popupOpener-popup",m=(b)=>{this.popupController.togglePopup(h,b);null!=a.onOpen&&this.popupController.isPopupOpen(h)&&this.callHandler.call(a.onOpen)},n=null==a.actions?null:a.actions.map((a)=>null==a||a===c.DropdownMenuSeparator?c.DropdownMenuSeparator:"content"in a?a:t.wrapItemAction(this.callHandler,Object.assign(Object.assign({},a),{onClick:(d)=>{this.popupController.closePopup(h,b.popupIds);
if(null!=a.onClick)a.onClick(d)}})));return k.createElement(f.ComboMenuButton,{key:d,id:a.id,buttonColor:g.convertButtonColor(a.color),popupIds:b.popupIds,parentIds:b.parentIds,hidePopupPointer:a.hidePopupPointer,content:a.content,size:g.convertButtonSize(e),shape:a.shape,disabled:a.disabled,popupPosition:a.popupPosition,onDropdownClick:()=>{m(b.parentIds)},actions:n,onButtonClick:()=>{this.popupController.closePopup(h,b.popupIds);this.callHandler.callWithUAT((b)=>{a.onClick(b)})},dataLookup:a.id,
tooltipText:a.tooltipText,tooltipPosition:a.tooltipPosition,fitParent:a.flexibleWidth,flexibleWidth:a.flexibleWidth})}}}menuButton(a){return{createButtonReactElement:(b,d,e)=>{const h=a.id+"-popupOpener-popup",m=(a)=>this.popupController.togglePopup(h,a),n=null==a.actions?null:a.actions.map((a)=>null==a||a===c.DropdownMenuSeparator?c.DropdownMenuSeparator:"content"in a?a:t.wrapItemAction(this.callHandler,Object.assign(Object.assign({},a),{onClick:(d)=>{this.popupController.closePopup(h,b.popupIds);
if(null!=a.onClick)a.onClick(d)}})));return k.createElement(f.MenuButton,{key:d,id:a.id,buttonColor:g.convertButtonColor(a.color),popupIds:b.popupIds,parentIds:b.parentIds,hidePopupPointer:a.hidePopupPointer,content:a.content,size:g.convertButtonSize(e),shape:a.shape,disabled:a.disabled,popupPosition:a.popupPosition,onDropdownClick:()=>{m(b.parentIds);null!=a.onOpen&&this.popupController.isPopupOpen(h)&&this.callHandler.call(a.onOpen)},actions:n,dataLookup:a.id,tooltipText:a.tooltipText,tooltipPosition:a.tooltipPosition,
fitParent:a.flexibleWidth,flexibleWidth:a.flexibleWidth,showArrow:a.showArrow})}}}submenuButton(a){return{createButtonReactElement:(b,d,e)=>{const c=a.id+"-popupOpener-popup",m=(a)=>this.popupController.togglePopup(c,a),n=null==a.actions?null:a.actions.map((a)=>Object.assign(Object.assign({},a),{onClick:()=>this.callHandler.callWithUAT((b)=>a.onClick(b))}));return k.createElement(f.SubmenuButton,{key:d,id:a.id,buttonColor:g.convertButtonColor(a.color),popupIds:b.popupIds,parentIds:b.parentIds,content:a.content,
size:g.convertButtonSize(e),shape:a.shape,disabled:a.disabled,popupPosition:a.popupPosition,onDropdownClick:()=>{m(b.parentIds);null!=a.onOpen&&this.popupController.isPopupOpen(c)&&this.callHandler.call(a.onOpen)},actions:n,dataLookup:a.id,tooltipText:a.tooltipText,tooltipPosition:a.tooltipPosition,fitParent:a.flexibleWidth,flexibleWidth:a.flexibleWidth,showArrow:a.showArrow})}}}popupButton(a){const b=a(this.popupUI);return{createButtonReactElement:(a,e,h)=>{const d=b.id+"-popupOpener-popup",n=(a)=>
this.popupController.togglePopup(d,a);return k.createElement(f.PopupButton,{id:b.id,buttonColor:g.convertButtonColor(b.color),popupIds:a.popupIds,parentIds:a.parentIds,currentScrollIntoViewIds:a.currentScrollIntoViewIds,alignment:null,hidePopupPointer:b.hidePopupPointer,popupHeight:b.popupHeight?b.popupHeight:c.PopupHeight.Full,content:b.content,size:g.convertButtonSize(h),showArrow:b.showArrow,disabled:b.disabled,onClick:()=>{n(a.parentIds)},popupHeader:g.mapToCreateReactElement(b.popupHeader),popupContent:g.mapToCreateReactElement(b.popupContent),
popupFooter:g.mapToCreateReactElement(b.popupFooter),dataLookup:b.id,tooltipText:b.tooltipText,tooltipPosition:b.tooltipPosition,fitParent:b.flexibleWidth,flexibleWidth:b.flexibleWidth,shape:b.shape,popupPosition:"left"})}}}upload(a){return{createButtonReactElement:(b,d,e)=>{const h=this.applicationController.getFilePickerDescriptions(),m=a.id+"-popupOpener-popup",n=b.parentIds,y=(b,d)=>{var e;this.popupController.closePopup(m,n);null!=a.onClick&&this.callHandler.call(a.onClick);const h=null!==(e=
a.fileFilter)&&void 0!==e?e:{};this.applicationController.selectFile(d,h,(b,d)=>{this.callHandler.callWithUAT((e)=>{if(null!=a.onFileSelected&&c.FileFilter.passes(h,b))a.onFileSelected(e,{file:b,source:d});else if(null!=a.onInvalidFileSelected&&null!=b)a.onInvalidFileSelected(e,{fileName:b.name,source:d})})})};return 0===h.length?k.createElement(f.NormalButton,{key:d,buttonColor:null!=a.color?g.convertButtonColor(a.color):f.ExtendedButtonColor.Gray,content:a.content,id:a.id,onClick:()=>this.callHandler.callWithUAT((a)=>
y(a,null)),disabled:a.disabled,tooltipText:a.tooltipText,tooltipPosition:a.tooltipPosition,size:g.convertButtonSize(e),fitParent:a.flexibleWidth,flexibleWidth:a.flexibleWidth,shape:a.shape}):k.createElement(f.ComboMenuButton,{id:a.id,key:d,buttonColor:null!=a.color?g.convertButtonColor(a.color):f.ExtendedButtonColor.Gray,onButtonClick:()=>this.callHandler.callWithUAT((a)=>y(a,null)),onDropdownClick:()=>{this.popupController.togglePopup(m,n);this.popupController.isPopupOpen(m)&&F.avro.Avro.createDefaultLogger().logShowUploadOptions()},
content:a.content,size:g.convertButtonSize(e),actions:t.wrapActions(this.callHandler,[{id:a.id+"-option-upload-from-computer",onClick:(a)=>y(a,null),icon:f.IconSmallId.Upload,enabled:!0,title:ma.I18n.ts("Upload from computer")},c.DropdownMenuSeparator,...h.map((b)=>({icon:b.icon,enabled:!0,onClick:(a)=>y(a,b.id),id:a.id+"-option-"+b.id,title:b.name}))]),hidePopupPointer:!1,popupIds:b.popupIds,parentIds:b.parentIds,disabled:a.disabled,dataLookup:a.id,tooltipText:a.tooltipText,tooltipPosition:a.tooltipPosition,
fitParent:a.flexibleWidth,flexibleWidth:a.flexibleWidth,shape:a.shape})}}}toggle(a){return{createButtonReactElement:(b,d,e)=>{b={content:a.content,id:a.id,onClick:null==a.onClick?null:()=>this.callHandler.callWithUAT(a.onClick),disabled:a.disabled,tooltipText:a.tooltipText,tooltipPosition:a.tooltipPosition,fitParent:a.flexibleWidth,flexibleWidth:a.flexibleWidth,size:g.convertButtonSize(e),shape:a.shape};return k.createElement(f.ToggleButton,Object.assign({key:d},b,{pushed:a.pushed}))}}}};var D={},
za=this&&D.__rest||function(a,b){var d={},e;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&0>b.indexOf(e)&&(d[e]=a[e]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(e=Object.getOwnPropertySymbols(a);c<e.length;c++)0>b.indexOf(e[c])&&Object.prototype.propertyIsEnumerable.call(a,e[c])&&(d[e[c]]=a[e[c]])}return d};Object.defineProperty(D,"__esModule",{value:!0});D.BaseUIImpl=class{constructor(a,b,d,e,h,m,f,y){this.containerKind=a;this.applicationController=b;this.callHandler=
d;this.popupController=e;this.colorGridProvider=h;this.maybeEditorSession=m;this.audioController=f;this.simpleUi=w.wrapIntoKillable(new t.SimpleListItemUIImpl(this.applicationController,this.callHandler,this.popupController));this.multiUi=w.wrapIntoKillable(new t.MultiSelectListItemUIImpl(this.applicationController,this.callHandler));this.timelineUi=w.wrapIntoKillable(new t.TimelineListItemUIImpl(this.callHandler,this.popupController));this.popupUi=this.containerKind===c.ContainerKind.popup?this:
w.wrapIntoKillable(y(c.ContainerKind.popup));this.buttonUi=w.wrapIntoKillable(new T.ButtonUIImpl(this.popupUi,this.callHandler,this.popupController,this.applicationController))}itemContainerHasMargin(){return this.containerKind===c.ContainerKind.dialogRow}getItemContainerWidth(){return this.containerKind===c.ContainerKind.dialogRow?null:f.DialogItemCellWidth.single}kill(){this.simpleUi.kill();this.multiUi.kill();this.timelineUi.kill();this.popupUi!==this&&this.popupUi.kill()}static createColorGridsFromColorGridArgss(a,
b,d,e){return b.map((b)=>({colors:b.colors,id:b.id,title:b.title,buttons:null==b.buttonArgs?null:g.wrapIntoItemContainer(a.key,{kind:f.ItemContainerKind.horizontal,dataWidget:f.DataWidget.Buttons,justifyContent:c.ButtonAlign.Start,flexWrap:f.FlexWrap.wrap,noMargin:!0},null==b.buttonArgs?[]:b.buttonArgs.map((b,d)=>e.button(b).createButtonReactElement(a,d,c.ButtonSize.Small)))}))}horizontal(a){return{kind:f.ItemContainerKind.horizontal,dataWidget:a,noMargin:this.itemContainerHasMargin()}}horizontalWidth(a){return{kind:f.ItemContainerKind.horizontal,
dataWidget:a,noMargin:this.itemContainerHasMargin(),width:this.getItemContainerWidth()}}horizontalNoMargin(a){return{kind:f.ItemContainerKind.horizontal,dataWidget:a,noMargin:!0}}button(a,b,d){const e=d(this.buttonUi);return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:Object.assign(Object.assign({},this.horizontal(f.DataWidget.Buttons)),{justifyContent:b,flexWrap:f.FlexWrap.wrap}),createItemElement:(b)=>e.map((d,e)=>d.createButtonReactElement(b,e,a))}}droparea(a){const b=(b,d)=>
this.callHandler.callWithUAT((e)=>{null!=b&&(c.FileFilter.passes(a.filter,b)?null===a||void 0===a?void 0:a.onFileSelected(e,{file:b,source:d}):null!=a.onInvalidFileSelected&&(null===a||void 0===a?void 0:a.onInvalidFileSelected(e,{fileName:b.name,source:d})))}),d=a.hideUploadButton?null:this.buttonUi.upload({color:a.color,id:"drop-area-button",fileFilter:a.filter,onFileSelected:a.onFileSelected,onInvalidFileSelected:a.onInvalidFileSelected,content:{text:ma.I18n.ts("Upload a file")}});return{kind:c.ItemKind.Container,
containerKind:this.containerKind,props:this.horizontal(f.DataWidget.DropArea),createItemElement:(e)=>k.createElement(f.DropArea,{onDrop:(a)=>b(a,"DROPPED"),illustration:a.illustration,text:a.text,minHeight:200,errorText:a.errorText,caption:a.caption,showSpinner:a.showSpinner,url:a.url,dataLookup:a.dataLookup},null===d||void 0===d?void 0:d.createButtonReactElement(e,0,c.ButtonSize.Small))}}progressBar(a){const {id:b,caption:d,title:e,percentage:h,titleTooltip:m,errorText:n,onCancel:y,onRestart:g,control:l}=
a,N=y?()=>this.callHandler.callWithUAT((a)=>y(a)):null;return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:this.horizontalNoMargin(f.DataWidget.ProgressBar),createItemElement:()=>k.createElement(f.ProgressBar,{id:b,caption:d,title:e,titleTooltip:m,percentage:h,errorText:n,onCancel:N,onRestart:g,control:l})}}separator(a=!1){return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:this.horizontalNoMargin(f.DataWidget.HorizontalSeparator),createItemElement:()=>k.createElement(f.HorizontalSeparator,
{nospace:a})}}sectionHeader(a){return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:this.horizontal(f.DataWidget.SectionHeader),createItemElement:()=>k.createElement(f.SidebarSectionHeader,{content:a.content,bottomPadding:a.bottomPadding})}}label(a){return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:this.horizontal(f.DataWidget.Label),createItemElement:()=>k.createElement(f.SidebarParagraph,{content:a})}}paragraph(a,b){const d=this.sectionHeader({content:a}),e=this.label(b);
return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:{kind:f.ItemContainerKind.vertical,dataWidget:f.DataWidget.Paragraph,noMargin:!0},createItemElement:(a)=>[g.wrapIntoItemContainer("title",d.props,d.createItemElement(a)),g.wrapIntoItemContainer("text",e.props,e.createItemElement(a))]}}caution(a,b){return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:this.horizontal(f.DataWidget.Caution),createItemElement:()=>k.createElement(f.Caution,{text:a,type:b})}}infoMessage(a){return this.caution(a,
f.CautionTypes.Info)}errorMessage(a){return this.caution(a,f.CautionTypes.Error)}checkbox(a){const b=(b)=>this.callHandler.callWithUAT((d)=>a.onCheck(d,b));return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:this.horizontal(f.DataWidget.Checkbox),createItemElement:()=>k.createElement(f.Checkbox,{dataLookup:a.id,onCheck:b,checked:a.checked,disabled:a.disabled,label:a.label})}}slider(a){const b={title:a.title,value:a.value,disabled:a.disabled,steps:a.steps,onChange:(b,e)=>this.callHandler.callWithUAT((d)=>
a.onChange(d,{value:b,isFinal:e}))};return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:this.horizontal(f.DataWidget.Slider),createItemElement:()=>k.createElement(f.Slider,Object.assign({},b))}}inputField(a){return this.textarea(Object.assign(Object.assign({},a),{rows:null,flexibleHeight:!1}))}textarea(a){const b={type:"text",onValueChange:"onValueChange"in a&&null!=a.onValueChange?(b)=>this.callHandler.callWithUAT((d)=>a.onValueChange(d,b)):null,onEnter:null==a.onEnter?null:()=>
this.callHandler.callWithUAT((b)=>a.onEnter(b)),bottomText:a.bottomText,id:a.id,errorText:a.errorText,placeholderText:a.placeholderText,value:a.value,rows:a.rows,disabled:a.disabled,maxLength:"maxLength"in a?a.maxLength:null,readonly:"readonly"in a?a.readonly:null,autofocus:"autofocus"in a?a.autofocus:!1,tooltipText:a.tooltipText,tooltipPosition:a.tooltipPosition,fitParent:!0};return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:{kind:a.flexibleHeight?f.ItemContainerKind.verticalDynamic:
f.ItemContainerKind.horizontal,dataWidget:f.DataWidget.Textarea,noMargin:this.itemContainerHasMargin(),width:this.getItemContainerWidth()},createItemElement:()=>k.createElement(f.InputField,Object.assign({key:b.id},b))}}audio(a){return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:this.horizontal(f.DataWidget.Audio),createItemElement:({popupIds:b,parentIds:d})=>{b={id:a.id,onClick:a.onClick,audioBuffer:a.audioBuffer,audioPlayer:this.audioController,actions:t.wrapActionWrapperActions(this.callHandler,
a.actions,this.popupController,d,`${a.id}-actionWrapper-popup`),onMore:(a)=>{this.popupController.togglePopup(a,d)},popupIds:b};return k.createElement(f.Audio,Object.assign({},b))}}}searchField(a){const {onSearchButtonClick:b,onValueChange:d,onEnter:e}=a,h={bottomText:a.bottomText,id:a.id,errorText:a.errorText,onValueChange:(a)=>this.callHandler.callWithUAT((b)=>d(b,a)),onEnter:e?()=>this.callHandler.callWithUAT((a)=>e(a)):null,placeholderText:a.placeholderText,value:a.value,disabled:a.disabled,readonly:!1,
maxLength:a.maxLength,onSearchButtonClick:b?()=>this.callHandler.callWithUAT((a)=>b(a)):null,autofocus:a.autofocus,tooltipText:a.tooltipText,tooltipPosition:a.tooltipPosition,fitParent:!0};return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:this.horizontalWidth(f.DataWidget.SearchField),createItemElement:()=>[k.createElement(f.SearchField,Object.assign({key:a.id},h))]}}dropdown(a){return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:this.horizontalWidth(f.DataWidget.Dropdown),
createItemElement:({popupIds:b,parentIds:d})=>{b={activeId:a.activeId,onChange:null!=a.onChange?(b,c)=>this.callHandler.callWithUAT((e)=>{a.onChange(e,b);return this.popupController.closePopup(c,d)}):null,options:a.options.map((a)=>({id:a.id,title:a.title,disabled:a.disabled||!1})),openedIds:b,onOpen:(a)=>this.popupController.openPopup(a,d),disabled:a.disabled||!1,placeholderText:a.placeholderText||"",dataLookup:a.id,tooltipText:a.tooltipText};return k.createElement(f.Dropdown,Object.assign({},b))}}}popupDropdown(a){const b=
a(this.popupUi),d=b.id+"-popup",e=(a)=>this.popupController.togglePopup(d,a);return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:this.horizontal(f.DataWidget.PopupDropdown),createItemElement:(a)=>k.createElement(f.PopupDropdown,{id:b.id,popupIds:a.popupIds,parentIds:a.parentIds,currentScrollIntoViewIds:a.currentScrollIntoViewIds,alignment:null,hidePopupPointer:b.hidePopupPointer,popupHeight:b.popupHeight?b.popupHeight:c.PopupHeight.Full,popupHeader:g.mapToCreateReactElement(b.popupHeader),
popupContent:g.mapToCreateReactElement(b.popupContent),popupFooter:g.mapToCreateReactElement(b.popupFooter),dataLookup:b.id,disabled:b.disabled,onClick:()=>{e(a.parentIds)},text:b.text,textDisabled:b.textDisabled,popupOpener:!0,tooltipText:b.tooltipText})}}colorPicker(a){const b=(b,d,c)=>this.callHandler.callWithUAT((e)=>a.onChange(e,{newFill:b,fills:d,isFinal:c})),d=(b)=>{(this.popupController.isPopupOpen(a.id)||null==a.onShowPopup||this.callHandler.call(a.onShowPopup))&&this.popupController.togglePopup(`${a.id}-popupOpener-popup`,
b)},e=(a)=>(b)=>this.popupController.togglePopup(b,a);return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:a.expanded?this.horizontalNoMargin(f.DataWidget.ColorPicker):Object.assign(Object.assign({},this.horizontal(f.DataWidget.ColorPicker)),{alignItems:"center"}),createItemElement:(c)=>{var h,n=null==a.customColors?[]:a.customColors;n=null==this.colorGridProvider?n:this.colorGridProvider.getColorGrids(n,!1!==a.showThemeColors);n={id:a.id,disabled:a.disabled,label:a.label,title:a.title,
expanded:a.expanded,fills:a.fills,onChange:b,onColorButtonClick:()=>{d(c.parentIds)},onColorpickerDropdownClick:a.expanded?e(c.parentIds):e([...null!==(h=c.parentIds)&&void 0!==h?h:[],`${a.id}-popupOpener-popup`]),showPopup:-1!==c.popupIds.indexOf(`${a.id}-popupOpener-popup`),openedPopupIds:c.popupIds,parentIds:c.parentIds,colorGrids:D.BaseUIImpl.createColorGridsFromColorGridArgss(c,n,this.callHandler,this.buttonUi),showColorWheel:a.showColorWheel,snapshotRenderer:this.maybeEditorSession.hasValue()?
this.maybeEditorSession.value.snapshotRenderer:null,isOverlayColorPicker:a.isOverlayColorPicker,colorButtonTooltipProps:a.colorButtonTooltipProps,popupPosition:"left",hidePopupPointer:!1,size:f.ExtendedButtonSize.Small,currentScrollIntoViewIds:c.currentScrollIntoViewIds};return a.expanded?k.createElement(f.ColorPickerSidebar,{expanded:a.expanded,title:n.title,onChange:n.onChange,onColorpickerDropdownClick:n.onColorpickerDropdownClick,fills:n.fills,colorGrids:n.colorGrids,showColorWheel:n.showColorWheel,
id:`${n.id}-popup`,snapshotRenderer:n.snapshotRenderer,isOverlayColorPicker:n.isOverlayColorPicker,openedPopupIds:c.popupIds}):k.createElement(f.ColorPickerButton,Object.assign({},n))}}}simpleColorPicker(a){const {onColorSelect:b}=a,d=za(a,["onColorSelect"]),{id:e}=a,h=(a)=>this.callHandler.callWithUAT((d)=>b(d,a)),m=(a)=>this.popupController.togglePopup(e,a);return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:Object.assign(Object.assign({},this.horizontal(f.DataWidget.SimpleColorPicker)),
{justifyContent:"space-between",alignItems:"center"}),createItemElement:(b)=>[null!=a.label?k.createElement(f.SidebarParagraph,{content:a.label}):null,k.createElement(f.SimpleColorPicker,Object.assign({onColorButtonClick:()=>{m(b.parentIds)},onColorSelect:h,showPopup:-1!==b.popupIds.indexOf(e)},d))]}}tabMenuButtons(a){const b={activeId:a.activeId,onChange:null!=a.onChange?(b)=>this.callHandler.callWithUAT((d)=>a.onChange(d,b)):null,options:a.options};return{kind:c.ItemKind.Simple,containerKind:this.containerKind,
props:this.horizontalNoMargin(f.DataWidget.TabMenuButtons),createItemElement:()=>k.createElement(f.SidebarTabMenu,Object.assign({},b))}}illustration(a,b){return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:Object.assign(Object.assign({},this.horizontalNoMargin(f.DataWidget.Illustration)),{justifyContent:"center"}),createItemElement:()=>k.createElement(f.SidebarIllustration,{caption:a,illustrationId:b})}}vimeoVideo(a){const b={playerKind:f.PlayerKind.vimeo,videoId:a.videoId,autoplay:null!=
a.autoplay?a.autoplay:!0,muted:null!=a.muted?a.muted:!0,onLoaded:a.onLoaded,onEnded:a.onEnded,onPlay:a.onPlay,onPause:a.onPause,onMute:a.onMute,onUnmute:a.onUnmute};return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:this.horizontal(f.DataWidget.VimeoVideo),createItemElement:()=>k.createElement(f.Video,Object.assign({},b))}}spinner(a,b){return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:Object.assign(Object.assign({},this.horizontal(f.DataWidget.Spinner)),{justifyContent:"center"}),
createItemElement:()=>k.createElement(f.Spinner,{color:a,spinnerSize:b})}}image(a){return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:{kind:f.ItemContainerKind.horizontal,dataWidget:f.DataWidget.Image,noMargin:a.noMargin},createItemElement:()=>k.createElement(f.ImageComponent,{src:a.src,dataLookup:a.id,title:a.title,noMargin:a.noMargin})}}imageCheckbox(a){const b=(b)=>{this.callHandler.callWithUAT((d)=>{a.onCheck(d,b)})};return{kind:c.ItemKind.Simple,containerKind:this.containerKind,
props:this.horizontalNoMargin(f.DataWidget.ImageCheckbox),createItemElement:()=>k.createElement(f.ImageCheckbox,{imgUrl:a.imgUrl,checked:a.checked,hasLightColor:a.hasLightColor,onCheck:b,disabled:a.disabled,dataLookup:a.id})}}collapseSection(a){const b={id:a.id,title:a.title},d=a.items.filter((a)=>null!=a);return{kind:c.ItemKind.Container,containerKind:this.containerKind,props:this.horizontalNoMargin(f.DataWidget.CollapseSection),createItemElement:(a)=>k.createElement(f.CollapseSection,Object.assign({},
b),d.map((b,d)=>g.wrapIntoItemContainer(d,b.props,b.createItemElement(a))))}}containerWithColoredBackground(a){const b=a.content.filter((a)=>null!=a);return{kind:c.ItemKind.Container,containerKind:this.containerKind,props:this.horizontalNoMargin(f.DataWidget.ContainerWithColoredBackground),createItemElement:(a)=>k.createElement(f.SidebarContainerWithBackground,null,b.map((b,d)=>g.wrapIntoItemContainer(d,b.props,b.createItemElement(a))))}}getListItemSize(a){switch(a){case c.ListItemType.full:case c.ListItemType.numbered:return f.ListItemSize.full;
case c.ListItemType.large:return f.ListItemSize.large;case c.ListItemType.small:return f.ListItemSize.small;default:return p.Utils.assertNever(a,`Unknown ListItemType: ${a}`)}}getColumnLayout(a,b){if(b)return f.ListColumnLayout.normal;switch(a){case c.ContainerKind.extraLargeDialog:return f.ListColumnLayout.triple;case c.ContainerKind.mediumDialog:return f.ListColumnLayout.double;case c.ContainerKind.sidebar:case c.ContainerKind.popup:case c.ContainerKind.leftSidebar:return f.ListColumnLayout.normal;
case c.ContainerKind.alertDialog:case c.ContainerKind.smallDialog:case c.ContainerKind.largeDialog:case c.ContainerKind.dialog:case c.ContainerKind.dialogRow:throw Error(`Not allowed ContainerKind: ${a}`);default:p.Utils.assertNever(a,`Not allowed ContainerKind: ${a}`)}}verticalListI(a){const b=a.itemLayout,d=this.getListItemSize(a.itemType),e=a.itemType===c.ListItemType.numbered,h=this.getColumnLayout(this.containerKind,e),m=e?f.ListType.numbered:f.ListType.simple,n=(c,n)=>a.needItemContainer?e?
k.createElement(f.NumberedListItemContainer,Object.assign({},{itemLayout:b,columnLayout:h,itemSize:d,listType:m,index:c}),n):k.createElement(f.SimpleListItemContainer,Object.assign({},{itemLayout:b,columnLayout:h,itemSize:d,listType:m}),n):n;return{kind:c.ItemKind.Simple,containerKind:this.containerKind,props:{kind:null!=a.flexGrow&&0!==a.flexGrow?f.ItemContainerKind.verticalDynamic:f.ItemContainerKind.vertical,dataWidget:f.DataWidget.VerticalList,noMargin:!0},createItemElement:(b)=>{let e=0;const g=
{itemLayout:a.itemLayout,columnLayout:h,listType:m,itemSize:d,requestAdditionalItems:()=>this.callHandler.call(()=>{var b;return null===(b=a.requestAdditionalItems)||void 0===b?void 0:b.call(a)}),flexGrow:a.flexGrow,isOnPopup:this.containerKind===c.ContainerKind.popup,progress:null==a.progress?f.ListProgress.finished:a.progress,id:a.id,onReorderStart:a.onReorderStart,onReorderEnd:a.onReorderEnd,showTimeline:a.showTimeline,noMargin:a.noMargin,animate:a.animate,currentScrollIntoViewIds:b.currentScrollIntoViewIds,
items:a.items.map((h,m,g)=>{g=0===m?null:g[m-1].addAfterActions;var y=h.addAfterActions,z=(d,e)=>{const h=`${a.id}-${m}-${d}`;return{forceVisible:0<=b.popupIds.indexOf(`${h}-popup`),element:this.buttonUi.menuButton({id:h,content:{icon:c.IconSmallId.Plus},actions:e,color:c.ButtonColor.Blue,shape:c.ButtonShape.Circle,popupPosition:"right"}).createButtonReactElement({key:d,popupIds:b.popupIds,parentIds:b.parentIds,currentScrollIntoViewIds:b.currentScrollIntoViewIds},0,c.ButtonSize.Small)}};const l={index:m,
showTitle:a.showTitle,title:h.title,itemSize:d,multiline:a.itemLayout===c.ListItemLayout.dynamic,addBeforeGhost:null!=g&&0<g.length?z("before-ghost",null):null,addBeforeButton:null!=g&&0<g.length?z("before-button",g):null,addAfterGhost:null!=y&&0<y.length?z("after-ghost",null):null,addAfterButton:null!=y&&0<y.length?z("after-button",y):null};g=e;y=h.height;e=z=null==y||null==g?null:g+y;return{id:h.id,top:g,height:y,bottom:z,createElement:(a)=>k.createElement(f.ListItemWithTitle,Object.assign({key:this.getListItemKey(h,
m)},l),n(m,h.createReactElement({popupIds:b.popupIds,reorderCallbacks:a})))}})};return k.createElement(f.VerticalList,Object.assign({},g))}}}simpleList(a){const b=a(this.simpleUi);return this.verticalListI({itemType:b.itemType,flexGrow:b.flexGrow,requestAdditionalItems:b.requestAdditionalItems,progress:b.progress,showTitle:b.showTitle,itemLayout:b.itemLayout,id:b.id,onReorderStart:null,onReorderEnd:null,showTimeline:!1,needItemContainer:!0,noMargin:!1,items:b.items.map((a)=>({key:a.key,title:a.title,
id:a.id,height:null,createReactElement:(d)=>a.createReactElement({popupIds:d.popupIds,reorderCallbacks:d.reorderCallbacks,activeId:b.activeId}),addAfterActions:[]})),animate:!1})}multiSelectList(a){const b=a(this.multiUi);return this.verticalListI({itemType:b.itemType,flexGrow:b.flexGrow,requestAdditionalItems:b.requestAdditionalItems,progress:b.progress,showTitle:b.showTitle,itemLayout:b.itemLayout,id:b.id,onReorderStart:null,onReorderEnd:null,showTimeline:!1,needItemContainer:!0,noMargin:!1,items:b.items.map((a)=>
({key:a.key,title:a.title,id:a.id,height:null,createReactElement:(d)=>a.createReactElement({popupIds:d.popupIds,reorderCallbacks:d.reorderCallbacks,selectedIds:b.selectedIds,onSelectionChange:b.onSelectionChange,onDrop:b.onDrop,preziDataMimeParams:b.preziDataMimeParams}),addAfterActions:[]})),animate:!1})}timelineList(a){var b;const d=a(this.timelineUi);return this.verticalListI({itemType:c.ListItemType.full,flexGrow:1,requestAdditionalItems:null,progress:null,showTitle:!1,itemLayout:c.ListItemLayout.dynamic,
id:d.id,onReorderStart:null==d.onReorderStart?null:(a)=>this.callHandler.call(()=>d.onReorderStart({fromIndex:a})),onReorderEnd:null==d.onReorderEnd?null:(a,b,c)=>this.callHandler.callWithUAT((e)=>d.onReorderEnd(e,{fromIndex:a,count:b,toIndex:c})),showTimeline:!0,needItemContainer:!1,noMargin:!0,items:d.items.map((a)=>({key:a.key,title:a.title,id:a.id,height:a.height,createReactElement:(b)=>a.createReactElement({popupIds:b.popupIds,reorderCallbacks:b.reorderCallbacks,activeId:d.activeId,showTimeline:!0}),
addAfterActions:[]})),animate:null!==(b=d.animate)&&void 0!==b?b:!1})}getListItemKey(a,b){return[b,null===a||void 0===a?void 0:a.key].filter((a)=>null!=a).join("-")}};D.ExtendedDialogUIImpl=class extends D.BaseUIImpl{constructor(a,b,d,c,h,f,n,g,z){super(a,b,d,c,h,f,n,g);this.dialogRowUI=z}dialogItemRow(a){const b=a(this.dialogRowUI),d={[c.DialogItemRowLayout.medium_1_1]:[f.DialogItemCellWidth.single,f.DialogItemCellWidth.single],[c.DialogItemRowLayout.medium_2]:[f.DialogItemCellWidth.double],[c.DialogItemRowLayout.extraLarge_1_1_1]:[f.DialogItemCellWidth.single,
f.DialogItemCellWidth.single,f.DialogItemCellWidth.single],[c.DialogItemRowLayout.extraLarge_1_2]:[f.DialogItemCellWidth.single,f.DialogItemCellWidth.double],[c.DialogItemRowLayout.extraLarge_2_1]:[f.DialogItemCellWidth.double,f.DialogItemCellWidth.single],[c.DialogItemRowLayout.extraLarge_3]:[f.DialogItemCellWidth.triple]},e={backgroundColor:b.backgroundColor?b.backgroundColor:"#ffffff",hasBottomBorder:b.hasBottomBorder};return{kind:c.ItemKind.Container,containerKind:this.containerKind,props:this.horizontalNoMargin(f.DataWidget.DialogItemRow),
createItemElement:(a)=>k.createElement(f.DialogItemRow,Object.assign({},e),b.items.map((c,e)=>k.createElement(f.DialogItemCell,{width:d[b.layout][e]},g.wrapIntoItemContainer(e,c.props,c.createItemElement(a)))))}}};var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.DialogCreatorImpl=class{constructor(a,b,d){this.dialogManager=a;this.applicationUI=b;this.buttonUI=d}alert(a){a=a(this.applicationUI.alertDialog);a=this.createDialogItem(f.DialogType.small,a.id,a.title,null,[this.applicationUI.alertDialog.label(a.description)],
a.onOpen,a.onClose,null,null,null,null!=a.footer?a.footer(this.buttonUI):null,a.hideOverlay,a.height,a.caution);this.applicationUI.dialogItems.set(a.id,a)}extraLarge(a){a=a(this.applicationUI.extraLargeDialog);a=this.createDialogItem(f.DialogType.extraLarge,a.id,a.title,a.subtitle,a.content,a.onOpen,a.onClose,a.onCloseButtonClicked,a.onBackButtonClicked,a.header,null!=a.footer?a.footer(this.buttonUI):null,a.hideOverlay,a.height,a.caution);this.applicationUI.dialogItems.set(a.id,a)}large(a){a=a(this.applicationUI.largeDialog);
a=this.createDialogItem(f.DialogType.large,a.id,a.title,a.subtitle,a.content,a.onOpen,a.onClose,a.onCloseButtonClicked,a.onBackButtonClicked,a.header,null!=a.footer?a.footer(this.buttonUI):null,a.hideOverlay,a.height,a.caution);this.applicationUI.dialogItems.set(a.id,a)}medium(a){a=a(this.applicationUI.mediumDialog);a=this.createDialogItem(f.DialogType.medium,a.id,a.title,a.subtitle,a.content,a.onOpen,a.onClose,a.onCloseButtonClicked,a.onBackButtonClicked,a.header,null!=a.footer?a.footer(this.buttonUI):
null,a.hideOverlay,a.height,a.caution);this.applicationUI.dialogItems.set(a.id,a)}small(a){a=a(this.applicationUI.smallDialog);a=this.createDialogItem(a.align===c.DialogAlign.center?f.DialogType.small:f.DialogType.corner,a.id,a.title,null,a.content,a.onOpen,a.onClose,a.onCloseButtonClicked,a.onBackButtonClicked,a.header,null!=a.footer?a.footer(this.buttonUI):null,a.hideOverlay,a.height,a.caution);this.applicationUI.dialogItems.set(a.id,a)}createDialogItem(a,b,d,e,h,m,n,y,z,l,N,v,p,r){const oa=null==
N?null:[this.applicationUI.largeDialog.button(c.ButtonSize.Large,c.ButtonAlign.End,()=>N)],q=null!=y?()=>{y();this.dialogManager.hide(b)}:null;return{id:b,title:d,hideOverlay:v,onOpen:()=>{null!=m&&this.applicationUI.callHandler.call(()=>m())},onClose:()=>{null!=n&&this.applicationUI.callHandler.call(()=>n())},createReactElement:(c)=>k.createElement(f.Dialog,{key:`${c.key}-${b}`,title:d,subtitle:e,dialogType:a,onClose:q,onBack:z,header:null!=l?g.createItemContainers(l,c.popupIds,c.currentScrollIntoViewIds):
null,footer:null!=oa?g.createItemContainers(oa,c.popupIds,c.currentScrollIntoViewIds):null,caution:r,height:p},g.createItemContainers(h,c.popupIds,c.currentScrollIntoViewIds))}}};var E={extractAction:function(a){if("action"in a){const b=a.action.args;return{onClick:(a)=>b.onExecute(a,c.ActionTrigger.Mouse),title:b.shortcut.title(),icon:b.shortcut.icon,tooltip:b.shortcut.tooltip,enabled:b.enabled,shortcut:b.shortcut}}return a}};Object.defineProperty(E,"__esModule",{value:!0});E.ShortcutActionImpl=
class{constructor(a){this.args=a}};var ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.PropertyBarUIImpl=class{constructor(a,b,d,c,h,f,n,g){this.callHandler=a;this.pluginEnabled=b;this.colorGridProvider=d;this.popupController=c;this.popupManager=h;this.popupUi=f;this.buttonUi=n;this.maybeEditorSession=g}formatToolTip(a){var b=a.shortcut;a=a.tooltip;b=null==b||null==b.key?null:(b.alt?R.PreziUAParser.getAltKeyOnPlatform():"")+(b.shift?R.PreziUAParser.getShiftKeyOnPlatform():"")+(b.osCmd?
R.PreziUAParser.getCmdKeyOnPlatform():"")+(b.ctrl?R.PreziUAParser.getCtrlKeyOnPlatform():"")+String.fromCharCode(b.key).toUpperCase();return null==a&&null==b?null:null!=a&&null==b?a:null==a&&null!=b?b:`${a} (${b})`}button(a){const b=E.extractAction(a),d=b.onClick?()=>this.callHandler.callWithUAT(b.onClick):()=>{};return{weight:a.weight,parent:a.parent,id:a.id,createReactElement:(c)=>k.createElement(f.NormalButton,{id:a.id,key:c.key,buttonColor:f.ExtendedButtonColor.Transparent,size:f.ExtendedButtonSize.PropertyBar,
content:{text:b.title,icon:b.icon},onClick:d,disabled:!this.isEnabled(b.enabled),tooltipText:this.formatToolTip(b),checked:a.checked}),containerKind:c.ContainerKind.propertybar}}colorPicker(a){const b=a.id+"-popupOpener-popup",d=()=>this.popupManager.togglePopup(a.id),e=null!=a.onChange?(b,d,c)=>this.callHandler.callWithUAT((e)=>a.onChange(e,{newFill:b,fills:d,isFinal:c})):()=>{};return{weight:a.weight,parent:a.parent,id:a.id,createReactElement:(c)=>{this.popupManager.registerPopup(a.id,b,c.parentIds);
const h=this.colorGridProvider.getColorGrids(null==a.customColors?[]:a.customColors,!1!==a.showThemeColors);return k.createElement(f.ColorPickerButton,{id:a.id,disabled:!this.isEnabled(a.enabled),title:a.title,icon:a.icon,expanded:!0,fills:a.fills,onChange:e,onColorButtonClick:d,onColorpickerDropdownClick:(a)=>{var d;this.popupController.togglePopup(a,[...null!==(d=c.parentIds)&&void 0!==d?d:[],b])},showPopup:-1!==c.popupIds.indexOf(`${a.id}-popupOpener-popup`),openedPopupIds:c.popupIds,parentIds:c.parentIds,
colorGrids:D.BaseUIImpl.createColorGridsFromColorGridArgss(c,h,this.callHandler,this.buttonUi),showColorWheel:a.showColorWheel,snapshotRenderer:this.maybeEditorSession.hasValue()?this.maybeEditorSession.value.snapshotRenderer:null,isOverlayColorPicker:a.isOverlayColorPicker,colorButtonTooltipProps:a.colorButtonTooltipProps,popupPosition:"bottom",popupAlignment:"left",hidePopupPointer:!0,size:f.ExtendedButtonSize.PropertyBar,currentScrollIntoViewIds:c.currentScrollIntoViewIds})},containerKind:c.ContainerKind.propertybar}}popupButton(a){const b=
a(this.popupUi),d=b.id+"-popupOpener-popup",e=()=>this.popupManager.togglePopup(b.id);return{weight:b.weight,parent:b.parent,id:b.id,createReactElement:(a)=>{this.popupManager.registerPopup(b.id,d,a.parentIds);return k.createElement(f.PopupButton,{id:b.id,key:a.key,buttonColor:f.ExtendedButtonColor.Transparent,size:f.ExtendedButtonSize.PropertyBar,content:b.content,disabled:!this.isEnabled(!b.disabled),onClick:e,popupIds:a.popupIds,parentIds:a.parentIds,currentScrollIntoViewIds:a.currentScrollIntoViewIds,
alignment:null,tooltipText:b.tooltipText,tooltipPosition:b.tooltipPosition,popupHeader:g.mapToCreateReactElement(b.popupHeader),popupContent:g.mapToCreateReactElement(b.popupContent),popupFooter:g.mapToCreateReactElement(b.popupFooter),dataLookup:b.id,popupHeight:b.popupHeight?b.popupHeight:c.PopupHeight.Full,showArrow:b.showArrow,hidePopupPointer:!0,popupAlignment:"left",popupPosition:"bottom"})},containerKind:c.ContainerKind.propertybar}}comboButton(a){const b=a(this.popupUi),d=b.id+"-popupOpener-popup",
e=()=>this.popupManager.togglePopup(b.id);return{weight:b.weight,parent:b.parent,id:b.id,createReactElement:(a)=>{this.popupManager.registerPopup(b.id,d,a.parentIds);return k.createElement(f.ComboButton,{key:a.key,id:b.id,buttonColor:f.ExtendedButtonColor.Transparent,popupIds:a.popupIds,parentIds:a.parentIds,currentScrollIntoViewIds:a.currentScrollIntoViewIds,hidePopupPointer:!0,alignment:"left",popupHeight:b.popupHeight?b.popupHeight:c.PopupHeight.Full,content:b.content,size:f.ExtendedButtonSize.PropertyBar,
disabled:b.disabled,onDropdownClick:e,onButtonClick:()=>this.callHandler.callWithUAT((a)=>b.onClick(a)),popupHeader:g.mapToCreateReactElement(b.popupHeader),popupContent:g.mapToCreateReactElement(b.popupContent),popupFooter:g.mapToCreateReactElement(b.popupFooter),dataLookup:b.id,tooltipText:b.tooltipText,tooltipPosition:b.tooltipPosition})},containerKind:c.ContainerKind.propertybar}}submenu(a){const b=a.id+"-popupOpener-popup",d=()=>this.popupManager.togglePopup(a.id),e=null==a.items?null:a.items.map((a)=>
{const b=E.extractAction(a);return Object.assign(Object.assign({},a),{onClick:()=>this.callHandler.callWithUAT((b)=>a.onClick(b)),enabled:this.isEnabled(b.enabled)})});return{weight:a.weight,parent:a.parent,id:a.id,createReactElement:(c)=>{this.popupManager.registerPopup(a.id,b,c.parentIds);return k.createElement(f.SubmenuButton,{key:c.key,id:a.id,buttonColor:f.ExtendedButtonColor.Transparent,size:f.ExtendedButtonSize.PropertyBar,popupIds:c.popupIds,parentIds:c.parentIds,content:{text:a.title,icon:a.icon},
disabled:"enabled"in a?!a.enabled:!1,onDropdownClick:d,actions:e,dataLookup:a.id,tooltipText:a.tooltip,showArrow:!0,popupPosition:"bottom",popupAlignment:"left"})},containerKind:c.ContainerKind.propertybar}}dropdownMenu(a){const b=a.id+"-popupOpener-popup",d=()=>this.popupManager.togglePopup(a.id),e=null==a.items?null:a.items.map((b)=>null==b||b===c.DropdownMenuSeparator?c.DropdownMenuSeparator:"content"in b?b:t.wrapItemAction(this.callHandler,Object.assign(Object.assign({},b),{enabled:this.isEnabled(b.enabled),
onClick:(d)=>{this.popupManager.closePopup(a.id);if(null!=b.onClick)b.onClick(d)}})));return{weight:a.weight,parent:a.parent,id:a.id,createReactElement:(c)=>{this.popupManager.registerPopup(a.id,b,c.parentIds);return k.createElement(f.MenuButton,{id:a.id,key:c.key,buttonColor:f.ExtendedButtonColor.Transparent,size:f.ExtendedButtonSize.PropertyBar,popupIds:c.popupIds,parentIds:c.parentIds,hidePopupPointer:!0,content:{text:a.title,icon:a.icon},disabled:"enabled"in a?!a.enabled:!1,popupPosition:"bottom",
popupAlignment:"left",onDropdownClick:d,actions:e,dataLookup:a.id,tooltipText:a.tooltip,showArrow:!0})},containerKind:c.ContainerKind.propertybar}}separator(a){return{weight:a.weight,parent:a.parent,id:a.id,createReactElement:()=>k.createElement(f.PropertyBarSeparator,{id:a.id,size:a.size,key:a.id}),containerKind:c.ContainerKind.propertybar,isPropertyBarSeparator:!0}}isEnabled(a){return this.pluginEnabled&&!1!==a}};var U={};Object.defineProperty(U,"__esModule",{value:!0});U.ApplicationUIImpl=class{constructor(a,
b,d,e,h,f,n,g,z,k,l,v){this.callHandler=a;this.closeContextMenu=d;this.pluginEnabled=e;this.shortcutDefintions=l;this.newSidebarArgs=new Map;this.newSpotlightArgs=new Map;this.dropDownMenuItems=[];this.tabMenuItems=[];this.mixerButtonItems=[];this.contextMenuItems=[];this.propertyBarItems=[];this.registeredShortcutActions=[];this.dialogItems=new Map;this.colorGrids=[];const m=(d)=>w.wrapIntoKillable(new D.BaseUIImpl(d,b,a,h,g,k,v,m));d=(d)=>w.wrapIntoKillable(new D.ExtendedDialogUIImpl(d,b,a,h,g,
k,v,m,this.dialogRow));this.popup=m(c.ContainerKind.popup);this.sidebar=m(c.ContainerKind.sidebar);this.leftSidebar=m(c.ContainerKind.leftSidebar);this.dialogRow=m(c.ContainerKind.dialogRow);this.alertDialog=m(c.ContainerKind.alertDialog);this.smallDialog=m(c.ContainerKind.smallDialog);this.mediumDialog=d(c.ContainerKind.mediumDialog);this.largeDialog=m(c.ContainerKind.largeDialog);this.extraLargeDialog=d(c.ContainerKind.extraLargeDialog);d=new T.ButtonUIImpl(this.popup,a,h,b);this.propertybar=w.wrapIntoKillable(new ca.PropertyBarUIImpl(a,
e,g,h,n,this.popup,d,k));this.dialog=w.wrapIntoKillable(new ba.DialogCreatorImpl(f,this,d))}kill(){this.sidebar.kill();this.leftSidebar.kill();this.alertDialog.kill();this.smallDialog.kill();this.mediumDialog.kill();this.largeDialog.kill();this.extraLargeDialog.kill();this.popup.kill();this.propertybar.kill();this.dialog.kill()}createSidebar(a){a=a(this.sidebar);null!=a&&this.newSidebarArgs.set(a.id,Object.assign(Object.assign({},a),{onOpen:O(a.onOpen),onClose:O(a.onClose),onPageBack:O(a.onPageBack),
onCloseButtonClicked:O(a.onCloseButtonClicked)}))}createLeftSidebar(a){a=a(this.leftSidebar);null!=a&&(this.newLeftSidebarArgs=Object.assign(Object.assign({},a),{onPageBack:O(a.onPageBack)}))}getDialogItems(){return this.dialogItems}createPropertyBarItem(a){a=a(this.propertybar);this.propertyBarItems.push(a)}createColorGrid(a){this.colorGrids.push(a)}spotlight(a){const b=(a)=>{const b=a.callout;return Object.assign(Object.assign({},a),{around:"uiElementId"in a.around?{uiElementSelector:`[data-lookup="${a.around.uiElementId}"]`}:
"preziElementId"in a.around?{canvasElementId:a.around.preziElementId}:"virtualElementId"in a.around?{virtualElementId:a.around.virtualElementId}:p.Utils.assertNever(a.around),callout:b&&Object.assign(Object.assign({},b),{onClose:"onClose"in b&&null!=b.onClose?()=>this.callHandler.callWithUAT(b.onClose):void 0,buttons:"buttons"in b&&null!=b.buttons?b.buttons.map((a)=>Object.assign(Object.assign({},a),{onClick:()=>this.callHandler.callWithUAT(a.onClick)})):void 0})})},d=a.overlay?a.overlay.holes.map((a)=>
b(a)):null,c=a.highlights?a.highlights.map((a)=>b(Object.assign(Object.assign({},a),{strict:!0}))):null;this.newSpotlightArgs.set(a.id,Object.assign(Object.assign({},a),{overlay:a.overlay?Object.assign(Object.assign({},a.overlay),{holes:d}):null,highlights:c,onClose:()=>{}}))}createMenuItem(a){if(a.kind===c.MenuItemKind.context){const b=E.extractAction(a);this.contextMenuItems=[...this.contextMenuItems,Object.assign(Object.assign(Object.assign({},a),b),{enabled:this.pluginEnabled&&(null==b.enabled||
b.enabled),onClick:(a,c)=>{null!=b.onClick&&this.callHandler.callWithUAT((d)=>b.onClick(d,{stageX:a,stageY:c}));this.closeContextMenu()}})]}else{const b=E.extractAction(a),d=this.pluginEnabled&&(null==b.enabled||b.enabled);switch(a.kind){case c.MenuItemKind.dropdown:this.dropDownMenuItems=[...this.dropDownMenuItems,Object.assign(Object.assign(Object.assign({},a),b),{enabled:d,onClick:b.onClick?()=>this.callHandler.callWithUAT(b.onClick):()=>{}})];break;case c.MenuItemKind.largeButton:this.tabMenuItems=
[...this.tabMenuItems,Object.assign(Object.assign(Object.assign({},a),b),{enabled:d,onClick:b.onClick?()=>this.callHandler.callWithUAT(b.onClick):()=>{},color:this.colorFromNamedColor(a.color)})];break;case c.MenuItemKind.mixerButton:this.mixerButtonItems=[...this.mixerButtonItems,Object.assign(Object.assign(Object.assign({},a),b),{enabled:d,onClick:b.onClick?()=>this.callHandler.callWithUAT(b.onClick):()=>{},onClickSecondary:a.onClickSecondary?()=>this.callHandler.callWithUAT(a.onClickSecondary):
null})];break;default:p.Utils.assertNever(a,`invalid menuitem kind ${a}`)}}}colorFromNamedColor(a){if(null==a)return null;switch(a){case c.NamedColors.topicButton:return"#1aa651";default:p.Utils.assertNever(a)}}createAction(a){if(!Object.keys(this.shortcutDefintions||{}).some((b)=>this.shortcutDefintions[b]===a.shortcut))throw Error(`Unregistered shortcut: ${JSON.stringify(a.shortcut)}`);const b=new E.ShortcutActionImpl(a);this.registeredShortcutActions.push(b);return b}};var da={};Object.defineProperty(da,
"__esModule",{value:!0});da.MessageHandlerImpl=class{constructor(){this.messageQueue=[];this.messageProcessors=new Map}registerMessageProcessor(a,b){this.messageProcessors.set(a.name,b);this.processPendingMessages()}unregisterMessageProcessor(a){this.messageProcessors.delete(a.name)}sendMessage(a,b){this.enqueueMessage("object"===typeof b&&"uat"in b?g.createCallWithAat(b.uat):null,a,b);this.processPendingMessages()}enqueueMessage(a,b,d){this.messageQueue.push({callWithAat:a,pluginDescription:b,message:d})}processPendingMessages(){window.setTimeout(()=>
{const a=[];for(let b of this.messageQueue){const d=this.getMessageProcessor(b.pluginDescription.name);null!=d?null==b.callWithAat?d.processMessage(b.message):b.callWithAat((a)=>{const c=Object.assign({},b.message);delete c.uat;c.aat=a;d.processMessage(c)}):a.push(b)}this.messageQueue=a},0)}getMessageProcessor(a){return this.messageProcessors.get(a)}};var G={};Object.defineProperty(G,"__esModule",{value:!0});G.UIContainer=class extends k.Component{constructor(){super(...arguments);this.unsubscribe=
null;this.state={content:null};this.nextState=null}shouldComponentUpdate(a,b){return!(this.props.id===a.id&&this.props.contentStream===a.contentStream&&p.Utils.arrayEquals(this.props.popupIds,a.popupIds)&&p.Utils.shallowCompare(this.state,b))}componentDidMount(){null!=this.props.contentStream&&(this.unsubscribe=this.filterStream(this.props.contentStream,this.props.id).onValue((a)=>{null==this.nextState&&p.Utils.callAtEndOfFrame(()=>{const a=this.nextState;this.nextState=null;this.setState(a)});this.nextState=
{content:a}}))}filterStream(a,b){return a.filter((a)=>null!=a&&a.id===b)}componentWillReceiveProps(a){if(a.contentStream!==this.props.contentStream||a.id!==this.props.id)null!=this.unsubscribe&&this.unsubscribe(),null!=a.contentStream&&(this.unsubscribe=this.filterStream(a.contentStream,a.id).onValue((a)=>{this.setState({content:a})}))}componentWillUnmount(){null!=this.unsubscribe&&this.unsubscribe()}render(){return k.createElement("div",{style:{height:"100%",width:"100%"},"data-lookup":this.props.id},
this.state.content&&this.state.content.createReactElement({popupIds:this.props.popupIds,parentIds:null,currentScrollIntoViewIds:this.props.currentScrollIntoViewIds}))}};G.UIContainer.displayName="UIContainer";var ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.DialogManagerImpl=class{constructor(a,b){this.dialogController=a;this.isEnabled=b;this.currentDialogProps={kind:u.DialogKind.None};this._dialogItems=new Map;this._iframeItems=new Map;this.modalContentBus=K.Bacon.newBus();this.modalContentProperty=
this.modalContentBus.toProperty(null);this.modalContentProperty.onValue(()=>{})}getDialogItem(a){const b=this._dialogItems.get(a.id);return null!=b?b:this._iframeItems.get(a.id)}setDialogItems(a){this._dialogItems=a;this.currentDialogProps.kind===u.DialogKind.Custom&&(null==this.getDialogItem(this.currentDialogProps)?this.hide(this.currentDialogProps.id):this.refreshModalContent())}handleStop(){this.currentDialogProps.kind!==u.DialogKind.None&&this.closeUnchecked(this.currentDialogProps)}showBuiltIn(a,
b){if(this.isEnabled()){if(null==a)throw Error("dialogID should not be null");this.currentDialogProps={kind:u.DialogKind.Builtin,id:a,isModal:!0,onClose:b};this.dialogController.openDialog(this.currentDialogProps)}}hideBuiltIn(a){if(this.isEnabled()){if(null==a)throw Error("dialogID should not be null");this.closeUnchecked({kind:u.DialogKind.Builtin,id:a})}}show(a){if(this.isEnabled()){var b={kind:u.DialogKind.Custom,id:a};a=this.getDialogItem(b);if(null!=a){b=Object.assign(Object.assign({},b),{isModal:!a.hideOverlay});
var d=this.currentDialogProps;this.currentDialogProps=b;this.refreshModalContent();if(!u.dialogPropsEq(d,b)&&(this.dialogController.openDialog(b),a.onOpen))a.onOpen()}}}hide(a){this.isEnabled()&&this.closeUnchecked({kind:u.DialogKind.Custom,id:a})}showIframe(a,b=null,d=c.DialogType.full,e=null,h=null,m=null){if(!this.isEnabled())return null;const c="iframe_"+Math.random().toString(16),g=()=>{this.hide(c)};this._iframeItems.set(c,{id:c,title:"",hideOverlay:!1,onOpen:e,onClose:h,createReactElement:()=>
k.createElement(f.IFrameDialog,{dialogType:d,title:b,onClose:g,src:a,height:m})});this.show(c);return c}closeUnchecked(a){this.currentDialogProps.kind!==u.DialogKind.None&&u.dialogIdEq(this.currentDialogProps,a)&&(this.dialogController.closeDialog(a),this.currentDialogProps={kind:u.DialogKind.None})}onCloseDialog(a){if(u.dialogIdEq(this.currentDialogProps,a))switch(a.kind){case u.DialogKind.Custom:a=this.getDialogItem(a);if(null!=a&&null!=a.onClose)a.onClose();this.currentDialogProps={kind:u.DialogKind.None};
this.refreshModalContent();break;case u.DialogKind.Builtin:if(this.currentDialogProps.kind===u.DialogKind.Builtin&&null!=this.currentDialogProps.onClose)this.currentDialogProps.onClose();this.currentDialogProps={kind:u.DialogKind.None};break;default:p.Utils.assertNever(a)}}onRender(a,b,d){return this.isEnabled()?null!=this.getDialogItem(a)?(a={id:a.id,contentStream:this.modalContentProperty,popupIds:b,currentScrollIntoViewIds:d},k.createElement(f.DialogOverlay,{hideOverlay:this.currentDialogProps.kind===
u.DialogKind.Custom?this.getDialogItem(this.currentDialogProps).hideOverlay:!1},k.createElement(G.UIContainer,Object.assign({},a)))):null:null}refreshModalContent(){if(this.currentDialogProps.kind===u.DialogKind.Custom){const a=this.getDialogItem(this.currentDialogProps);this.modalContentBus.push({id:this.currentDialogProps.id,containerKind:c.ContainerKind.dialog,createReactElement:a.createReactElement})}else this.modalContentBus.push({id:null,containerKind:c.ContainerKind.dialog,createReactElement:()=>
null})}};var fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.PopupManagerImpl=class{constructor(a){this.popupController=a;this.logger=F.LoggerModule.getLoggerManager().createLogger("PopupManagerImpl");this.registry=new Map}resetPopupRegistry(){this.registry.clear()}registerPopup(a,b,d){this.registry.set(a,{popupId:b,parentIds:d})}closePopup(a){const b=this.registry.get(a);null==b?this.logger.error({object:"invalidClosePopup",action:"PopupManager",trigger:"machine",payload:{popupid:a}}):
this.popupController.closePopup(b.popupId,b.parentIds)}openPopup(a){const b=this.registry.get(a);null==b?this.logger.error({object:"invalidOpenPopup",action:"PopupManager",trigger:"machine",payload:{popupid:a}}):this.popupController.openPopup(b.popupId,b.parentIds)}togglePopup(a){const b=this.registry.get(a);null==b?this.logger.error({object:"invalidTogglePopup",action:"PopupManager",trigger:"machine",payload:{popupid:a}}):this.popupController.togglePopup(b.popupId,b.parentIds)}};var ha={};Object.defineProperty(ha,
"__esModule",{value:!0});ha.ServiceApiImpl=class{constructor(a,b){this.relativeUrlParts=a;this.pluginServiceProvider=b}access(a,b,d,c){return this.pluginServiceProvider.serviceAccess(a,this.buildUrl(b,d),c)}read(a,b,d){return this.pluginServiceProvider.serviceRead(a,this.buildUrl(b,d))}buildUrl(a,b){a=`/${g.concatUrlParts(this.relativeUrlParts.concat(a))}`;if(null==b)return a;const d=Object.keys(b).map((a)=>`${a}=${encodeURIComponent(b[a])}`).join("&");return""===d?a:`${a}?${d}`}};var P={};Object.defineProperty(P,
"__esModule",{value:!0});P.SidebarManagerImpl=class{constructor(a,b,d){this.sidebarController=a;this.isEnabled=b;this.callHandler=d;this.sidebarArgss=new Map;this.sidebarContentBus=K.Bacon.newBus();this.sidebarContentProperty=this.sidebarContentBus.toProperty(null);this.sidebarContentProperty.onValue(()=>{})}setSidebarArgss(a){this.sidebarArgss=a;null!=this.currentSidebar&&(a=this.sidebarArgss.get(this.currentSidebar.id),null==a||null!=this.currentSidebar.pageId&&null==a.pages[this.currentSidebar.pageId]?
this.close(this.currentSidebar.id):this.refreshSidebarContent())}handleStop(){null!=this.currentSidebar&&this.closeUnchecked(this.currentSidebar.id)}close(a){this.isEnabled()&&this.closeUnchecked(a)}closeUnchecked(a){null!=this.currentSidebar&&this.currentSidebar.id===a&&this.sidebarController.closeSidebar(a)}open(a,b){var d;if(this.isEnabled()&&this.sidebarArgss.has(a)&&(null==b||b in this.sidebarArgss.get(a).pages)){var c=this.sidebarArgss.get(a),h=null===(d=this.currentSidebar)||void 0===d?void 0:
d.id;if(null!=h&&h!==a&&(d=this.sidebarArgss.get(this.currentSidebar.id),null!=d))d.onClose(this.currentSidebar.pageId);this.currentSidebar={id:a,pageId:b};this.refreshSidebarContent();h!==a&&(this.sidebarController.openSidebar(a),c.onOpen&&this.callHandler.call(()=>c.onOpen({pageId:b})))}}toggle(a){null!=this.currentSidebar&&this.currentSidebar.id===a?this.close(a):this.open(a)}onCloseSidebar(a){if(null!=this.currentSidebar&&a===this.currentSidebar.id){a=this.sidebarArgss.get(a);if(null!=a)a.onClose(this.currentSidebar.pageId);
this.currentSidebar=null;this.refreshSidebarContent()}}onRender(a,b,d){return this.isEnabled()&&null!=this.sidebarArgss.get(a)?k.createElement(G.UIContainer,Object.assign({},{id:a,contentStream:this.sidebarContentProperty,popupIds:b,currentScrollIntoViewIds:d})):null}refreshSidebarContent(){if(null!=this.currentSidebar){const a=this.sidebarArgss.get(this.currentSidebar.id),b=this.currentSidebar.pageId,d=null!=b?a.pages[b]:a.root;this.sidebarContentBus.push({id:this.currentSidebar.id,containerKind:c.ContainerKind.sidebar,
createReactElement:(c)=>{const e={id:null!=b?b:"sidebar-root-page",title:d.title,onClose:()=>{if(null!=a.onCloseButtonClicked)a.onCloseButtonClicked();this.close(a.id)},disableClose:a.disableClose,onBack:null==b?null:()=>{a.onPageBack(b);this.open(a.id)},header:g.createItemContainers(d.header,c.popupIds,c.currentScrollIntoViewIds),footer:g.createItemContainers(d.footer,c.popupIds,c.currentScrollIntoViewIds)};return k.createElement(f.SidebarContent,Object.assign({key:c.key},e),g.createItemContainers(d.content,
c.popupIds,c.currentScrollIntoViewIds))}})}else this.sidebarContentBus.push({id:null,containerKind:c.ContainerKind.sidebar,createReactElement:()=>null})}};P.LeftSidebarManagerImpl=class{constructor(a){this.isEnabled=a;this.sidebarContentBus=K.Bacon.newBus();this.sidebarContentProperty=this.sidebarContentBus.toProperty(null);this.sidebarContentProperty.onValue(()=>{})}setSidebarArgs(a){this.sidebarArgs=a;if(null==this.sidebarArgs)this.currentPageId=null;else{if(null==this.sidebarArgs.pages||null==
this.sidebarArgs.pages[this.currentPageId])this.currentPageId=null;this.refreshSidebarContent()}}onRender(a,b){return this.isEnabled()&&null!=this.sidebarArgs?k.createElement(G.UIContainer,Object.assign({},{id:"left-sidebar",contentStream:this.sidebarContentProperty,popupIds:a,currentScrollIntoViewIds:b})):null}refreshSidebarContent(){if(null!=this.sidebarArgs){const a=null!=this.currentPageId?this.sidebarArgs.pages[this.currentPageId]:this.sidebarArgs.root;this.sidebarContentBus.push({id:"left-sidebar",
containerKind:c.ContainerKind.sidebar,createReactElement:(b)=>{const d={id:null!=this.currentPageId?this.currentPageId:"sidebar-root-page",title:a.title,onClose:null,disableClose:!0,onBack:null,header:g.createItemContainers(a.header,b.popupIds,b.currentScrollIntoViewIds),footer:g.createItemContainers(a.footer,b.popupIds,b.currentScrollIntoViewIds)};return k.createElement(f.SidebarContent,Object.assign({key:b.key},d),g.createItemContainers(a.content,b.popupIds,b.currentScrollIntoViewIds))}})}else this.sidebarContentBus.push({id:null,
containerKind:c.ContainerKind.sidebar,createReactElement:()=>null})}};var ia={};Object.defineProperty(ia,"__esModule",{value:!0});ia.SpotlightManagerImpl=class{constructor(a,b){this.spotlightController=a;this.enabled=b;this._spotlightArgss=new Map}set spotlightArgss(a){null==this.currentId||a.has(this.currentId)||this.close(this.currentId);this._spotlightArgss=a;a.has(this.currentId)&&this.refreshView()}close(a){this.enabled()&&this.closeUnchecked(a)}closeUnchecked(a){this.currentId===a&&null!=this.hideCallback&&
this.hideCallback()}refreshView(){null!=this.currentId&&this.updateView(this.currentId,!1)}updateView(a,b){const d=this._spotlightArgss.get(a),c=null!=d;c&&(b&&this.close(this.currentId),this.hideCallback=this.spotlightController.showSpotlight({id:a,overlay:d.overlay?{opacity:d.overlay.opacity,color:d.overlay.color,holes:d.overlay.holes}:null,highlights:d.highlights?d.highlights:null,onClose:()=>{this.hideCallback=this.currentId=null;d.onClose()}}));return c}open(a){this.enabled()&&this.updateView(a,
!0)&&(this.currentId=a)}toggle(a){this.enabled()&&(this.currentId===a?this.close(a):this.open(a))}handleStop(){this.closeUnchecked(this.currentId)}};var H={};Object.defineProperty(H,"__esModule",{value:!0});H.PluginApiDialogManagerImpl=class{constructor(a,b,d){this.dialogManager=a;this.isEnabled=b;this.errorDialogController=d}hide(a){this.isEnabled()&&this.dialogManager.hide(a)}hideBuiltIn(a){this.isEnabled()&&this.dialogManager.hideBuiltIn(a)}show(a){this.isEnabled()&&this.dialogManager.show(a)}showBuiltIn(a,
b){this.isEnabled()&&this.dialogManager.showBuiltIn(a,b)}showIFrame(a){return this.isEnabled()?this.dialogManager.showIframe(a.url,a.title,a.size,a.onOpen,a.onClose,a.height):null}showBuiltInError(a,b){this.isEnabled()&&this.errorDialogController.openErrorModal({errorCase:a,unclosable:b})}showError(a,b,d){this.isEnabled()&&this.errorDialogController.openErrorModal({errorCase:va.EditorErrorCase.PLUGIN_ERROR,unclosable:!1,customDialogContent:{titleTemplate:a,explanationTemplate:b,errorId:d}})}onCloseDialog(a){this.dialogManager.onCloseDialog(a)}setDialogItems(a){this.dialogManager.setDialogItems(a)}onRender(a,
b,d){return this.dialogManager.onRender(a,b,d)}handleStop(){this.dialogManager.handleStop()}};H.ApplicationApiImpl=class{constructor(a,b,d,e,h,f,g,y,k,l,N,v,p,r=L.emptySelectionInfo(),q=null,t,u,w,x,Aa,A,B,C,D,F,J,Ba,Ca,K){this.serviceMocks=a;this.callHandler=b;this.applicationController=d;this.contextMenuController=h;this.spotlightController=f;this.pluginServiceProvider=g;this.pluginDescription=y;this.plugin=k;this.fileInsertDialogProvider=l;this.networkStatus=N;this.currentTopic=v;this.applicationMode=
p;this.selection=r;this.textSelectionInfo=q;this.popupController=t;this.colorGridProvider=x;this.uiChanged=Aa;this.isDesktop=A;this.currentUserLicenseInformation=B;this.currentNavigationEvent=C;this.keyboardEventMatcher=D;this.maybeDocumentSession=F;this.currentUserSettings=J;this.currentDocumentEvents=Ba;this.serviceOptions=Ca;this.audioController=K;this._dropDownMenuItems=[];this._contextMenuItems=[];this._tabMenuItems=[];this._mixerButtonItems=[];this._propertyBarItems=[];this._colorGrids=[];this.declaredShortcutActions=
new Map;this.registeredActions=[];this.fileDropHandlers=[];this.urlDropHandlers=[];this.styledTextHandlers=[];this.documentChangeHandlers=[];this.navigationHandlers=[];this.applicationModeChangeHandlers=[];this.afterPasteHandlers=[];this.styleSheetChangeHandlers=[];this.networkStatusChangeHandlers=[];this.currentTopicChangeHandlers=[];this.licenseChangeHandlers=[];this.selectionChangeHandlers=[];this.textSelectionChangeHandlers=[];this.textEditEventHandlers=[];this.planetLayouters=new Map;this.overviewLayouters=
new Map;this.contentLayouters=new Map;this.filePickers=new Map;this.topicThemeAppliers=new Map;this.enabledInApplicationModes=[c.ApplicationMode.Edit,c.ApplicationMode.AnimationPreview];this.userSettingsChangeHandlers=[];this.documentEventHandlers=[];this.disposed=!1;this.updateUiState=()=>{};this.pluginDescription.supportsPlaybackMode&&this.enabledInApplicationModes.push(c.ApplicationMode.Playback);this.sidebarManager=new P.SidebarManagerImpl(e,()=>this.enabled(),this.callHandler);this.popupManager=
new fa.PopupManagerImpl(this.popupController);this.leftSidebarManager=new P.LeftSidebarManagerImpl(()=>this.enabled());this.spotlightManager=new ia.SpotlightManagerImpl(f,()=>this.enabled());this.dialogManager=new H.PluginApiDialogManagerImpl(new ea.DialogManagerImpl(u,()=>this.enabled()),()=>this.enabled(),w);this.declaredShortcutActions=new Map(Object.keys(this.pluginDescription.shortcuts||{}).map((a)=>[this.pluginDescription.shortcuts[a],new E.ShortcutActionImpl({onExecute:()=>{},shortcut:this.pluginDescription.shortcuts[a]})]))}setEditorSession(a){this.maybeDocumentSession.setValue(a);
this.updateUiState()}set dropDownMenuItems(a){this._dropDownMenuItems=a}get dropDownMenuItems(){return this._dropDownMenuItems}set contextMenuItems(a){this._contextMenuItems=a}get contextMenuItems(){return this._contextMenuItems}set tabMenuItems(a){this._tabMenuItems=a}get tabMenuItems(){return this._tabMenuItems}set mixerButtonItems(a){this._mixerButtonItems=a}get mixerButtonItems(){return this._mixerButtonItems}set propertyBarItems(a){this._propertyBarItems=a}get propertyBarItems(){return this._propertyBarItems}set colorGrids(a){this._colorGrids=
a}get colorGrids(){return this._colorGrids}declareUI(a,b){let d=Object.assign({},a);const c=this,h=`declareUI in plugin "${this.pluginDescription.name}"`;class m{constructor(){this.isForbid=!1}checkForbid(a){if(this.isForbid)throw Error(`UIRoot.${a} is not allowed inside ${h}`);}get sidebar(){this.checkForbid("sidebar");return c.sidebarManager}get spotlight(){this.checkForbid("spotlight");return c.spotlightManager}get dialog(){this.checkForbid("dialog");return c.dialogManager}get popup(){this.checkForbid("popup");
return c.popupManager}getState(){return d}setState(a){this.checkForbid("setState");d=Object.assign(Object.assign({},d),a);c.handleUpdateUiState()}scrollIntoView(...a){this.checkForbid("scrollIntoView");const b=c.applicationController.setCurrentScrollIntoViewIds(a);f.scrollIntoView(a).then(()=>{c.applicationController.clearCurrentScrollIntoViewIds(b)})}forbid(a){if(this.isForbid)throw Error(`UIRoot already forbid for ${h}`);this.isForbid=!0;try{return a()}finally{this.isForbid=!1}}}const g=new m;this.updateUiState=
()=>{const a=new U.ApplicationUIImpl(this.callHandler,this.applicationController,()=>this.contextMenuController.closeContextMenu(),this.enabled(),this.popupController,this.dialogManager,this.popupManager,this.colorGridProvider,this.fileInsertDialogProvider,this.maybeDocumentSession,this.pluginDescription.shortcuts,this.audioController);w.asKillable(a,(a)=>{g.forbid(()=>{this.maybeDocumentSession.hasValue()?this.maybeDocumentSession.value.document.forbidRead(h,()=>{b(d,a)}):b(d,a)});this.dropDownMenuItems=
a.dropDownMenuItems;this.tabMenuItems=a.tabMenuItems;this.contextMenuItems=a.contextMenuItems;this.mixerButtonItems=a.mixerButtonItems;this.propertyBarItems=a.propertyBarItems;this.colorGrids=a.colorGrids;this.registeredActions=a.registeredShortcutActions;this.dialogManager.setDialogItems(a.getDialogItems());this.sidebarManager.setSidebarArgss(a.newSidebarArgs);this.leftSidebarManager.setSidebarArgs(a.newLeftSidebarArgs);this.spotlightManager.spotlightArgss=a.newSpotlightArgs});this.uiChanged()};
return g}onNavigation(a){this.navigationHandlers.push(a)}onDocumentChange(a){this.documentChangeHandlers.push(a)}onApplicationModeChange(a){this.applicationModeChangeHandlers.push(a)}onAfterPaste(a){this.afterPasteHandlers.push(a)}onStyleSheetChange(a){this.styleSheetChangeHandlers.push(a)}onNetworkStatusChange(a){this.networkStatusChangeHandlers.push(a)}onSelectionChange(a){this.selectionChangeHandlers.push(a)}onTextSelectionChange(a){this.textSelectionChangeHandlers.push(a)}onTextEdit(a){this.textEditEventHandlers.push(a)}onCurrentTopicChange(a){this.currentTopicChangeHandlers.push(a)}onFileDrop(a,
b){this.fileDropHandlers.push((d,e)=>c.FileFilter.passes(a,e.data.file)?(b(d,e),!0):!1)}registerPlanetLayout(a,b){this.planetLayouters.set(a,b);return a}registerOverviewLayout(a,b){this.overviewLayouters.set(a,b);return a}registerContentLayout(a,b){this.contentLayouters.set(a,b);return a}registerFilePicker(a){this.filePickers.set(a.id,a);this.applicationController.updateAllUiState()}handleFileSelect(a,b){return this.enabled()&&(a=this.filePickers.get(a),null!=a)?a.selectFile(b):null}getFilePickerDescriptions(){return this.enabled()?
[...this.filePickers.entries()].map(([a,b])=>({id:a,icon:b.icon,name:b.name})):[]}onTopicThemeApplication(a,b){this.topicThemeAppliers.set(a,b)}onURLDrop(a){this.urlDropHandlers.push(a)}onTextDrop(a){this.styledTextHandlers.push(a)}onLicenseChange(a){this.licenseChangeHandlers.push(a)}service(a,b){const d=this.serviceMocks[g.concatUrlParts(a)];return null!=d?d:b(new ha.ServiceApiImpl(a,this.pluginServiceProvider))}getActiveFeatureSwitches(){return Q.FeatureSwitcher.getActiveFeatures()}getAllFeatureSwitches(){return Q.FeatureSwitcher.getAllFeatures()}onCloseSidebar(a){this.sidebarManager.onCloseSidebar(a)}onCloseDialog(a){this.dialogManager.onCloseDialog(a)}setNetworkStatus(a){this.handleEnabledChange(()=>
{this.networkStatus=a});this.handleNetworkStatusChange(a)}handleEnabledChange(a){const b=this.enabled();a();a=this.enabled();b!==a&&(a?this.handleStart():this.handleStop())}enabled(){return!this.disposed&&this.pluginIsEnabledInMode(this.applicationMode)&&(this.networkStatus===c.NetworkStatus.Online||this.pluginDescription.supportsOffline===c.SupportsOffline.always||this.pluginDescription.supportsOffline===c.SupportsOffline.desktop&&this.isDesktop)}handleKeyboardEvent(a){if(!this.enabled())return!1;
for(let b of[...this.registeredActions,...this.declaredShortcutActions.values()])if(this.keyboardEventMatcher.matching(a,Object.assign({type:"keydown"},b.args.shortcut)))return b.args.enabled&&this.callHandler.callWithUAT((a)=>b.args.onExecute(a,c.ActionTrigger.Keyboard)),a.preventDefault(),a.stopPropagation(),!0;return!1}handlePlanetLayoutEvent(a,b,d,c){if(this.enabled()&&this.planetLayouters.has(a)){const e=this.planetLayouters.get(a);this.callHandler.call(()=>{e.apply(b,d,c)});return!0}return!1}handlePlanetLayoutIsValid(a,
b){if(this.enabled()&&this.planetLayouters.has(a)){const d=this.planetLayouters.get(a);return this.callHandler.call(()=>d.isValid(b),!1)}return!1}handleContentLayoutIsValid(a,b){if(this.enabled()&&this.contentLayouters.has(a)){const d=this.contentLayouters.get(a);return this.callHandler.call(()=>d.isValid(b),!1)}return!1}handleContentLayoutEvent(a,b,d){if(this.enabled()&&this.contentLayouters.has(a)){const c=this.contentLayouters.get(a);this.callHandler.call(()=>{c.apply(b,d)});return!0}return!1}handleOverviewLayoutEvent(a,
b,d,c){if(this.enabled()&&this.overviewLayouters.has(a)){const e=this.overviewLayouters.get(a);this.callHandler.call(()=>{e.apply(b,d,c)});return!0}return!1}handleOverviewLayoutIsValid(a,b){if(this.enabled()&&this.overviewLayouters.has(a)){const d=this.overviewLayouters.get(a);return this.callHandler.call(()=>d.isValid(b),!1)}return!1}handleTopicLayoutApplication(a,b,d){if(this.enabled()&&this.topicThemeAppliers.has(a)){const c=this.topicThemeAppliers.get(a);this.callHandler.call(()=>{c(b,d)});return!0}return!1}handleFileDrop(a,
b){let d=!1;this.enabled()&&0<this.fileDropHandlers.length&&this.callHandler.callWithUAT((a)=>{for(let c of this.fileDropHandlers)if(c(a,b)){d=!0;break}});return d}handleURLDrop(a){let b=!1;this.enabled()&&0<this.urlDropHandlers.length&&this.callHandler.callWithUAT((d)=>{for(let c of this.urlDropHandlers)if(c(d,a)){b=!0;break}});return b}handleStyledTextDrop(a){let b=!1;this.enabled()&&0<this.styledTextHandlers.length&&this.callHandler.callWithUAT((d)=>{for(let c of this.styledTextHandlers)if(c(d,
a)){b=!0;break}});return b}handleRenderSidebar(a,b,d){return this.sidebarManager.onRender(a,b,d)}handleRenderLeftSidebar(a,b){return this.leftSidebarManager.onRender(a,b)}handleRenderModal(a,b,d){return this.dialogManager.onRender(a,b,d)}notifyAllChangeEventListeners(){this.callHandler.call(()=>{this.documentChangeHandlers.forEach((a)=>a());this.styleSheetChangeHandlers.forEach((a)=>a())})}handleNavigation(a){this.currentNavigationEvent=a;null!=a&&this.enabled()&&this.callHandler.call(()=>{this.navigationHandlers.forEach((b)=>
b(a))})}handleDocumentChange(a){if(this.enabled()){const b=[q.ChangeEventKind.Document,q.ChangeEventKind.EntitiesModified,q.ChangeEventKind.Entity].some((b)=>a.some((a)=>a.kind===b)),d=a.some((a)=>a.kind!==q.ChangeEventKind.Document&&(a.kind!==q.ChangeEventKind.StyleSheet||a.selector&&0===a.selector.toString().indexOf("#"))?!1:!0);this.callHandler.call(()=>{b&&this.documentChangeHandlers.forEach((a)=>a());d&&this.styleSheetChangeHandlers.forEach((a)=>a())})}}handleNetworkStatusChange(a){this.enabled()&&
this.callHandler.call(()=>{this.networkStatusChangeHandlers.forEach((b)=>b(a))})}handleSelectionChange(a){this.selection=a;if(this.enabled()&&this.maybeDocumentSession.hasValue()){const b=this.maybeDocumentSession.value.document.read((b)=>g.selectionToTransformedSelectionChange(b,a));this.callHandler.call(()=>{this.selectionChangeHandlers.forEach((a)=>a(b))})}}handleTextSelectionChange(a){this.textSelectionInfo=a;this.enabled()&&this.callHandler.call(()=>{this.textSelectionChangeHandlers.forEach((b)=>
b(a))})}handleTextEdit(a){let b=!1;this.enabled()&&0<this.textEditEventHandlers.length&&this.callHandler.callWithUAT((d)=>{for(let c of this.textEditEventHandlers)if(c(d,a)){b=!0;break}});return b}handleApplicationModeChange(a){this.enabled()&&this.callHandler.call(()=>{this.applicationModeChangeHandlers.forEach((b)=>b(a))});this.handleEnabledChange(()=>{this.applicationMode=a})}handleAfterPaste(a){this.enabled()&&this.callHandler.call(()=>{this.afterPasteHandlers.forEach((b)=>b(a))})}handleCurrentTopicChange(a){this.currentTopic=
a;this.enabled()&&null!=this.currentTopic&&this.callHandler.call(()=>{this.currentTopicChangeHandlers.forEach((b)=>b(a))})}handleLicenseChange(a){this.currentUserLicenseInformation=a;this.enabled()&&this.callHandler.call(()=>{this.licenseChangeHandlers.forEach((b)=>b(a))})}handleStart(){this.handleUserSettingsChange(this.currentUserSettings);for(let a of this.currentDocumentEvents)this.handleDocumentEventI(a);this.notifyAllChangeEventListeners();this.handleSelectionChange(this.selection);this.handleTextSelectionChange(this.textSelectionInfo);
this.handleApplicationModeChange(this.applicationMode);this.handleCurrentTopicChange(this.currentTopic);this.handleLicenseChange(this.currentUserLicenseInformation);this.handleNetworkStatusChange(this.networkStatus);this.handleNavigation(this.currentNavigationEvent);this.updateUiState()}handleStop(){null!=this.plugin.unload&&this.plugin.unload();this.sidebarManager.handleStop();this.spotlightManager.handleStop();this.dialogManager.handleStop();this.updateUiState()}processMessage(a){return this.enabled()?
(this.callHandler.call(()=>this.plugin.processMessage(a)),!0):!1}pluginIsEnabledInMode(a){return 0<=this.enabledInApplicationModes.indexOf(a)}onUserSettingsChange(a){this.userSettingsChangeHandlers.push(a)}handleUserSettingsChange(a){this.currentUserSettings=a;if(this.enabled())for(let b of this.userSettingsChangeHandlers)this.callHandler.call(()=>b(a))}onDocumentEvent(a){this.documentEventHandlers.push(a)}handleDocumentEvent(a){this.currentDocumentEvents.push(a);this.handleDocumentEventI(a)}handleDocumentEventI(a){if(this.enabled())for(let b of this.documentEventHandlers)this.callHandler.callWithUAT(()=>
b(a))}handleUpdateUiState(){this.enabled()&&this.updateUiState()}dispose(){this.disposed||this.handleEnabledChange(()=>this.disposed=!0)}};var A={guard:function(a,b,d,c){return(e)=>{try{return d(e)}catch(m){return a(b,m),c}}}},I=this&&A.__awaiter||function(a,b,d,c){function e(a){return a instanceof d?a:new d(function(b){b(a)})}return new (d||(d=Promise))(function(d,f){function h(a){try{g(c.next(a))}catch(v){f(v)}}function m(a){try{g(c["throw"](a))}catch(v){f(v)}}function g(a){a.done?d(a.value):e(a.value).then(h,
m)}g((c=c.apply(a,b||[])).next())})};Object.defineProperty(A,"__esModule",{value:!0});var pa=r.base.getBoundsInWorld,l=r.base.ObjectKind;A.DocumentSessionImpl=class{constructor(a,b,d,c,f,m,g,k){this.scene=a;this.progressiveAssetManager=b;this.preziMetaData=d;this.runner=c;this.cetPreziSaver=f;this.cetMetadataSaver=m;this.cetApp=g;this.noReadInside=null;k.onValue((a)=>{this.preziMetaData=a})}get preziXml(){return this.scene.getPreziXml()}initIntent(a){return Object.assign(Object.assign({},a),{trigger:"plugin-api"})}parseCopyDataAsync(a){return r.CetModelEditor.parseCopyDataAsync(this.cetApp,
a)}executeApiCommand(a,b,d={}){g.checkAT(a);return this.runner.executeApiCommand(b,this.initIntent(d))}executeLegacyCommand(a,b,d={}){g.checkAT(a);return this.runner.executeLegacyCommand(b,this.initIntent(d))}read(a){if(null!=this.noReadInside)throw Error(`Document read is not allowed inside ${this.noReadInside}`);return this.runner.read(a)}forbidRead(a,b){if(null!=this.noReadInside)throw Error(`Read is already forbidden inside ${this.noReadInside}`);this.noReadInside=a;try{return b()}finally{this.noReadInside=
null}}beginLongRunningCommand(a,b,d){g.checkAT(a);return new A.LongRunningCtxImpl(this.runner,this.initIntent(b),d)}save(a){return(new Promise((b)=>{g.checkAT(a);this.cetPreziSaver.save().take(1).onValue((a)=>b(a))})).then((a)=>{switch(a){case X.SaveResult.Success:return c.SaveResult.Success;case X.SaveResult.Error:return c.SaveResult.Error;case X.SaveResult.ErrorExternalEdit:return c.SaveResult.ErrorExternalEdit;default:return p.Utils.assertNever(a)}})}setDocumentTitle(a){return this.cetMetadataSaver.savePreziTitle(a).then(()=>
{})}setDocumentLogoType(a){return this.cetMetadataSaver.savePreziLogoType(a).then(()=>{})}};A.LongRunningCtxImpl=class{constructor(a,b,d){this.onBeforeFinish=d;this.asyncCommand=a.beginAsyncApiCommand(b,(a)=>{try{const b=a.reason;switch(b){case r.FinishEventKind.AbortTransaction:case r.FinishEventKind.RollbackTransaction:this.onBeforeFinish({reason:b});break;case r.FinishEventKind.BeginOtherTransaction:case r.FinishEventKind.EndTransaction:this.asyncCommand.execute((a)=>{this.onBeforeFinish({reason:b,
api:a})});break;default:p.Utils.assertNever(b)}}finally{this.asyncCommand=null}})}isActive(){return null!=this.asyncCommand}rollback(){if(!this.isActive())throw Error("Ctx is inactive");this.asyncCommand.rollback()}end(){if(!this.isActive())throw Error("Ctx is inactive");this.asyncCommand.end()}execute(a,b){g.checkAT(a);if(!this.isActive())throw Error("Ctx is inactive");return this.asyncCommand.execute(b)}};A.VideoBackgroundApiImpl=class{constructor(a){this.stage=a;this.width=1600;this.flip={left:this.width,
width:-this.width};this.nonFlip={left:0,width:this.width}}startWithWebcam(a){return I(this,void 0,void 0,function*(){try{this.stop();let b=yield navigator.mediaDevices.getUserMedia({video:{deviceId:a,width:1280,height:720,facingMode:"user",audio:!1}});this.updateBackgroundVideoParams(Object.assign({source:b,live:!0},this.flip));if(!b)return{status:c.VideoBackgroundStatusCode.playbackStartFailure,error:"Failed to initialize camera stream!"}}catch(b){return{status:c.VideoBackgroundStatusCode.genericFailure,
error:b}}return{status:c.VideoBackgroundStatusCode.successfullyStarted}})}startFromUrl(a){this.stop();this.updateBackgroundVideoParams(Object.assign({source:a,live:!0},this.flip));return{status:c.VideoBackgroundStatusCode.successfullyStarted}}set live(a){this.updateBackgroundVideoParams({live:a})}get live(){return this.stage.getBackgroundVideoParams().live}set flipped(a){this.updateBackgroundVideoParams(this.flipped?this.nonFlip:this.flip)}get flipped(){return this.stage.getBackgroundVideoParams().left!==
this.nonFlip.left}stop(){this.cleanupCurrentStream();this.updateBackgroundVideoParams({source:null})}cleanupCurrentStream(){const a=this.stage.getBackgroundVideoParams();if(null!=a.source&&"string"!==typeof a.source&&"getTracks"in a.source)for(const b of a.source.getTracks())b.stop()}updateBackgroundVideoParams(a){this.stage.updateBackgroundVideoParams(a)}};A.ApplicationModeApiImpl=class{constructor(a,b){this.changeModeAction=a;this.openPresenterNotesWindow=b}presentMode(a,b){g.checkAT(a);this.changeModeAction({newMode:B.EditorMode.playback,
shouldGoFullscreen:!0,shouldSeekPathToStart:b,linkClickedFlow:!1,presenterNotesFlow:!1,showTopmenu:!1,trigger:"api"})}previewMode(a){g.checkAT(a);this.changeModeAction({newMode:B.EditorMode.playback,shouldGoFullscreen:!1,shouldSeekPathToStart:!1,linkClickedFlow:!1,presenterNotesFlow:!1,showTopmenu:!0,trigger:"api"})}presenterViewMode(a){g.checkAT(a);this.openPresenterNotesWindow();this.changeModeAction({newMode:B.EditorMode.playback,shouldGoFullscreen:!1,shouldSeekPathToStart:!1,linkClickedFlow:!1,
presenterNotesFlow:!0,showTopmenu:!1,trigger:"api"})}editMode(a){g.checkAT(a);this.changeModeAction({newMode:B.EditorMode.edit,trigger:"api"})}};A.NavigationApiImpl=class{constructor(a,b,d){this.scene=a;this.navigationControl=b;this.changeModeAction=d}goToPathElement(a,b){return I(this,void 0,void 0,function*(){g.checkAT(a);return new Promise((a)=>{const d=r.CetModelEditor.createPathElementIdToPlaybackPathPositionMapFromScene(this.scene);let c=null;switch(b.kind){case l.fadeIn:case l.fadeOut:break;
case l.backToParent:c=b.backTo.target.ref;break;case l.visitStack:b=b.children[0];c=b.target.ref;break;case l.zoom:case l.visitPage:case l.visitPlanet:case l.visitOverview:c=b.target.ref;break;default:p.Utils.assertNever(b)}r.CetModelEditor.setCameraAndPathFor({navigationControl:this.navigationControl,pathPosition:d.get(b.id)});Promise.resolve().then(()=>{if(null==c)a();else(c.kind===l.overview?this.navigationControl.flyToOverview():this.navigationControl.flyToId(c.id)).onValue((b)=>{b.phase!==q.NavigationActionAnimationPhase.End&&
b.phase!==q.NavigationActionAnimationPhase.Cancel||a()})})})})}focusTo(a,b){g.checkAT(a);return new Promise((a)=>{const d=b.id,c=b.is(l.overview);r.CetModelEditor.setCameraAndPathFor({navigationControl:this.navigationControl,pathPosition:r.CetModelEditor.getPathPositionForTarget({allowForwardActions:!0,navigationControl:this.navigationControl,targetId:d})});Promise.resolve().then(()=>{(c?this.navigationControl.focusToOverview(!0):this.navigationControl.focusToId(d,!0)).onValue(()=>{a()})})})}flyTo(a,
b){g.checkAT(a);return new Promise((a)=>{const c=b.id,d=b.is(l.overview);r.CetModelEditor.setCameraAndPathFor({navigationControl:this.navigationControl,pathPosition:r.CetModelEditor.getPathPositionForTarget({navigationControl:this.navigationControl,targetId:c,allowForwardActions:!0})});Promise.resolve().then(()=>{(d?this.navigationControl.flyToOverview():this.navigationControl.flyToId(c)).onValue((b)=>{b.phase!==q.NavigationActionAnimationPhase.End&&b.phase!==q.NavigationActionAnimationPhase.Cancel||
a()})})})}previewAnimation(a,b){return I(this,void 0,void 0,function*(){g.checkAT(a);var c=r.CetModelEditor.createPathElementIdToPlaybackPathPositionMapFromScene(this.scene),e=b.id;const f=b.parent;let m=null;for(let a=f.children.indexOf(b);0<=a;a--){const b=f.children[a];if(b.is(l.zoom)){m=b.target.is(l.stackTopic)?b.target.pageChildren[0]:b.target;break}else if(b.is(l.visitPage)){m=b.target;break}else if(b.is(l.visitPlanet)||b.is(l.visitStack)){m=b.target.parent;break}else b.is(l.fadeIn)||b.is(l.fadeOut)||
p.Utils.assertNever(b,"Unknown type")}this.changeModeAction({newMode:B.EditorMode.animationPreview,trigger:"machine"});null==m&&(m=f.target);yield this.flyTo(a,m);e=c.get(e);c=this.navigationControl.getPathNavigator().getPath().getPathPosition(e.step,e.action);e=this.navigationControl.getPathNavigator().getPath().getPathPosition(e.step,e.action-1);this.navigationControl.getPathNavigator().jump(e);yield this.wait(700);this.navigationControl.getPathNavigator().go(c);c=Math.max(q.Cet.getAnimationData(q.AnimationType.CONTENT_FADE_OUT).duration,
q.Cet.getAnimationData(q.AnimationType.CONTENT_FADE_IN).duration);yield this.wait(c+700);this.changeModeAction({newMode:B.EditorMode.edit,trigger:"machine"})})}wait(a){return I(this,void 0,void 0,function*(){return new Promise((b)=>{setTimeout(b,a)})})}};A.EditorSessionImpl=class{constructor(a,b,c,e,f,g,n,k,l,p){this.document=a;this.insertTarget=b;this.positionFinder=c;this.selection=e;this.coverEdit=f;this.applicationMode=g;this.navigation=n;this.stage=k;this.snapshotRenderer=l;this.videoBackground=
p}snapshot(a,b,c,e=null){return I(this,void 0,void 0,function*(){const d=null==e?null:new Set(p.Utils.flatten(e.map((a)=>a.is(l.topic)?p.Utils.flatten([a.cover.contentChildren,a.visual.contentChildren]).map((a)=>a.id):[a.id])));return(yield this.stage.createSnapshotCanvas(pa(a),b,c,(a)=>{if(null!=d&&!d.has(a.getId())||!q.Cet.hasPdomComponent(a))return 0;a=q.Cet.visibility(a);return a.isVisible()?a.getAlpha():0},!0,()=>!0)).canvas})}snapshotPathElement(a,b,c,e,f){return I(this,void 0,void 0,function*(){const d=
(new Da(a)).get(b),h=new Set(this.stage.getModelScene().getEntityList().asArray().filter((a)=>a.isDef(ua.CetModel.ID.BACKGROUND_LAYER)?!0:q.Cet.hasPdomComponent(a)&&null!=q.Cet.draw(a)&&d.getVisible(a.getId())).map((a)=>a.getId())),g=d.getTargetLayoutBox();return yield this.stage.createSnapshotCanvas(pa(g),c,!0,(a)=>{a=a.getId();return h.has(a)?1:0},e,f)})}};var M;(function(a){a.In="In";a.Out="Out"})(M||(M={}));class Da{constructor(a){this.api=a;this.cache={elementMap:new Map,pathElements:null,pathElementIds:null,
ancestorMap:new Map,fadeMap:new Map};this.cache.pathElements=a.structuredPath.pathElementsInOrder;this.cache.pathElementIds=this.cache.pathElements.map((a)=>a.id);this.cache.pathElements.forEach((a,c)=>{if(a.is(l.fadeIn)||a.is(l.fadeOut)){c={index:c,kind:a.is(l.fadeIn)?M.In:M.Out};a=a.targets.concat(...a.groupTargets.map((a)=>a.members));for(const b of a){a=b.id;let d=this.cache.fadeMap.get(a);null==d&&(d=[],this.cache.fadeMap.set(a,d));d.push(c)}}})}get(a){a=this.cache.pathElementIds.indexOf(a.id);
return this.getByIndex(a)}getNext(a){return this.getByIndex(a.index+1)}getPrev(a){return this.getByIndex(a.index-1)}getByIndex(a){let b=this.cache.elementMap.get(a);null==b&&(b=new Ea(this,this.api,this.cache.pathElements[a],a),this.cache.elementMap.set(a,b));return b}getAncestorIds(a){const b=a.id;let c=this.cache.ancestorMap.get(b);null==c&&(a.is(l.overview)?c=new Set:(a=a.parent,c=new Set([a.id,...this.getAncestorIds(a)])),this.cache.ancestorMap.set(b,c));return c}getFadeInfos(a){const b=a.id;
let c=this.cache.fadeMap.get(b);null==c&&(c=a.is(l.overview)?[]:this.getFadeInfos(a.parent),this.cache.fadeMap.set(b,c));return c}}class Ea{constructor(a,b,c,e){this.exPath=a;this.api=b;this.pathElement=c;this.index=e;this.cache={parent:null,visibilityMap:new Map,targetLayoutBox:null,visibleInParentMap:new Map}}getParent(){null==this.cache.parent&&(this.cache.parent=this.calcParent());return this.cache.parent}getVisible(a){let b=this.cache.visibilityMap.get(a);null==b&&(b=this.calcVisible(a),this.cache.visibilityMap.set(a,
b));return b}getTargetLayoutBox(){null==this.cache.targetLayoutBox&&(this.cache.targetLayoutBox=this.calcTargetLayoutBox());return this.cache.targetLayoutBox}calcTargetLayoutBox(){var a=this.pathElement;if(a.is(l.visitOverview)||a.is(l.visitPlanet)||a.is(l.visitPage))return a.target.zoomLayoutBox;if(a.is(l.visitStack))return this.exPath.getNext(this).getTargetLayoutBox();if(a.is(l.backToParent))return a.backTo.target.zoomLayoutBox;if(a.is(l.zoom))return a=a.target,a.is(l.simpleObject)?a.layoutBox:
a.zoomLayoutBox;if(a.is(l.fadeIn)||a.is(l.fadeOut))return this.exPath.getPrev(this).getTargetLayoutBox();p.Utils.assertNever(a,"Unknown pathelement")}calcVisible(a){a=this.api.lookup.base(a);if(null==a||!a.is(l.simpleObject)||a.is(l.zoomArea))return!1;if(a.is(l.text)||a.is(l.image)||a.is(l.swf)||a.is(l.pdf)){if(a.isPlaceholder)return!1}else"isPlaceholder"in a&&p.Utils.assertNever(a,"Unknown placeholder");const b=this.exPath.getFadeInfos(a);if(0<b.length){const a=b[0];let c=null;for(const a of b){if(a.index>
this.index)break;c=a}if(null!=c&&c.kind===M.Out||null==c&&a.kind===M.In)return!1}return this.getVisibleInParent(a.parent)}getVisibleInParent(a){let b=this.cache.visibleInParentMap.get(a.id);null==b&&(b=this.calcVisibleInParent(a),this.cache.visibleInParentMap.set(a.id,b));return b}calcVisibleInParent(a){const b=this.getParent();if(a.id===b.id)return!0;if(a.is(l.overview)||a.is(l.planetTopic)||a.is(l.page))return!1;const c=a.parent;return(a.is(l.surface)||a.is(l.visual)||a.is(l.master))&&c.id===b.id||
(a.is(l.cover)||a.is(l.surface)||a.is(l.visual))&&c.parent.id===b.id||(a.is(l.master)||a.is(l.visual))&&this.exPath.getAncestorIds(b).has(c.id)?!0:!1}calcParent(){const a=this.pathElement,b=a.kind;if(a.is(l.visitStack))return this.exPath.getNext(this).getParent();if(a.is(l.freePathChild))return this.exPath.getPrev(this).getParent();if(a.is(l.visitPlanet)||a.is(l.visitOverview)||a.is(l.visitPage))return a.target;if(a.is(l.backToParent))return a.backTo.target;p.Utils.assertNever(a,`Unknown pathElement ${b}`)}}
var J={},ja=this&&J.__awaiter||function(a,b,c,e){function d(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,f){function h(a){try{m(e.next(a))}catch(v){f(v)}}function g(a){try{m(e["throw"](a))}catch(v){f(v)}}function m(a){a.done?c(a.value):d(a.value).then(h,g)}m((e=e.apply(a,b||[])).next())})};Object.defineProperty(J,"__esModule",{value:!0});J.ApplicationControllerImpl=class{constructor(a,b,d,e,f,m,k,l,z,p,r,v,q,t,u,w,x){this.sidebarController=a;this.contextMenuController=
b;this.spotlightController=d;this.pluginServiceProvider=e;this.serviceMocks=f;this.fileInsertDialogProvider=m;this.popupController=k;this.dialogController=l;this.errorDialogController=z;this.uiChanged=p;this.isDesktop=v;this.keyboardEventMatcher=t;this.messageHandler=u;this.serviceOptions=x;this.applicationApis=[];this.logger=F.LoggerModule.getLoggerManager().createLogger("ApplicationControllerImpl");this.networkStatus=c.NetworkStatus.Online;this.selectionInfo=L.emptySelectionInfo();this.currentTopic=
this.userLicenseInformation=this.navigationEvent=this.textSelectionInfo=null;this.applicationMode=c.ApplicationMode.Edit;this.audioController=new S.AudioController;this.currentDocumentEvents=[];this.maybeEditorSession=new g.MaybeImpl;this.initialUat=new g.UserActionTokenImpl;this.listDrop=this.currentScrollIntoViewInfo=null;this.sidebarController.getClosedSidebarStream().onValue((a)=>{for(const b of this.applicationApis)b.onCloseSidebar(a)});this.dialogController.getClosedDialogIdStream().onValue((a)=>
{for(const b of this.applicationApis)b.onCloseDialog(a)});this.userSettings={getUserId:()=>w,getBoolean:(a)=>r.getBoolean(a),setBoolean:(a,b)=>r.setBoolean(a,b)};q.onValue((a)=>{for(const b of this.applicationApis)if(b.handleKeyboardEvent(a))break});this.behaviorExtensions={planetLayouter:new Fa(()=>this.applicationApis),topicThemeApplicator:new Ga(()=>this.applicationApis),overviewLayouter:new Ha(()=>this.applicationApis),contentLayouter:new Ia(()=>this.applicationApis)}}resetPlugins(){this.reset(c.PluginDescriptionKind.regular)}resetPreloadedPlugins(){this.reset(c.PluginDescriptionKind.preloaded)}reset(a){this.applicationApis=
this.applicationApis.filter((b)=>{if(b.pluginDescription.pluginDescriptionKind===a){try{this.messageHandler.unregisterMessageProcessor(b.pluginDescription),b.dispose()}catch(d){F.LoggerModule.logException(this.logger,"plugin","reset, scene not updated?",d)}return!1}return!0})}textEdit(a){return this.applicationApis.some((b)=>b.handleTextEdit(a))}fileDrop(a,b){return this.applicationApis.some((c)=>c.handleFileDrop(a,b))}selectFile(a,b,d){for(let c of this.applicationApis)try{const e=c.handleFileSelect(a,
b);if(null!=e){e.then((b)=>d(b,a)).catch((a)=>{this.createLogException(c.pluginDescription)("selectFile",a)});return}}catch(h){this.createLogException(c.pluginDescription)("selectFile",h)}F.avro.Avro.createDefaultLogger().logOpenUploadDialog({upload_object_type:c.FileFilter.getMimeTypes(b).join(","),upload_source:"LOCAL"});return this.fileInsertDialogProvider.launchFileInsertDialog(b,(a)=>{d(a,"LOCAL")})}afterPaste(a){this.applicationApis.forEach((b)=>b.handleAfterPaste(a))}urlDrop(a){return this.applicationApis.some((b)=>
b.handleURLDrop(a))}styledTextDrop(a){return this.applicationApis.some((b)=>b.handleStyledTextDrop(a))}setListDropHandler(a){const b=p.Utils.generateUUID();this.listDrop={id:b,handler:a};return{dragId:b}}listItemDrop(a){null!=this.listDrop&&this.listDrop.id===a.data.dragId&&this.listDrop.handler(a)}renderSidebar(a,b){for(const c of this.applicationApis){const d=c.handleRenderSidebar(a,b,this.getCurrentScrollIntoViewIds());if(null!=d)return d}return null}renderLeftSidebar(a){for(const b of this.applicationApis){const c=
b.handleRenderLeftSidebar(a,this.getCurrentScrollIntoViewIds());if(null!=c)return c}return null}renderDialog(a,b){for(const c of this.applicationApis){const d=c.handleRenderModal(a,b,this.getCurrentScrollIntoViewIds());if(null!=d)return d}return null}setNetworkStatus(a){this.networkStatus=a;for(const b of this.applicationApis)b.setNetworkStatus(a)}handleNavigationEvent(a){if(this.maybeEditorSession.hasValue()&&null!=a){const b=this.maybeEditorSession.value.document.read((b)=>{const c=r.CetModelEditor.createPathElementIdToPlaybackPathPositionMap(b);
for(let [d,e]of c.entries())if(a.getToPos().isSame(e))return b.lookup.pathElement(d).ref;return null});this.navigationEvent=null==b?null:{intent:a.getIntent(),pathElementRef:b}}else this.navigationEvent=null;for(const a of this.applicationApis)a.handleNavigation(this.navigationEvent)}documentChanged(a){for(const b of this.applicationApis)b.handleDocumentChange(a)}licenseChanged(a){this.userLicenseInformation=a;for(const b of this.applicationApis)b.handleLicenseChange(a)}setSelection(a){this.selectionInfo=
a;for(const b of this.applicationApis)b.handleSelectionChange(a)}setTextSelection(a){this.textSelectionInfo=a;for(const b of this.applicationApis)b.handleTextSelectionChange(a)}setCurrentTopic(a){this.currentTopic=a;for(const b of this.applicationApis)b.handleCurrentTopicChange(a)}setApplicationMode(a){this.applicationMode=a;for(const b of this.applicationApis)b.handleApplicationModeChange(a)}updateAllUiState(){for(const a of this.applicationApis)a.handleUpdateUiState()}updateCache(a,b,c){const d=
p.Utils.flatten(this.applicationApis.map((a)=>c(a))),f=a();null!=f&&f.length===d.length&&null==f.find((a,b)=>a!==d[b])||b(d);return a()}getMenuItems(){return this.updateCache(()=>this.menuItemsCache,(a)=>{this.menuItemsCache=a},(a)=>a.dropDownMenuItems)}getTabMenuItems(){return this.updateCache(()=>this.tabMenuItemsCache,(a)=>{this.tabMenuItemsCache=a},(a)=>a.tabMenuItems)}getMixerButtons(){return this.updateCache(()=>this.mixerButtonItemCache,(a)=>{this.mixerButtonItemCache=a},(a)=>a.mixerButtonItems)}getContextMenuItems(){return this.updateCache(()=>
this.contextMenuItemsCache,(a)=>{this.contextMenuItemsCache=a},(a)=>a.contextMenuItems)}getFilePickerDescriptions(){const a=[];for(let b of this.applicationApis)a.push(...b.getFilePickerDescriptions());a.sort((a,c)=>a.name.localeCompare(c.name));return a}getPropertyBarItems(){return this.applicationApis.map((a)=>a.propertyBarItems).reduce((a,b)=>a.concat(b),[])}setEditorSession(a){if(this.maybeEditorSession.hasValue())throw Error("DocumentSession already initialized");this.maybeEditorSession.setValue(a);
for(const b of this.applicationApis)b.setEditorSession(a)}userSettingsChange(a){this.currentUserSettings=a;for(let b of this.applicationApis)b.handleUserSettingsChange(a)}documentEvent(a){this.currentDocumentEvents.push(a);for(let b of this.applicationApis)b.handleDocumentEvent(a)}createLogException(a){const b=F.LoggerModule.getLoggerManager().createLogger(a.name);return(c,e)=>{F.LoggerModule.logException(b,a.name,c,e)}}registerPreloadedPlugin(a,b){return ja(this,void 0,void 0,function*(){const c=
this.createLogException(a),e=new g.CallHandler((a)=>c("errorHandler",a));if(null==a.featureSwitches||Q.evaluateFeatureSwitchCondition(a.featureSwitches)){const d=(yield b()).createPlugin(),f=this.applicationApis.findIndex((b)=>b.pluginDescription.name===a.name);if(0<=f){const a=this.applicationApis[f];this.applicationApis.splice(f,1);a.handleStop()}const g=new H.ApplicationApiImpl(this.serviceMocks,e,this,this.sidebarController,this.contextMenuController,this.spotlightController,this.pluginServiceProvider,
a,d,this.fileInsertDialogProvider,this.networkStatus,this.currentTopic,this.applicationMode,this.selectionInfo,this.textSelectionInfo,this.popupController,this.dialogController,this.errorDialogController,this,this.uiChanged,this.isDesktop,this.userLicenseInformation,this.navigationEvent,this.keyboardEventMatcher,this.maybeEditorSession,this.currentUserSettings,this.currentDocumentEvents,this.serviceOptions,this.audioController);A.guard(c,"init",()=>{w.asKillable(g,(b)=>{d.pluginDescription=a;d.pluginAccess=
this;d.userSettings=this.userSettings;d.init(b)});g.handleStart();this.applicationApis.push(g);this.messageHandler.registerMessageProcessor(a,g)},null)(null)}})}registerPlugin(a,b){return ja(this,void 0,void 0,function*(){if(!this.maybeEditorSession.hasValue())throw Error("DocumentSession not initialized");const c=this.createLogException(a),e=new g.CallHandler((a)=>c("errorHandler",a)),f=this.maybeEditorSession;if(null==a.featureSwitches||Q.evaluateFeatureSwitchCondition(a.featureSwitches)){const d=
(yield b()).createPlugin(),g=this.applicationApis.findIndex((b)=>b.pluginDescription.name===a.name);if(0<=g){const a=this.applicationApis[g];this.applicationApis.splice(g,1);a.handleStop()}const h=new H.ApplicationApiImpl(this.serviceMocks,e,this,this.sidebarController,this.contextMenuController,this.spotlightController,this.pluginServiceProvider,a,d,this.fileInsertDialogProvider,this.networkStatus,this.currentTopic,this.applicationMode,this.selectionInfo,this.textSelectionInfo,this.popupController,
this.dialogController,this.errorDialogController,this,this.uiChanged,this.isDesktop,this.userLicenseInformation,this.navigationEvent,this.keyboardEventMatcher,f,this.currentUserSettings,this.currentDocumentEvents,this.serviceOptions,this.audioController);A.guard(c,"init",()=>{w.asKillable(h,(b)=>{d.session=f.value;d.pluginDescription=a;d.pluginAccess=this;d.userSettings=this.userSettings;d.init(b)});h.handleStart();this.applicationApis.push(h);this.messageHandler.registerMessageProcessor(a,h)},null)(null)}})}send(a,
b){this.messageHandler.sendMessage(a,b)}getColorGrids(a,b){const c=null==a?[]:[...a];b&&this.applicationApis.forEach((a)=>{c.push(...a.colorGrids)});return c}getCurrentScrollIntoViewIds(){var a,b;return null!==(b=null===(a=this.currentScrollIntoViewInfo)||void 0===a?void 0:a.ids)&&void 0!==b?b:[]}setCurrentScrollIntoViewIds(a){const b=p.Utils.generateUUID();this.currentScrollIntoViewInfo={uuid:b,ids:null!==a&&void 0!==a?a:[]};this.uiChanged();return b}clearCurrentScrollIntoViewIds(a){var b;if((null===
(b=this.currentScrollIntoViewInfo)||void 0===b?void 0:b.uuid)!==a)return!1;this.currentScrollIntoViewInfo=null;this.uiChanged();return!0}};J.SnapshotRendererImpl=class{constructor(a,b){this.stage=b;this.stagePos={x:0,y:0};a.onValue((a)=>{this.stagePos=a})}drawSampleForMouse(a){return ja(this,void 0,void 0,function*(){var b=a.width;const c=a.height,e=this.stage.getStageCamera().getStageArea().getData();b={x:this.stagePos.x-e.x-b/2,y:this.stagePos.y-e.y-c/2,width:b,height:c};yield this.stage.getRenderer().drawSample(a,
b)})}};class Fa{constructor(a){this.getApplicationApis=a}apply(a,b,c,e){for(const d of this.getApplicationApis())if(d.handlePlanetLayoutEvent(a,b,c,e))return!0;return!1}isValid(a,b){for(const c of this.getApplicationApis())if(c.handlePlanetLayoutIsValid(a,b))return!0;return!1}}class Ia{constructor(a){this.getApplicationApis=a}apply(a,b,c){for(const d of this.getApplicationApis())if(d.handleContentLayoutEvent(a,b,c))return!0;return!1}isValid(a,b){for(const c of this.getApplicationApis())if(c.handleContentLayoutIsValid(a,
b))return!0;return!1}}class Ha{constructor(a){this.getApplicationApis=a}apply(a,b,c,e){for(const d of this.getApplicationApis())if(d.handleOverviewLayoutEvent(a,b,c,e))return!0;return!1}isValid(a,b){for(const c of this.getApplicationApis())if(c.handleOverviewLayoutIsValid(a,b))return!0;return!1}}class Ga{constructor(a){this.getApplicationApis=a}apply(a,b,c){for(const d of this.getApplicationApis())if(d.handleTopicLayoutApplication(a,b,c))return!0;return!1}}var ka={};Object.defineProperty(ka,"__esModule",
{value:!0});var V=r.base.ObjectKind;ka.PluginSessionImpl=class{constructor(a,b,d,e,f,g,k,l,z,r,q,v,t,u,w,x,A,C,D){this.documentEvents=C;this.serviceMocks={};q=wa.DataServiceModule.createUserSettingsStore(q);this.applicationController=new J.ApplicationControllerImpl(b,d,e,f,this.serviceMocks,g,k,l,z,r,q,v,t,u,w,x,D);a.getDeferredNetworkStatusStream().skipDuplicates().onValue((a)=>{this.applicationController.setNetworkStatus(1===a?c.NetworkStatus.Online:c.NetworkStatus.Offline)});a.getDeferredUserLicenseInformationStream().onValue((a)=>
{this.applicationController.licenseChanged(a)});a.getDeferredCurrentTopicStream().onValue((a)=>{this.applicationController.setCurrentTopic(a)});a.getDeferredNavigationEventStream().onValue((a)=>{this.applicationController.handleNavigationEvent(a)});a.getDeferredModeStream().onValue((a)=>{this.applicationController.setApplicationMode(((a)=>{switch(a){case B.EditorMode.animationPreview:return c.ApplicationMode.AnimationPreview;case B.EditorMode.edit:return c.ApplicationMode.Edit;case B.EditorMode.follow:return c.ApplicationMode.Follow;
case B.EditorMode.info:return c.ApplicationMode.Info;case B.EditorMode.playback:return c.ApplicationMode.Playback;case B.EditorMode.templateChooser:return c.ApplicationMode.TemplateChooser;case B.EditorMode.view:return c.ApplicationMode.View;default:return p.Utils.assertNever(a)}})(a.kind))});A.onValue((a)=>this.applicationController.userSettingsChange(a));C.filter((a)=>{switch(a.kind){case c.DocumentEventKind.Create:return!0;case c.DocumentEventKind.Metadata:return null!=a.preziOid;default:throw p.Utils.assertNever(a);
}}).onValue((a)=>this.applicationController.documentEvent(a))}onDocumentLoaded(a,b,d,e,f,g,k,l,z,p,t,v,u,w,x,B,C,D,F,E,L,G,H,I,M){G=new J.SnapshotRendererImpl(G,E);a=r.CetModelEditor.createRunner(a,d,t,this.applicationController.behaviorExtensions,v);f=new Ja(f);g=this.createSelectionApi(k,g,z);t=r.CetModelEditor.createProgressiveAssetManager(b.preziOid,d,u,q.Cet.createAudioPatcher(v),q.Cet.createImagePatcher(v),q.Cet.createChartPatcher(v),q.Cet.createVideoPatcher(v),q.Cet.createPdfPatcher(v),w,x,
B,C,t,D,F,v,I.getMainStage().getRenderer().getAssetManager());z=z.getTextEditEvents().map((a)=>()=>this.applicationController.textEdit(a));v=K.Bacon.combineWith((a,b)=>({changeEvents:a,textSelectionState:b}),d.getImmediateChangeStream(q.ChangeEventKind.Entity).filter((a)=>a.some((a)=>a.componentKey===q.Cet.getSelectionTextRangeComponentKey()||a.componentKey===q.Cet.getTextCaretOffsetComponentKey())),k.getTextSelectionStateStream()).filter(({textSelectionState:a})=>null!=a).map(({textSelectionState:a})=>
{a=a.isSingleSelection()&&a.isEditing()?d.getEntityById(a.getEntityIds()[0]):null;if(null!=a){const b=a.get(q.Cet.getSelectionTextRangeComponentKey()),d=a.get(q.Cet.getTextCaretOffsetComponentKey());return{offset:null!=b?b.start:d,length:null!=b?b.end-b.start:0,caretPosition:null!=b&&b.start===d?c.CaretPosition.Start:c.CaretPosition.End,id:a.getId()}}return null}).skipDuplicates((a,b)=>null==a||null==b?a===b:a.offset===b.offset&&a.length===b.length&&a.id===b.id&&a.caretPosition===b.caretPosition).map((a)=>
()=>this.applicationController.setTextSelection(a));u=k.getSelectionStream().map((a)=>()=>this.applicationController.setSelection(a));K.Bacon.mergeAll([z,v,u]).onValue((a)=>Promise.resolve().then(()=>a()));H.onValue((a)=>{this.applicationController.documentChanged(a)});H=new Ka(k.getCoverEditModeStream());const h=K.Bacon.newBus();k.addChangeModeActionStream(h);k=new A.ApplicationModeApiImpl((a)=>{h.push(a)},l);p=new A.NavigationApiImpl(d,p,(a)=>{h.push(a)});l=new A.VideoBackgroundApiImpl(E);b=new A.DocumentSessionImpl(d,
t,b,a,L,M,I,this.documentEvents.map((a)=>a.kind===c.DocumentEventKind.Metadata&&null!=a.preziOid?a:null).filter((a)=>null!=a));this.editorSession=new A.EditorSessionImpl(b,f,e,g,H,k,p,E,G,l);this.applicationController.setEditorSession(this.editorSession)}getEditorSession(){return this.editorSession}getThumbnailSession(){return this.editorSession}createSelectionApi(a,b,c){return new La(a,b,c)}registerServiceMock(a,b){this.serviceMocks[g.concatUrlParts(a)]=b}get pluginAccess(){return this.applicationController}};
class La{constructor(a,b,c){this.editorStore=a;this.selectionController=b;this.textSelectionController=c}selectI(a,b){this.selectionController.select({selectedGroupIds:a.filter((a)=>a.is(V.group)).map((a)=>a.id),selectedEntityIds:a.filter((a)=>!a.is(V.group)).map((a)=>a.id),type:b})}addToSelection(a,b){g.checkAT(a);this.selectI(b,L.SelectActionType.add)}removeFromSelection(a,b){g.checkAT(a);this.selectI(b,L.SelectActionType.remove)}setSelection(a,b){g.checkAT(a);this.selectI(b,L.SelectActionType.replace)}toggleSelection(a,
b){g.checkAT(a);this.selectI(b,L.SelectActionType.toggle)}getSelectionInfo(a){return g.selectionToTransformedSelection(a,this.editorStore.getSelection())}getReadonlySelectionInfo(a){return g.selectionToReadonlyTransformedSelection(a,this.editorStore.getSelection())}getTextSelectionInfo(){return this.textSelectionController.getTextSelectionInfo()}setTextSelection(a,b){g.checkAT(a);return this.textSelectionController.setTextSelection(b)}}class Ja{constructor(a){this.insertHierarchyDestination=a}getSimpleObjectParent(a){if(this.insertHierarchyDestination.getCurrentKind()===
r.InsertHierarchyDestinationKind.COVER)return a.lookup.topic(this.insertHierarchyDestination.getCurrentParentId()).cover;a=a.lookup.base(this.insertHierarchyDestination.getCurrentParentId());return null!=a&&a.is(V.simpleObjectParent)?a:null}getSimpleObjectParentReader(a){if(this.insertHierarchyDestination.getCurrentKind()===r.InsertHierarchyDestinationKind.COVER)return a.lookup.topic(this.insertHierarchyDestination.getCurrentParentId()).cover;a=a.lookup.base(this.insertHierarchyDestination.getCurrentParentId());
return null!=a&&a.is(V.simpleObjectParent)?a:null}}class Ka{constructor(a){a.onValue((a)=>this.coverEditMode=a)}getMode(a){return this.getModeI((b)=>a.lookup.topic(b))}getReadonlyMode(a){return this.getModeI((b)=>a.lookup.topic(b))}getModeI(a){if(null==this.coverEditMode)return{kind:c.CoverEditModeKind.None};a=a(this.coverEditMode.topicId);if(null==a)return{kind:c.CoverEditModeKind.None};switch(this.coverEditMode.kind){case W.CoverEditModeKind.advanced:return{kind:c.CoverEditModeKind.Advanced,topic:a};
case W.CoverEditModeKind.insideAdvanced:return{kind:c.CoverEditModeKind.InsideAdvanced,topic:a};case W.CoverEditModeKind.titleEditOnly:return{kind:c.CoverEditModeKind.Title,topic:a};default:throw p.Utils.assertNever(this.coverEditMode);}}}var ra={startRender:function(a,b,c,e){if(!(b instanceof J.ApplicationControllerImpl))throw Error("not PreloadedApplicationControllerImpl");ta.render(k.createElement(qa,{uiStore:c,applicationController:b,spotlight:e}),a)}};Object.defineProperty(ra,"__esModule",{value:!0});
class qa extends k.PureComponent{constructor(){super(...arguments);this.state={modalId:{kind:u.DialogKind.None},popupIds:[]}}componentWillMount(){this.unsubscribe=[this.props.uiStore.getOpenedDialogPropsStream().onValue((a)=>this.setState({modalId:a})),this.props.uiStore.getOpenedPopupIdStream().onValue((a)=>this.setState({popupIds:[a]}))]}componentWillUnmount(){null!=this.unsubscribe&&this.unsubscribe.forEach((a)=>a())}render(){return k.createElement("div",{style:{lineHeight:"normal",userSelect:"none"}},
this.state.modalId.kind===u.DialogKind.Custom?k.createElement("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none"}},this.props.applicationController.renderDialog(this.state.modalId,this.state.popupIds)):null,c.createPopupLayer(),this.props.spotlight.ui.render())}}qa.displayName="PreloadedUI";var c={createMessageHandler:function(){return new da.MessageHandlerImpl}};Object.defineProperty(c,"__esModule",{value:!0});(function(a){a.desktop="desktop";a.always=
"always";a.none="none"})(c.SupportsOffline||(c.SupportsOffline={}));(function(a){a.preloaded="preloaded";a.regular="regular"})(c.PluginDescriptionKind||(c.PluginDescriptionKind={}));(function(a){a.None="none";a.Watermark="watermark";a.DocumentBased="document-based"})(c.PreziLogoType||(c.PreziLogoType={}));(function(a){a.Create="Create";a.Metadata="Metadata"})(c.DocumentEventKind||(c.DocumentEventKind={}));c.initPreloadedUI=function(a,b,c,e){ra.startRender(a,b,c,e)};(function(a){a.None="None";a.Title=
"Title";a.Advanced="Advanced";a.InsideAdvanced="InsideAdvanced"})(c.CoverEditModeKind||(c.CoverEditModeKind={}));(function(a){a.drag="drag";a.click="click"})(c.DropKind||(c.DropKind={}));(function(a){a.Playback="playback";a.Edit="edit";a.View="view";a.Info="info";a.TemplateChooser="templatechooser";a.Follow="follow";a.AnimationPreview="animationPreview"})(c.ApplicationMode||(c.ApplicationMode={}));(function(a){a.Online="Online";a.Offline="Offline"})(c.NetworkStatus||(c.NetworkStatus={}));(function(a){a[a.EndTransaction=
0]="EndTransaction";a[a.BeginOtherTransaction=1]="BeginOtherTransaction";a[a.AbortTransaction=2]="AbortTransaction";a[a.RollbackTransaction=3]="RollbackTransaction"})(c.FinishEventKind||(c.FinishEventKind={}));(function(a){a.Success="Success";a.Error="Error";a.ErrorExternalEdit="ErrorExternalEdit"})(c.SaveResult||(c.SaveResult={}));(function(a){a.Start="start";a.End="end"})(c.CaretPosition||(c.CaretPosition={}));(function(a){a.Insert="insert";a.Command="command"})(c.TextEditEventKind||(c.TextEditEventKind=
{}));(function(a){a.Enter="Enter";a.Backspace="Backspace";a.Delete="Delete";a.Tab="Tab"})(c.TextEditCommandKind||(c.TextEditCommandKind={}));c.emptySelectionInfo=function(){return{allObjects:[],groups:[],nonGroupedObjects:[]}};c.emptySelectionChangeInfo=function(){return{allObjects:[],groups:[],nonGroupedObjects:[]}};(function(a){a.next="next";a.prev="prev";a["goto"]="goto"})(c.NavigationIntent||(c.NavigationIntent={}));(function(a){a.file="file";a.preziContent="preziContent"})(c.PasteEventType||
(c.PasteEventType={}));(function(a){a.remove="remove";a.reset="reset";a.adjust="adjust"})(c.TopicLayoutEventKind||(c.TopicLayoutEventKind={}));(function(a){a.full="Full";a.extraLarge="ExtraLarge";a.large="Large";a.medium="Medium";a.small="Small";a.corner="Corner"})(c.DialogType||(c.DialogType={}));(function(a){a.Short="Short";a.Full="Full"})(c.PopupHeight||(c.PopupHeight={}));(function(a){a.Hamburger="hamburgerMenu";a.Lab="labMenu";a.Debug="debugMenu";a.Present="presentMenu"})(c.MenuId||(c.MenuId=
{}));(function(a){a.Insert="insertMenu";a.Style="styleMenu";a.Share="shareMenu"})(c.TabMenuId||(c.TabMenuId={}));(function(a){a.dropdown="dropDown";a.largeButton="largeButton";a.mixerButton="mixerButton";a.context="context"})(c.MenuItemKind||(c.MenuItemKind={}));(function(a){a.Mac="mac";a.Windows="windows"})(c.OsKind||(c.OsKind={}));(function(a){a.successfullyStarted="successfullyStarted";a.playbackStartFailure="playbackStartFailure";a.genericFailure="genericFailure"})(c.VideoBackgroundStatusCode||
(c.VideoBackgroundStatusCode={}));c.createPluginSession=function(a,b,c,e,f,g,k,l,p,q,r,t,u,w,x,A,B,C,D){return new ka.PluginSessionImpl(a,b,c,e,f,g,k,l,p,q,r,t,u,w,x,A,B,C,D)};c.createPopupLayer=function(){return k.createElement(f.Layer,{id:"popup-layer",zIndex:203})};c.createApplicationUI_Internal=function(a,b,c,e,f,k,l=()=>{}){class d{get(a,b){b=a[b];return"function"===typeof b?b.bind(a):b}set(a,b,c){a[b]=c;return!0}}return new class extends U.ApplicationUIImpl{constructor(){super(new Proxy({callWithUAT:(a)=>
a(new Proxy({},new d)),call:(a)=>a()},new d),new Proxy({setListDropHandler:(a)=>a(new Proxy({},new d)),getFilePickerDescriptions:()=>[{icon:sa.Upload,id:"some-id",name:"some name"}],selectFile:(a,b,c)=>{k.launchFileInsertDialog(b,(a)=>c(a,"LOCAL"))}},new d),new Proxy({},new d),new Proxy({},new d),new Proxy({togglePopup:a,openPopup:b,closePopup:c,isPopupOpen:e},new d),new Proxy({show:l,hide:()=>{},showBuiltIn:()=>{},hideBuiltIn:()=>{},showError:()=>{},showBuiltInError:()=>{},showIFrame:()=>null},new d),
new Proxy({registerPopup:()=>{},openPopup:b,closePopup:c,togglePopup:a},new d),new Proxy({getColorGrids:(a)=>null==a?[]:a},new d),k,new g.MaybeImpl,{},new S.AudioController)}}};c.invalidateAsyncUserActionTokens=function(){g.invalidateAsyncUserActionTokensI()};(c.NamedColors||(c.NamedColors={})).topicButton="topicButton";(function(a){a.neutral="neutral";a.blue="blue"})(c.SpinnerColor||(c.SpinnerColor={}));(function(a){a.l="L";a.m="M";a.s="S";a.xs="XS"})(c.SpinnerSize||(c.SpinnerSize={}));(function(a){a.center=
"center";a.corner="corner"})(c.DialogAlign||(c.DialogAlign={}));(function(a){a.none="none";a.unchecked="unchecked";a.checked="checked"})(c.CheckedState||(c.CheckedState={}));(function(a){a.video="video";a.image="image"})(c.HoverContentType||(c.HoverContentType={}));(function(a){a[a.Gray=0]="Gray";a[a.Ghost=1]="Ghost";a[a.Blue=2]="Blue";a[a.Red=3]="Red";a[a.Green=4]="Green";a[a.Gold=5]="Gold"})(c.ButtonColor||(c.ButtonColor={}));(function(a){a[a.Small=0]="Small";a[a.Large=1]="Large"})(c.ButtonSize||
(c.ButtonSize={}));(function(a){a.Start="flex-start";a.End="flex-end";a.Center="center"})(c.ButtonAlign||(c.ButtonAlign={}));(function(a){a[a.Rounded=0]="Rounded";a[a.Circle=1]="Circle"})(c.ButtonShape||(c.ButtonShape={}));(function(a){a.Restart="Restart";a.Cancel="Cancel";a.None="None"})(c.ProgressBarControl||(c.ProgressBarControl={}));(function(a){a.full="Full";a.large="Large";a.small="Small";a.numbered="Numbered"})(c.ListItemType||(c.ListItemType={}));(function(a){a.dynamic="Dynamic";a.fixed="Fixed"})(c.ListItemLayout||
(c.ListItemLayout={}));(function(a){a.finished="finished";a.working="working";a.idle="idle"})(c.ListProgress||(c.ListProgress={}));(function(a){a.medium_1_1="medium_1_1";a.medium_2="medium_2";a.extraLarge_1_1_1="extraLarge_1_1_1";a.extraLarge_1_2="extraLarge_1_2";a.extraLarge_2_1="extraLarge_2_1";a.extraLarge_3="extraLarge_3"})(c.DialogItemRowLayout||(c.DialogItemRowLayout={}));(function(a){a.circle="circle";a.rect="rect";a.rounded="rounded"})(c.HoleShape||(c.HoleShape={}));(function(a){a[a.Image=
0]="Image";a[a.Mp4=1]="Mp4"})(c.CalloutMediaTypes||(c.CalloutMediaTypes={}));(function(a){a.leftSidebar="leftSidebar";a.sidebar="sidebar";a.simpleList="simpleList";a.multiSelectList="multiSelectList";a.dialog="dialog";a.fullDialog="fullDialog";a.extraLargeDialog="extraLargeDialog";a.largeDialog="largeDialog";a.mediumDialog="mediumDialog";a.smallDialog="smallDialog";a.alertDialog="alertDialog";a.dialogRow="dialogRow";a.popup="popup";a.propertybar="propertybar";a.timelineList="timelineList"})(c.ContainerKind||
(c.ContainerKind={}));(function(a){a.Container="Container";a.Simple="Simple"})(c.ItemKind||(c.ItemKind={}));(function(a){a.Left="left";a.Right="right"})(c.PropertyBarId||(c.PropertyBarId={}));(function(a){a.Keyboard="keyboard";a.Mouse="mouse"})(c.ActionTrigger||(c.ActionTrigger={}));(function(a){a.Small="small";a.Large="large"})(c.PropertyBarSeparatorSize||(c.PropertyBarSeparatorSize={}));c.DropdownMenuSeparator="Separator";(function(a){a.Image="image";a.GroupHeader="groupHeader"})(c.PropertyBarDropdownItemKind||
(c.PropertyBarDropdownItemKind={}));(function(a){a[a.Info=0]="Info";a[a.Error=1]="Error"})(c.CautionTypes||(c.CautionTypes={}));(function(a){a.contactSalesCommenting="contact_sales_commenting_modal";a.presenterViewDesktopDownload="presenter_view_desktop_download_modal";a.privacyPaywallWarning="privacy_paywall_warning";a.shareDialogCollaborators="share_dialog_collaborators";a.shareDialogViewLinks="share_dialog_viewlinks";a.upgradeLicenseIconSearch="upgrade_license_icon_search";a.upgradeLicenseImageSearch=
"upgrade_license_image_search";a.upgradeLicenseInsertAudio="upgrade_license_insert_audio_modal";a.upgradeLicenseInsertChart="upgrade_license_insert_chart_modal";a.upgradeLicenseInsertVideo="upgrade_license_insert_video_modal";a.upgradeLicenseLivePrezi="upgrade_license_live_prezi_modal";a.upgradeLicenseNoWatermark="upgrade_license_no_watermark";a.upgradeLicenseCustomLogo="upgrade_license_custom_logo";a.upgradeLicensePresenterView="upgrade_license_presenter_view_modal";a.upgradeLicenseScheme="upgrade_license_scheme";
a.upgradeLicenseShareViewLink="upgrade_license_share_viewlink";a.upgradeLicenseStoryblocks="upgrade_license_storyblocks";a.upgradeLicenseTextScheme="upgrade_license_text_scheme";a.upgradeLicenseMaster="upgrade_license_master"})(c.BuiltinDialog||(c.BuiltinDialog={}));(function(a){a[a.A=65]="A";a[a.B=66]="B";a[a.C=67]="C";a[a.D=68]="D";a[a.E=69]="E";a[a.F=70]="F";a[a.G=71]="G";a[a.H=72]="H";a[a.I=73]="I";a[a.J=74]="J";a[a.K=75]="K";a[a.L=76]="L";a[a.M=77]="M";a[a.N=78]="N";a[a.O=79]="O";a[a.P=80]="P";
a[a.Q=81]="Q";a[a.R=82]="R";a[a.S=83]="S";a[a.T=84]="T";a[a.U=85]="U";a[a.V=86]="V";a[a.W=87]="W";a[a.X=88]="X";a[a.Y=89]="Y";a[a.Z=90]="Z"})(c.Key||(c.Key={}));c.createUatForTest=function(){return g.createUatForTestI()};const Ma=["application/octet-stream"];c.FileFilter={passes:(a,b)=>{if(null==b)return!1;if(null==b.type||""===b.type||-1<Ma.indexOf(b.type))return a=c.FileFilter.getExtensions(a),b="."+b.name.split(".").pop().toLowerCase(),0===a.length||0<=a.indexOf(b);a=c.FileFilter.getMimeTypes(a);
return 0===a.length||0<=a.indexOf(b.type)},getMimeTypes:(a)=>{let b=[];a.allowAudio&&(b=[...b,"audio/mpeg","audio/mpeg3","audio/x-m4a","audio/mp4a-latm","audio/mp4"]);a.allowImage&&(b=[...b,"image/png","image/jpg","image/jpeg","image/gif"]);a.allowPdf&&(b=[...b,"application/pdf"]);a.allowVideo&&(b=[...b,"video/mp4"]);a.allowPpt&&(b=[...b,"application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"]);return b},getExtensions:(a)=>{let b=new Set;for(const d of c.FileFilter.getMimeTypes(a))a=
p.Utils.getExtensionFromMimeType(d),null!=a&&""!==a&&b.add(a);return[...b]}};c.createUatKillmeDontUseDiscussWithEditorApi=function(){return g.createUatForTestI()};(function(a){a.AssetError="icon-large-asset-error";a.Camera="icon-large-camera";a.Explore="icon-large-explore";a.ExploreOutline="icon-large-explore-outline";a.File="icon-large-file";a.FileUpload="icon-large-file-upload";a.GoLive="icon-large-go-live";a.Heart="icon-large-heart";a.HeartOutline="icon-large-heart-outline";a.HelpWithCircle="icon-large-help-with-circle";
a.Image="icon-large-image";a.Insert="icon-large-insert";a.Login="icon-large-login";a.MyLibrary="icon-large-my-library";a.NoCamera="icon-large-no-camera";a.Pause="icon-large-pause";a.Play="icon-large-play";a.Plus="icon-large-plus";a.Recent="icon-large-recent";a.RecentOutline="icon-large-recent-outline";a.Replay="icon-large-replay";a.Reuse="icon-large-reuse";a.Search="icon-large-search";a.StaffPick="icon-large-staff-pick";a.Style="icon-large-style"})(c.IconLargeId||(c.IconLargeId={}));(function(a){a.CheckMini=
"icon-mini-check-mini";a.CloseMini="icon-mini-close-mini"})(c.IconMiniId||(c.IconMiniId={}));var sa;(function(a){a.AddUser="icon-small-add-user";a.AlignCenter="icon-small-align-center";a.AlignContentBottom="icon-small-align-content-bottom";a.AlignContentCenter="icon-small-align-content-center";a.AlignContentLeft="icon-small-align-content-left";a.AlignContentMiddle="icon-small-align-content-middle";a.AlignContentRight="icon-small-align-content-right";a.AlignContentTop="icon-small-align-content-top";
a.AlignJustify="icon-small-align-justify";a.AlignLeft="icon-small-align-left";a.AlignRight="icon-small-align-right";a.Animation="icon-small-animation";a.ArrowBoldUp="icon-small-arrow-bold-up";a.ArrowLineLeft="icon-small-arrow-line-left";a.ArrowLineRight="icon-small-arrow-line-right";a.ArrowsAndLines="icon-small-arrows-and-lines";a.AssetError="icon-small-asset-error";a.Audio="icon-small-audio";a.AverageHeight="icon-small-average-height";a.AverageWidth="icon-small-average-width";a.Backward="icon-small-backward";
a.Bold="icon-small-bold";a.Bookmark="icon-small-bookmark";a.BorderColor="icon-small-border-color";a.BorderWeight="icon-small-border-weight";a.BrandKit="icon-small-brand-kit";a.Brush="icon-small-brush";a.BulletPoint="icon-small-bullet-point";a.Camera="icon-small-camera";a.Caption="icon-small-caption";a.Charts="icon-small-charts";a.Chat="icon-small-chat";a.Check="icon-small-check";a.ChevronDown="icon-small-chevron-down";a.ChevronLeft="icon-small-chevron-left";a.ChevronRight="icon-small-chevron-right";
a.ChevronUp="icon-small-chevron-up";a.Clicker="icon-small-clicker";a.Close="icon-small-close";a.Code="icon-small-code";a.Comment="icon-small-comment";a.Copy="icon-small-copy";a.CoverSettings="icon-small-cover-settings";a.Crop="icon-small-crop";a.Crown="icon-small-crown";a.Css="icon-small-css";a.CustomStartingpoint="icon-small-custom-startingpoint";a.Cycle="icon-small-cycle";a.DecreaseTextSize="icon-small-decrease-text-size";a.DistributeHorizontal="icon-small-distribute-horizontal";a.DistributeVertical=
"icon-small-distribute-vertical";a.Docs="icon-small-docs";a.Download="icon-small-download";a.Draft="icon-small-draft";a.Dropbox="icon-small-dropbox";a.Dropdown="icon-small-dropdown";a.Edit="icon-small-edit";a.EditImage="icon-small-edit-image";a.Equations="icon-small-equations";a.ExitFullScreen="icon-small-exit-full-screen";a.Explore="icon-small-explore";a.ExploreOutline="icon-small-explore-outline";a.Export="icon-small-export";a.EyeDropper="icon-small-eye-dropper";a.FadeIn="icon-small-fade-in";a.FadeOut=
"icon-small-fade-out";a.File="icon-small-file";a.FileUpload="icon-small-file-upload";a.FillColor="icon-small-fill-color";a.Folder="icon-small-folder";a.FolderWithUser="icon-small-folder-with-user";a.Forward="icon-small-forward";a.Fullscreen="icon-small-fullscreen";a.GoLive="icon-small-go-live";a.GoogleClassroom="icon-small-google-classroom";a.GoogleDrive="icon-small-google-drive";a.GoogleSlides="icon-small-google-slides";a.Hamburger="icon-small-hamburger";a.Heart="icon-small-heart";a.HeartBroken=
"icon-small-heart-broken";a.HeartOutline="icon-small-heart-outline";a.Help="icon-small-help";a.HelpWithCircle="icon-small-help-with-circle";a.HiddenNew="icon-small-hidden-new";a.Home="icon-small-home";a.Icon="icon-small-icon";a.Image="icon-small-image";a.Import="icon-small-import";a.IncreaseTextSize="icon-small-increase-text-size";a.Indent="icon-small-indent";a.Info="icon-small-info";a.InfoWithCircle="icon-small-info-with-circle";a.Insert="icon-small-insert";a.Italic="icon-small-italic";a.Lab="icon-small-lab";
a.Layout="icon-small-layout";a.LineThicker="icon-small-line-thicker";a.LineThinner="icon-small-line-thinner";a.Link="icon-small-link";a.LivePrezi="icon-small-live-prezi";a.Lock="icon-small-lock";a.Login="icon-small-login";a.Logout="icon-small-logout";a.MacOS="icon-small-mac-o-s";a.Mail="icon-small-mail";a.Menu="icon-small-menu";a.MiniZebra="icon-small-mini-zebra";a.Minus="icon-small-minus";a.MoreHorizontal="icon-small-more-horizontal";a.MoreVertical="icon-small-more-vertical";a.MyLibrary="icon-small-my-library";
a.NewTopic="icon-small-new-topic";a.NoCamera="icon-small-no-camera";a.NotEditable="icon-small-not-editable";a.Offline="icon-small-offline";a.OneDrive="icon-small-one-drive";a.OpenInNew="icon-small-open-in-new";a.Outdent="icon-small-outdent";a.Path="icon-small-path";a.Pause="icon-small-pause";a.PdfFile="icon-small-pdf-file";a.Photo="icon-small-photo";a.PlanetTopic="icon-small-planet-topic";a.Play="icon-small-play";a.Plus="icon-small-plus";a.Ppt="icon-small-ppt";a.Presentation="icon-small-presentation";
a.PresenterNotes="icon-small-presenter-notes";a.Preview="icon-small-preview";a.PreziDesign="icon-small-prezi-design";a.Public="icon-small-public";a.Recent="icon-small-recent";a.RecentOultine="icon-small-recent-oultine";a.Redo="icon-small-redo";a.Remove="icon-small-remove";a.Replay="icon-small-replay";a.ResizeEnlarge="icon-small-resize-enlarge";a.ResizeShrink="icon-small-resize-shrink";a.Reuse="icon-small-reuse";a.Scale="icon-small-scale";a.Screen="icon-small-screen";a.ScreenRatio="icon-small-screen-ratio";
a.Search="icon-small-search";a.Settings="icon-small-settings";a.Shape="icon-small-shape";a.Share="icon-small-share";a.Shuffle="icon-small-shuffle";a.StackTopic="icon-small-stack-topic";a.Staffpick="icon-small-staffpick";a.Star="icon-small-star";a.Stop="icon-small-stop";a.Storyblocks="icon-small-storyblocks";a.StoryblocksCom="icon-small-storyblocks-com";a.Style="icon-small-style";a.Sync="icon-small-sync";a.SyncOutline="icon-small-sync-outline";a.Synced="icon-small-synced";a.Syntax="icon-small-syntax";
a.Tag="icon-small-tag";a.Text="icon-small-text";a.TextBackground="icon-small-text-background";a.TextForeground="icon-small-text-foreground";a.Trash="icon-small-trash";a.Trim="icon-small-trim";a.UnGroup="icon-small-un-group";a.Undo="icon-small-undo";a.Unlisted="icon-small-unlisted";a.Unsplash="icon-small-unsplash";a.Upload="icon-small-upload";a.User="icon-small-user";a.UserWithCircle="icon-small-user-with-circle";a.UserWithScreen="icon-small-user-with-screen";a.Users="icon-small-users";a.Video="icon-small-video";
a.VolumeOff="icon-small-volume-off";a.VolumeOn="icon-small-volume-on";a.Warning="icon-small-warning";a.Windows="icon-small-windows";a.Xml2="icon-small-xml2";a.ZoomArea="icon-small-zoom-area";a.ZoomIn="icon-small-zoom-in";a.ZoomOut="icon-small-zoom-out"})(sa=c.IconSmallId||(c.IconSmallId={}));(function(a){a.Analytics="illustration-large-light-analytics";a.BrowserRedirect="illustration-large-light-browser-redirect";a.EmailRedirect="illustration-large-light-email-redirect";a.Error="illustration-large-light-error";
a.HappyRectangle="illustration-large-light-happy-rectangle";a.MyLibrary="illustration-large-light-my-library";a.NoCamera="illustration-large-light-no-camera";a.NoResults="illustration-large-light-no-results";a.Offline="illustration-large-light-offline";a.SadRectangle="illustration-large-light-sad-rectangle";a.UnlockPremiumContent="illustration-large-light-unlock-premium-content"})(c.IllustrationLargeLightId||(c.IllustrationLargeLightId={}));(function(a){a.Audio="illustration-small-audio";a.Camera=
"illustration-small-camera";a.CloudUpload="illustration-small-cloud-upload";a.CreatePreziColor="illustration-small-create-prezi-color";a.CreateVideo="illustration-small-create-video";a.CreateVideoColor="illustration-small-create-video-color";a.GoLiveColor="illustration-small-go-live-color";a.Image="illustration-small-image";a.Import="illustration-small-import";a.Pdf="illustration-small-pdf";a.Ppt="illustration-small-ppt";a.PptColor="illustration-small-ppt-color";a.Prezi="illustration-small-prezi";
a.PreziColor="illustration-small-prezi-color";a.Video="illustration-small-video"})(c.IllustrationSmallId||(c.IllustrationSmallId={}));return c});

})() || {};
moduleImpl["module"]=moduleImpl;
return moduleImpl;};if(typeof define==="function"&&define.amd){define("prezi_plugin_api",["require","react","react-dom","react-transition-group","prezi.geometry","prezi_app_utils","prezi_bacon","prezi_cet","prezi_cet_model","prezi_cet_model_editor","prezi_cet_renderer","prezi_editor_error","prezi_editor_store_common","prezi_editor_store_mode","prezi_editor_store_object","prezi_editor_store_ui","prezi_featureswitcher","prezi_i18n","prezi_logger","prezi_nativeapitypes","prezi_ppt_service","prezi_service_data","prezi_service_fontcatalogue","prezi_sound_playback","prezi_spotlight","prezi_uaparser","prezi_utils","prezi_widgets"],function(){var moduleUrl=arguments[0]["toUrl"]("prezi_plugin_api.js");baseUrl=moduleUrl.substr(0,moduleUrl.lastIndexOf("/"));return(__factory).apply({},[].slice.call(arguments,1));});}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){baseUrl=__dirname;module.exports=(__factory)(require("react"),require("react-dom"),require("react-transition-group"),require("prezi.geometry"),require("prezi_app_utils"),require("prezi_bacon"),require("prezi_cet"),require("prezi_cet_model"),require("prezi_cet_model_editor"),require("prezi_cet_renderer"),require("prezi_editor_error"),require("prezi_editor_store_common"),require("prezi_editor_store_mode"),require("prezi_editor_store_object"),require("prezi_editor_store_ui"),require("prezi_featureswitcher"),require("prezi_i18n"),require("prezi_logger"),require("prezi_nativeapitypes"),require("prezi_ppt_service"),require("prezi_service_data"),require("prezi_service_fontcatalogue"),require("prezi_sound_playback"),require("prezi_spotlight"),require("prezi_uaparser"),require("prezi_utils"),require("prezi_widgets"));}else{this["prezi_plugin_api"]=__factory(React,ReactDOM,ReactTransitionGroup,this["prezi.geometry"],this["prezi_app_utils"],this["prezi_bacon"],this["prezi_cet"],this["prezi_cet_model"],this["prezi_cet_model_editor"],this["prezi_cet_renderer"],this["prezi_editor_error"],this["prezi_editor_store_common"],this["prezi_editor_store_mode"],this["prezi_editor_store_object"],this["prezi_editor_store_ui"],this["prezi_featureswitcher"],this["prezi_i18n"],this["prezi_logger"],this["prezi_nativeapitypes"],this["prezi_ppt_service"],this["prezi_service_data"],this["prezi_service_fontcatalogue"],this["prezi_sound_playback"],this["prezi_spotlight"],this["prezi_uaparser"],this["prezi_utils"],this["prezi_widgets"]);}}).call(this);
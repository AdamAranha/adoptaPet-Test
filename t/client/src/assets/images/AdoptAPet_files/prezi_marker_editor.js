;(function(){var baseUrl;var __factory=function(){var module=(function(dependencies){return function(init){return init.call({},(function(){return{getSpaghettiVersion:function(){return "13.0-25-g6015dbc";},getModuleName:function(){return "prezi_marker_editor";},getModuleVersion:function(){return "release-2021w06-base-26-gaeb382e";},getResourceUrl:function(resource){if(resource.substr(0,1)!="/"){resource="/"+resource;}return baseUrl+resource;},"dependencies":{"prezi_cet_model_editor":dependencies[0],"prezi_i18n":dependencies[1],"prezi_plugin_api":dependencies[2],"prezi_widgets":dependencies[3]}};})());};})(arguments);var moduleImpl=(function(){return module(function(a){var f=a.dependencies.prezi_plugin_api,g=a.dependencies.prezi_widgets,c=a.dependencies.prezi_cet_model_editor,h=a.dependencies.prezi_i18n,e={};Object.defineProperty(e,"__esModule",{value:!0});var k=c.base.editorIs,l=c.base.readerIs;e.MarkerEditorPlugin=class{init(a){const b=a.declareUI({displayPropertyBar:!1,fill:null},(a,c)=>{this.createPropertyBar(c,a,b)});a.onSelectionChange((a)=>{0<a.allObjects.length?this.updateState(b):b.setState({displayPropertyBar:!1})})}createPropertyBar(a,
b,d){b.displayPropertyBar&&a.createPropertyBarItem((a)=>a.colorPicker({id:"marker-editor-color",parent:f.PropertyBarId.Left,weight:1,tooltip:h.I18n.ts("Fill color"),title:h.I18n.ts("Fill color"),showThemeColors:!0,icon:f.IconSmallId.FillColor,fills:b.fill,onChange:(a,b)=>{b.isFinal&&(this.session.document.executeApiCommand(a,{name:"Change marker fill",run:(a)=>{this.session.selection.getSelectionInfo(a).allObjects.filter(k(c.base.ObjectKind.marker)).forEach((a)=>{a.fill=b.newFill.color})}}),this.updateState(d))}}))}updateState(a){this.session.document.read((b)=>
{b=this.session.selection.getReadonlySelectionInfo(b);const d=b.allObjects.filter(l(c.base.ObjectKind.marker));0<d.length&&d.length===b.allObjects.length?a.setState({displayPropertyBar:!0,fill:{hasAlpha:!0,current:g.FillKind.solid,solidFill:{fillKind:g.FillKind.solid,color:d[0].fill}}}):a.setState({displayPropertyBar:!1})})}};a={};Object.defineProperty(a,"__esModule",{value:!0});a.lazyModule={createPlugin(){return new e.MarkerEditorPlugin}};return a});

})() || {};
moduleImpl["module"]=moduleImpl;
return moduleImpl;};if(typeof define==="function"&&define.amd){define("prezi_marker_editor",["require","prezi_cet_model_editor","prezi_i18n","prezi_plugin_api","prezi_widgets"],function(){var moduleUrl=arguments[0]["toUrl"]("prezi_marker_editor.js");baseUrl=moduleUrl.substr(0,moduleUrl.lastIndexOf("/"));return(__factory).apply({},[].slice.call(arguments,1));});}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){baseUrl=__dirname;module.exports=(__factory)(require("prezi_cet_model_editor"),require("prezi_i18n"),require("prezi_plugin_api"),require("prezi_widgets"));}else{this["prezi_marker_editor"]=__factory(this["prezi_cet_model_editor"],this["prezi_i18n"],this["prezi_plugin_api"],this["prezi_widgets"]);}}).call(this);